{
  "name": "http",
  "description": "Monitor http request reception and processing",
  "enabled": true,
  "targets": [
    {
      "id": "org.springframework.web.servlet.FrameworkServlet.service",
      "className": "org.springframework.web.servlet.FrameworkServlet",
      "methods": ["service"],
      "description": "service"
    },
    {
      "id": "org.apache.coyote.http11.Http11Processor.service",
      "className": "org.apache.coyote.http11.Http11Processor",
      "methods": ["service"],
      "description": "service"
    }
  ],
  "metrics": [
    {
      "targetId": "org.springframework.web.servlet.FrameworkServlet.service",
      "name": "method",
      "description": "http method",
      "source": "args[0].getMethod()",
      "type": "String",
      "capturePoint": "before"
    },
    {
      "targetId": "org.springframework.web.servlet.FrameworkServlet.service",
      "name": "uri",
      "description": "http method",
      "source": "args[0].getRequestURI()",
      "type": "String",
      "capturePoint": "before"
    },
    {
      "targetId": "org.springframework.web.servlet.FrameworkServlet.service",
      "name": "content-length",
      "description": "content-length",
      "source": "args[0].getHeader(\"content-length\")",
      "type": "int",
      "capturePoint": "before"
    },
    {
      "targetId": "org.apache.coyote.http11.Http11Processor.service",
      "name": "header-length",
      "description": "header-length",
      "source": "targetObject.inputBuffer.end",
      "type": "int",
      "capturePoint": "after"
    }
  ],
  "output": {
    "type": "http",
    "colorName": "CYAN",
    "template": "[biz] Time: ${executionTime}ms | Thread: ${threadName} | writeLog"
  },
  "filters": [
    {
      "name": "Exclude static resources",
      "condition": "executionTime > 0"
    }
  ]
}