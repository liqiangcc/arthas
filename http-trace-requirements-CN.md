# Arthas é€šç”¨è·Ÿè¸ªåŠŸèƒ½éœ€æ±‚æ–‡æ¡£ (V4.1)

## æ›´æ–°æ—¥å¿—

### V4.1 (2025-01-11)
- **æ–°å¢åŠŸèƒ½**ï¼šæ¢é’ˆé…ç½®æ–‡ä»¶æ”¯æŒjaråŒ…ç‰ˆæœ¬æŒ‡å®š
  - æ·»åŠ äº† `jarVersions` é…ç½®é¡¹ï¼Œæ”¯æŒæŒ‡å®šç›®æ ‡jaråŒ…çš„ç‰ˆæœ¬èŒƒå›´
  - æ”¯æŒç‰ˆæœ¬æ’é™¤åŠŸèƒ½ï¼Œå¯æ’é™¤ç‰¹å®šæœ‰é—®é¢˜çš„ç‰ˆæœ¬
  - æ–°å¢å¤šç‰ˆæœ¬é…ç½®æ”¯æŒï¼ŒåŒä¸€æ¢é’ˆå¯ä¸ºä¸åŒç‰ˆæœ¬æä¾›ä¸åŒé…ç½®
  - æ·»åŠ ç‰ˆæœ¬æ£€æµ‹å’Œå…¼å®¹æ€§éªŒè¯åŠŸèƒ½
  - æ–°å¢ç‰ˆæœ¬ç®¡ç†ç›¸å…³çš„configå‘½ä»¤
- **éœ€æ±‚ç¼–å·**ï¼šæ–°å¢ FR-8.8.1 å’Œ FR-8.12
- **éªŒæ”¶æ ‡å‡†**ï¼šæ›´æ–°äº†æ¢é’ˆé…ç½®ç³»ç»Ÿçš„éªŒæ”¶æ ‡å‡†ï¼Œå¢åŠ ç‰ˆæœ¬ç›¸å…³éªŒæ”¶é¡¹

### V4.0 (åˆå§‹ç‰ˆæœ¬)
- å®šä¹‰äº†å®Œæ•´çš„Arthasé€šç”¨è·Ÿè¸ªåŠŸèƒ½éœ€æ±‚
- åŒ…å«trace-flowã€replayã€trace-diffä¸‰ä¸ªæ ¸å¿ƒå‘½ä»¤
- è®¾è®¡äº†é…ç½®é©±åŠ¨çš„æ¢é’ˆç³»ç»Ÿ
- å®šä¹‰äº†åœºæ™¯ç®¡ç†å’Œé…ç½®ç³»ç»Ÿ

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£ä¸“æ³¨äºéœ€æ±‚å®šä¹‰ï¼Œè¯¦ç»†æè¿°äº†Arthasé€šç”¨è·Ÿè¸ªåŠŸèƒ½çš„ä¸šåŠ¡èƒŒæ™¯ã€æ ¸å¿ƒä»·å€¼ã€åº”ç”¨åœºæ™¯ã€éœ€æ±‚ç›®æ ‡å’ŒåŠŸèƒ½éœ€æ±‚ã€‚æ–‡æ¡£ä¿ç•™äº†é‡è¦çš„èƒŒæ™¯ä¿¡æ¯ã€æ ¸å¿ƒä»·å€¼éœ€æ±‚ç›®æ ‡å’Œåº”ç”¨åœºæ™¯ï¼Œä½†ç§»é™¤äº†å…·ä½“çš„æŠ€æœ¯å®ç°ç»†èŠ‚ï¼Œä¸“æ³¨äºå›ç­”"åšä»€ä¹ˆ"è€Œä¸æ˜¯"æ€ä¹ˆåš"ã€‚

**æ–‡æ¡£ç‰¹ç‚¹**ï¼š
- âœ… ä¿ç•™å®Œæ•´çš„ä¸šåŠ¡èƒŒæ™¯å’Œç”¨æˆ·ç—›ç‚¹åˆ†æ
- âœ… è¯¦ç»†å®šä¹‰æ ¸å¿ƒä»·å€¼å’Œéœ€æ±‚ç›®æ ‡
- âœ… æä¾›21ä¸ªå…·ä½“çš„åº”ç”¨åœºæ™¯
- âœ… æ˜ç¡®çš„åŠŸèƒ½å’ŒéåŠŸèƒ½éœ€æ±‚
- âœ… å¯éªŒè¯çš„éªŒæ”¶æ ‡å‡†
- âŒ ä¸åŒ…å«å…·ä½“çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆ
- âŒ ä¸åŒ…å«ä»£ç ç¤ºä¾‹å’Œæ¶æ„è®¾è®¡

## ğŸ“‘ ç›®å½•

1. [æ¦‚è¿°](#1-æ¦‚è¿°)
2. [éœ€æ±‚èƒŒæ™¯ä¸ä»·å€¼](#2-éœ€æ±‚èƒŒæ™¯ä¸ä»·å€¼)
3. [æ ¸å¿ƒè®¾è®¡åŸåˆ™](#3-æ ¸å¿ƒè®¾è®¡åŸåˆ™)
4. [åŠŸèƒ½éœ€æ±‚](#4-åŠŸèƒ½éœ€æ±‚)
5. [æ¢é’ˆç³»ç»Ÿéœ€æ±‚](#5-æ¢é’ˆç³»ç»Ÿéœ€æ±‚)
6. [é…ç½®ç®¡ç†éœ€æ±‚](#6-é…ç½®ç®¡ç†éœ€æ±‚)
7. [åœºæ™¯ç®¡ç†éœ€æ±‚](#7-åœºæ™¯ç®¡ç†éœ€æ±‚)
8. [éªŒæ”¶æ ‡å‡†](#8-éªŒæ”¶æ ‡å‡†)
9. [é£é™©è¯„ä¼°](#9-é£é™©è¯„ä¼°)
10. [é¡¹ç›®é‡Œç¨‹ç¢‘](#10-é¡¹ç›®é‡Œç¨‹ç¢‘)

## 1. æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

#### 1.1.1 ä¸šåŠ¡èƒŒæ™¯
åœ¨ç°ä»£å¾®æœåŠ¡æ¶æ„å’Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œåº”ç”¨ç¨‹åºçš„å¤æ‚æ€§æ—¥ç›Šå¢åŠ ã€‚ä¸€ä¸ªç®€å•çš„HTTPè¯·æ±‚å¯èƒ½ä¼šè§¦å‘ï¼š
- å¤šä¸ªæ•°æ®åº“æŸ¥è¯¢æ“ä½œï¼ˆMySQLã€PostgreSQLã€Oracleç­‰ï¼‰
- ç¼“å­˜è¯»å†™æ“ä½œï¼ˆRedisã€Memcachedç­‰ï¼‰
- å¤–éƒ¨æœåŠ¡è°ƒç”¨ï¼ˆHTTPå®¢æˆ·ç«¯ã€RPCè°ƒç”¨ï¼‰
- æ¶ˆæ¯é˜Ÿåˆ—æ“ä½œï¼ˆKafkaã€RabbitMQç­‰ï¼‰
- æ–‡ä»¶I/Oæ“ä½œå’Œå…¶ä»–ç³»ç»Ÿèµ„æºè®¿é—®

å½“ç³»ç»Ÿå‡ºç°æ€§èƒ½é—®é¢˜ã€å¼‚å¸¸æˆ–ä¸šåŠ¡é€»è¾‘é”™è¯¯æ—¶ï¼Œå¼€å‘è€…å’Œè¿ç»´äººå‘˜éœ€è¦å¿«é€Ÿç†è§£è¯·æ±‚çš„å®Œæ•´æ‰§è¡Œæµç¨‹ï¼Œå®šä½é—®é¢˜æ ¹æºã€‚

#### 1.1.2 ç°æœ‰å·¥å…·çš„å±€é™æ€§

**Arthasç°æœ‰å‘½ä»¤çš„ä¸è¶³ï¼š**
- **watchå‘½ä»¤**ï¼šåªèƒ½ç›‘æ§å•ä¸ªæ–¹æ³•ï¼Œæ— æ³•å±•ç¤ºå®Œæ•´çš„è°ƒç”¨é“¾è·¯
- **traceå‘½ä»¤**ï¼šä¸»è¦å…³æ³¨æ–¹æ³•è°ƒç”¨æ ‘ï¼Œå¯¹HTTPè¯·æ±‚çš„ä¸šåŠ¡æµç¨‹æ”¯æŒä¸è¶³
- **monitorå‘½ä»¤**ï¼šæä¾›ç»Ÿè®¡ä¿¡æ¯ï¼Œä½†ç¼ºä¹å®æ—¶çš„è°ƒç”¨è¯¦æƒ…å’Œä¸Šä¸‹æ–‡å…³è”

**ç¬¬ä¸‰æ–¹å·¥å…·çš„é—®é¢˜ï¼š**
- **APMå·¥å…·**ï¼šéœ€è¦ä»£ç ä¾µå…¥æˆ–å¤æ‚é…ç½®ï¼Œä¸”æˆæœ¬è¾ƒé«˜
- **æ—¥å¿—åˆ†æ**ï¼šéœ€è¦å¤§é‡çš„æ—¥å¿—é…ç½®å’ŒåæœŸåˆ†æå·¥ä½œ
- **è°ƒè¯•å·¥å…·**ï¼šé€šå¸¸åªèƒ½åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒå—é™

#### 1.1.3 ç”¨æˆ·ç—›ç‚¹

**å¼€å‘é˜¶æ®µç—›ç‚¹ï¼š**
- éš¾ä»¥ç†è§£å¤æ‚ä¸šåŠ¡æµç¨‹çš„å®Œæ•´æ‰§è¡Œè·¯å¾„
- æ— æ³•å¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆåœ¨å“ªä¸ªç¯èŠ‚
- ç¼ºä¹ç›´è§‚çš„è°ƒç”¨é“¾è·¯å¯è§†åŒ–

**æµ‹è¯•é˜¶æ®µç—›ç‚¹ï¼š**
- éš¾ä»¥éªŒè¯ä¸šåŠ¡æµç¨‹æ˜¯å¦æŒ‰é¢„æœŸæ‰§è¡Œ
- æ— æ³•æœ‰æ•ˆè¿›è¡Œæ€§èƒ½æµ‹è¯•å’Œåˆ†æ
- ç¼ºä¹æœ‰æ•ˆçš„å›å½’æµ‹è¯•å¯¹æ¯”æ‰‹æ®µ

**ç”Ÿäº§ç¯å¢ƒç—›ç‚¹ï¼š**
- çº¿ä¸Šé—®é¢˜éš¾ä»¥å¿«é€Ÿå®šä½å’Œåˆ†æ
- ç¼ºä¹éä¾µå…¥å¼çš„å®æ—¶ç›‘æ§æ‰‹æ®µ
- æ— æ³•åœ¨ä¸å½±å“ä¸šåŠ¡çš„æƒ…å†µä¸‹è¿›è¡Œæ·±åº¦åˆ†æ

æœ¬æ–‡æ¡£å®šä¹‰äº† Arthas é€šç”¨è·Ÿè¸ªåŠŸèƒ½çš„å®Œæ•´éœ€æ±‚ï¼Œæ—¨åœ¨ä¸º Java å¼€å‘è€…æä¾›ä¸€ä¸ªå¼ºå¤§ã€æ˜“ç”¨ã€å¯æ‰©å±•çš„åº”ç”¨æ‰§è¡Œæµç¨‹è·Ÿè¸ªå·¥å…·ï¼Œè§£å†³ä¸Šè¿°ç—›ç‚¹é—®é¢˜ã€‚

### 1.2 å‘½ä»¤æ¦‚è§ˆ

æœ¬åŠŸèƒ½åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒå‘½ä»¤ï¼š

- **`trace-flow`** (åˆ«å: **`tf`**) - é€šç”¨è·Ÿè¸ªå‘½ä»¤ï¼Œç”¨äºå®æ—¶è·Ÿè¸ªåº”ç”¨æ‰§è¡Œæµç¨‹
- **`replay`** (åˆ«å: **`rp`**) - è¯·æ±‚å›æ”¾å‘½ä»¤ï¼Œç”¨äºé‡ç°å’Œè°ƒè¯•é—®é¢˜
- **`trace-diff`** (åˆ«å: **`td`**) - è·Ÿè¸ªç»“æœå¯¹æ¯”å‘½ä»¤ï¼Œç”¨äºåˆ†ææ‰§è¡Œå·®å¼‚

### 1.3 æ ¸å¿ƒä»·å€¼

- **å¿«é€Ÿç†è§£æ‰§è¡Œé€»è¾‘**ï¼šé€šè¿‡å¯è§†åŒ–çš„è°ƒç”¨é“¾è·¯ï¼Œå¿«é€ŸæŒæ¡è¯·æ±‚çš„æ•°æ®å¤„ç†æµç¨‹
- **é™ä½ä»£ç å­¦ä¹ æˆæœ¬**ï¼šæ— éœ€æ·±å…¥é˜…è¯»ä»£ç ï¼Œå³å¯äº†è§£ç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶
- **æå‡é—®é¢˜å®šä½æ•ˆç‡**ï¼šä»ä¼ ç»Ÿçš„"å°æ—¶çº§"æ’æŸ¥ç¼©çŸ­åˆ°"åˆ†é’Ÿçº§"å®šä½
- **æ”¯æŒéä¾µå…¥å¼åˆ†æ**ï¼šæ— éœ€ä¿®æ”¹ä»£ç æˆ–é‡å¯åº”ç”¨ï¼Œå³å¯è·å¾—å®Œæ•´çš„æ‰§è¡Œè½¨è¿¹
- **é…ç½®é©±åŠ¨æ‰©å±•**ï¼šé€šè¿‡JSONé…ç½®æ–‡ä»¶å®šä¹‰æ¢é’ˆï¼Œæ— éœ€ç¼–å†™Javaä»£ç å³å¯æ‰©å±•ç›‘æ§èƒ½åŠ›
- **æ™ºèƒ½ç‰ˆæœ¬é€‚é…**ï¼šè‡ªåŠ¨æ£€æµ‹jaråŒ…ç‰ˆæœ¬å¹¶åŒ¹é…ç›¸åº”çš„æ¢é’ˆé…ç½®ï¼Œç¡®ä¿å…¼å®¹æ€§å’Œå‡†ç¡®æ€§

## 2. éœ€æ±‚ç›®æ ‡

### 2.1 ä¸šåŠ¡ç›®æ ‡

**è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š**
å¼€å‘è€…åœ¨é¢å¯¹ä¸ç†Ÿæ‚‰çš„ä»£ç æ—¶ï¼Œéš¾ä»¥å¿«é€Ÿç†è§£ Java åº”ç”¨çš„æ•°æ®å¤„ç†é€»è¾‘å’Œæ‰§è¡Œæµç¨‹ï¼Œåœ¨å‡ºç°é—®é¢˜æ—¶æ— æ³•å¿«é€Ÿå®šä½æ ¹å› ï¼Œå¯¼è‡´æ’æŸ¥æ•ˆç‡ä½ä¸‹ã€‚

**ç›®æ ‡ç”¨æˆ·ï¼š**
- **Java å¼€å‘è€…**ï¼šéœ€è¦å¿«é€Ÿç†è§£ç³»ç»Ÿçš„æ‰§è¡Œé€»è¾‘å’Œæ•°æ®æµå‘
- **ç³»ç»Ÿç»´æŠ¤è€…**ï¼šéœ€è¦ç†è§£ç°æœ‰ä»£ç çš„å¤„ç†é€»è¾‘
- **é—®é¢˜æ’æŸ¥è€…**ï¼šéœ€è¦åœ¨ä¸æ·±å…¥ä»£ç çš„æƒ…å†µä¸‹å¿«é€Ÿå®šä½é—®é¢˜
- **ä»£ç å®¡æŸ¥è€…**ï¼šéœ€è¦å¿«é€ŸæŒæ¡ç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶

### 2.2 æ ¸å¿ƒä»·å€¼

#### 2.2.1 ä¸šåŠ¡ä»·å€¼

**æå‡å¼€å‘æ•ˆç‡**
- **å¿«é€Ÿç†è§£ç³»ç»Ÿ**ï¼šæ–°å¼€å‘è€…å¯ä»¥åœ¨æ•°å°æ—¶å†…ç†è§£å¤æ‚ç³»ç»Ÿçš„ä¸šåŠ¡æµç¨‹
- **å‡å°‘è°ƒè¯•æ—¶é—´**ï¼šå°†ä¼ ç»Ÿçš„"å°æ—¶çº§"é—®é¢˜æ’æŸ¥ç¼©çŸ­åˆ°"åˆ†é’Ÿçº§"å®šä½
- **é™ä½å­¦ä¹ æˆæœ¬**ï¼šé€šè¿‡å¯è§†åŒ–çš„è°ƒç”¨é“¾è·¯ï¼Œç›´è§‚ç†è§£ä»£ç æ‰§è¡Œé€»è¾‘

**æé«˜ç³»ç»Ÿè´¨é‡**
- **åŠæ—©å‘ç°é—®é¢˜**ï¼šåœ¨å¼€å‘å’Œæµ‹è¯•é˜¶æ®µå°±èƒ½å‘ç°æ½œåœ¨çš„æ€§èƒ½å’Œé€»è¾‘é—®é¢˜
- **ç¡®ä¿æ•°æ®ä¸€è‡´æ€§**ï¼šéªŒè¯æ•°æ®åœ¨å„ä¸ªç¯èŠ‚çš„å¤„ç†æ˜¯å¦æ­£ç¡®
- **æ”¯æŒå›å½’æµ‹è¯•**ï¼šé€šè¿‡å¯¹æ¯”åˆ†æç¡®ä¿ä»£ç ä¿®æ”¹ä¸ä¼šå¼•å…¥æ–°é—®é¢˜

**é™ä½è¿ç»´æˆæœ¬**
- **å¿«é€Ÿæ•…éšœå®šä½**ï¼šç”Ÿäº§ç¯å¢ƒé—®é¢˜å¯ä»¥å¿«é€Ÿå®šä½åˆ°å…·ä½“çš„ç»„ä»¶å’Œå‚æ•°
- **éä¾µå…¥å¼ç›‘æ§**ï¼šæ— éœ€ä¿®æ”¹ä»£ç æˆ–é‡å¯åº”ç”¨ï¼Œå³å¯è·å¾—å®Œæ•´çš„æ‰§è¡Œè½¨è¿¹
- **å‡å°‘æ•…éšœæ—¶é—´**ï¼šæé«˜é—®é¢˜è§£å†³æ•ˆç‡ï¼Œå‡å°‘ç³»ç»Ÿåœæœºæ—¶é—´

#### 2.2.2 æŠ€æœ¯ä»·å€¼

**ç³»ç»Ÿå¯è§‚æµ‹æ€§**
- **å®Œæ•´é“¾è·¯è¿½è¸ª**ï¼šæä¾›ä»HTTPè¯·æ±‚åˆ°æ•°æ®åº“æ“ä½œçš„å®Œæ•´æ‰§è¡Œé“¾è·¯
- **å®æ—¶ç›‘æ§èƒ½åŠ›**ï¼šæ”¯æŒç”Ÿäº§ç¯å¢ƒçš„å®æ—¶ç›‘æ§å’Œåˆ†æ
- **å¤šç»´åº¦åˆ†æ**ï¼šæ”¯æŒæ€§èƒ½ã€å¼‚å¸¸ã€æ•°æ®æµç­‰å¤šä¸ªç»´åº¦çš„åˆ†æ

**é…ç½®é©±åŠ¨æ¶æ„**
- **çµæ´»æ‰©å±•**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶å³å¯æ”¯æŒæ–°çš„ç›‘æ§åœºæ™¯ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 
- **ç‰ˆæœ¬é€‚é…**ï¼šè‡ªåŠ¨é€‚é…ä¸åŒç‰ˆæœ¬çš„jaråŒ…å’Œæ¡†æ¶
- **ä¸ªæ€§åŒ–å®šåˆ¶**ï¼šæ”¯æŒç”¨æˆ·æ ¹æ®å…·ä½“éœ€æ±‚å®šåˆ¶ç›‘æ§ç­–ç•¥

**æŒ‡æ ‡é©±åŠ¨è®¾è®¡**
- **ç›´è§‚çš„æŒ‡æ ‡å®šä¹‰**ï¼šç”¨æˆ·å¯ä»¥ç›´æ¥å®šä¹‰å…³å¿ƒçš„ä¸šåŠ¡æŒ‡æ ‡
- **è‡ªåŠ¨è®¡ç®—èƒ½åŠ›**ï¼šæ”¯æŒå¤æ‚çš„æŒ‡æ ‡è®¡ç®—å’Œèšåˆåˆ†æ
- **æ•°æ®é©±åŠ¨å†³ç­–**ï¼šä¸ºæ€§èƒ½ä¼˜åŒ–å’Œæ¶æ„æ”¹è¿›æä¾›æ•°æ®æ”¯æ’‘

#### 2.2.3 ç”¨æˆ·ä»·å€¼

**å¼€å‘è€…ä»·å€¼**
- **æå‡å·¥ä½œæ•ˆç‡**ï¼šå¿«é€Ÿç†è§£å’Œè°ƒè¯•å¤æ‚ç³»ç»Ÿ
- **æé«˜ä»£ç è´¨é‡**ï¼šé€šè¿‡å®é™…æ‰§è¡Œè·¯å¾„éªŒè¯ä»£ç é€»è¾‘
- **å­¦ä¹ æœ€ä½³å®è·µ**ï¼šé€šè¿‡å†…ç½®åœºæ™¯å­¦ä¹ å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ³•

**æµ‹è¯•å·¥ç¨‹å¸ˆä»·å€¼**
- **æé«˜æµ‹è¯•æ•ˆç‡**ï¼šå¿«é€ŸéªŒè¯åŠŸèƒ½æ˜¯å¦æŒ‰é¢„æœŸæ‰§è¡Œ
- **å¢å¼ºæµ‹è¯•è¦†ç›–**ï¼šå‘ç°ä¼ ç»Ÿæµ‹è¯•æ–¹æ³•éš¾ä»¥è¦†ç›–çš„é—®é¢˜
- **è‡ªåŠ¨åŒ–å›å½’æµ‹è¯•**ï¼šæ”¯æŒè‡ªåŠ¨åŒ–çš„å›å½’æµ‹è¯•å’Œå¯¹æ¯”åˆ†æ

**è¿ç»´å·¥ç¨‹å¸ˆä»·å€¼**
- **å¿«é€Ÿé—®é¢˜å®šä½**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒå¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜
- **é¢„é˜²æ€§ç›‘æ§**ï¼šæå‰å‘ç°æ½œåœ¨çš„æ€§èƒ½å’Œç¨³å®šæ€§é—®é¢˜
- **æ•°æ®é©±åŠ¨è¿ç»´**ï¼šåŸºäºå®é™…æ•°æ®è¿›è¡Œç³»ç»Ÿä¼˜åŒ–å’Œå®¹é‡è§„åˆ’

### 2.3 åº”ç”¨åœºæ™¯

#### 2.3.1 å¼€å‘é˜¶æ®µåœºæ™¯

**åœºæ™¯1ï¼šå¿«é€Ÿç†Ÿæ‚‰ä»£ç é€»è¾‘**
- **ç”¨æˆ·**ï¼šæ–°åŠ å…¥å›¢é˜Ÿçš„å¼€å‘è€…
- **éœ€æ±‚**ï¼šå¿«é€Ÿç†è§£ç°æœ‰ç³»ç»Ÿçš„ä¸šåŠ¡æµç¨‹å’Œæ•°æ®å¤„ç†é€»è¾‘
- **è§£å†³æ–¹æ¡ˆ**ï¼šé€šè¿‡è·Ÿè¸ªå…¸å‹çš„HTTPè¯·æ±‚ï¼Œå¯è§†åŒ–å±•ç¤ºå®Œæ•´çš„æ‰§è¡Œè·¯å¾„
- **ä»·å€¼**ï¼šå°†ä»£ç å­¦ä¹ æ—¶é—´ä»æ•°å¤©ç¼©çŸ­åˆ°æ•°å°æ—¶

**åœºæ™¯2ï¼šç†è§£æ•°æ®æµå‘**
- **ç”¨æˆ·**ï¼šéœ€è¦ä¿®æ”¹ä¸šåŠ¡é€»è¾‘çš„å¼€å‘è€…
- **éœ€æ±‚**ï¼šäº†è§£ä¸€ä¸ªè¯·æ±‚ä¼šè®¿é—®å“ªäº›æ•°æ®åº“è¡¨ã€è°ƒç”¨å“ªäº›å¤–éƒ¨æœåŠ¡ã€ç»è¿‡å“ªäº›ç»„ä»¶
- **è§£å†³æ–¹æ¡ˆ**ï¼šé€šè¿‡æ¢é’ˆé…ç½®æ•è·æ‰€æœ‰æ•°æ®è®¿é—®æ“ä½œï¼Œå±•ç¤ºå®Œæ•´çš„æ•°æ®æµå‘å›¾
- **ä»·å€¼**ï¼šé¿å…ä¿®æ”¹ä»£ç æ—¶é—æ¼å…³é”®ä¾èµ–ï¼Œå‡å°‘bugå¼•å…¥

**åœºæ™¯3ï¼šå‚æ•°ä¼ é€’åˆ†æ**
- **ç”¨æˆ·**ï¼šè°ƒè¯•å¤æ‚ä¸šåŠ¡é€»è¾‘çš„å¼€å‘è€…
- **éœ€æ±‚**ï¼šäº†è§£æ•°æ®åœ¨å„ä¸ªç¯èŠ‚ä¹‹é—´æ˜¯å¦‚ä½•ä¼ é€’å’Œè½¬æ¢çš„
- **è§£å†³æ–¹æ¡ˆ**ï¼šæ•è·æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼ï¼Œå±•ç¤ºæ•°æ®çš„å®Œæ•´å˜æ¢è¿‡ç¨‹
- **ä»·å€¼**ï¼šå¿«é€Ÿå®šä½æ•°æ®å¤„ç†é”™è¯¯ï¼Œæå‡è°ƒè¯•æ•ˆç‡

#### 2.3.2 æµ‹è¯•é˜¶æ®µåœºæ™¯

**åœºæ™¯4ï¼šæ‰§è¡Œé€»è¾‘éªŒè¯**
- **ç”¨æˆ·**ï¼šæµ‹è¯•å·¥ç¨‹å¸ˆå’ŒQA
- **éœ€æ±‚**ï¼šéªŒè¯æŸä¸ªåŠŸèƒ½çš„å®é™…æ‰§è¡Œè·¯å¾„æ˜¯å¦ç¬¦åˆé¢„æœŸè®¾è®¡
- **è§£å†³æ–¹æ¡ˆ**ï¼šå¯¹æ¯”é¢„æœŸçš„æ‰§è¡Œæµç¨‹å’Œå®é™…è·Ÿè¸ªç»“æœ
- **ä»·å€¼**ï¼šç¡®ä¿åŠŸèƒ½æŒ‰è®¾è®¡å®ç°ï¼Œæå‰å‘ç°é€»è¾‘é”™è¯¯

**åœºæ™¯5ï¼šæ•°æ®ä¸€è‡´æ€§éªŒè¯**
- **ç”¨æˆ·**ï¼šæµ‹è¯•å·¥ç¨‹å¸ˆ
- **éœ€æ±‚**ï¼šæ£€æŸ¥æ•°æ®åœ¨å¤„ç†è¿‡ç¨‹ä¸­æ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦å­˜åœ¨æ•°æ®ä¸¢å¤±æˆ–é”™è¯¯è½¬æ¢
- **è§£å†³æ–¹æ¡ˆ**ï¼šè·Ÿè¸ªæ•°æ®çš„å®Œæ•´å¤„ç†é“¾è·¯ï¼ŒéªŒè¯æ¯ä¸ªç¯èŠ‚çš„æ•°æ®æ­£ç¡®æ€§
- **ä»·å€¼**ï¼šç¡®ä¿æ•°æ®å¤„ç†çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§

**åœºæ™¯6ï¼šæ€§èƒ½å›å½’æ£€æµ‹**
- **ç”¨æˆ·**ï¼šæ€§èƒ½æµ‹è¯•å·¥ç¨‹å¸ˆ
- **éœ€æ±‚**ï¼šé€šè¿‡å¯¹æ¯”å†å²è·Ÿè¸ªç»“æœï¼Œå‘ç°æ€§èƒ½é€€åŒ–é—®é¢˜
- **è§£å†³æ–¹æ¡ˆ**ï¼šä¿å­˜åŸºçº¿è·Ÿè¸ªç»“æœï¼Œä¸æ–°ç‰ˆæœ¬è¿›è¡Œå¯¹æ¯”åˆ†æ
- **ä»·å€¼**ï¼šåŠæ—¶å‘ç°æ€§èƒ½é—®é¢˜ï¼Œé¿å…æ€§èƒ½é€€åŒ–ä¸Šçº¿

#### 2.3.3 ç”Ÿäº§ç¯å¢ƒåœºæ™¯

**åœºæ™¯7ï¼šå¿«é€Ÿé—®é¢˜è¯Šæ–­**
- **ç”¨æˆ·**ï¼šè¿ç»´å·¥ç¨‹å¸ˆå’Œå¼€å‘è€…
- **éœ€æ±‚**ï¼šé‡åˆ°çº¿ä¸Šé—®é¢˜æ—¶ï¼Œå¿«é€Ÿé€‰æ‹©åˆé€‚çš„æ’æŸ¥æ–¹æ¡ˆ
- **è§£å†³æ–¹æ¡ˆ**ï¼šé€šè¿‡å†…ç½®åœºæ™¯æ¨¡æ¿ï¼Œå¿«é€Ÿå¯åŠ¨ç›¸åº”çš„è·Ÿè¸ªé…ç½®
- **ä»·å€¼**ï¼šå°†é—®é¢˜å®šä½æ—¶é—´ä»å°æ—¶çº§ç¼©çŸ­åˆ°åˆ†é’Ÿçº§

**åœºæ™¯8ï¼šé—®é¢˜å¿«é€Ÿå®šä½**
- **ç”¨æˆ·**ï¼šè¿ç»´å·¥ç¨‹å¸ˆ
- **éœ€æ±‚**ï¼šç³»ç»Ÿå‡ºç°å¼‚å¸¸æ—¶ï¼Œå¿«é€Ÿæ‰¾åˆ°æ˜¯å“ªä¸ªç¯èŠ‚å‡ºé”™
- **è§£å†³æ–¹æ¡ˆ**ï¼šå®æ—¶è·Ÿè¸ªå¼‚å¸¸è¯·æ±‚ï¼Œæ•è·å…·ä½“çš„é”™è¯¯å‚æ•°å’Œå¼‚å¸¸ä¿¡æ¯
- **ä»·å€¼**ï¼šå¿«é€Ÿå®šä½é—®é¢˜æ ¹å› ï¼Œå‡å°‘ç³»ç»Ÿæ•…éšœæ—¶é—´

**åœºæ™¯9ï¼šæ•°æ®ä¿®æ”¹æºå¤´è¿½è¸ª**
- **ç”¨æˆ·**ï¼šæ•°æ®åˆ†æå¸ˆå’Œå¼€å‘è€…
- **éœ€æ±‚**ï¼šå‘ç°æŸä¸ªæ•°æ®è¢«æ„å¤–ä¿®æ”¹ï¼Œéœ€è¦æ‰¾åˆ°æ‰€æœ‰ä¿®æ”¹æ“ä½œçš„æºå¤´
- **è§£å†³æ–¹æ¡ˆ**ï¼šé€šè¿‡ç‰¹å®šå€¼è¿‡æ»¤ï¼Œè¿½è¸ªåŒ…å«è¯¥å€¼çš„æ‰€æœ‰æ“ä½œè·¯å¾„
- **ä»·å€¼**ï¼šå¿«é€Ÿå®šä½æ•°æ®å¼‚å¸¸çš„æ ¹æœ¬åŸå› 

#### 2.3.4 ç»´æŠ¤é˜¶æ®µåœºæ™¯

**åœºæ™¯10ï¼šä»£ç å½±å“åˆ†æ**
- **ç”¨æˆ·**ï¼šç»´æŠ¤å¼€å‘è€…
- **éœ€æ±‚**ï¼šä¿®æ”¹ä»£ç å‰ï¼Œäº†è§£å¯èƒ½å½±å“çš„è°ƒç”¨é“¾è·¯å’Œä¾èµ–å…³ç³»
- **è§£å†³æ–¹æ¡ˆ**ï¼šè·Ÿè¸ªç›¸å…³åŠŸèƒ½çš„å®Œæ•´æ‰§è¡Œè·¯å¾„ï¼Œåˆ†æå½±å“èŒƒå›´
- **ä»·å€¼**ï¼šé™ä½ä»£ç ä¿®æ”¹é£é™©ï¼Œå‡å°‘æ„å¤–å½±å“

**åœºæ™¯11ï¼šç³»ç»Ÿæ¶æ„ç†è§£**
- **ç”¨æˆ·**ï¼šæ¶æ„å¸ˆå’Œé«˜çº§å¼€å‘è€…
- **éœ€æ±‚**ï¼šé€šè¿‡å®é™…è¯·æ±‚è·Ÿè¸ªï¼Œç†è§£ç³»ç»Ÿçš„åˆ†å±‚æ¶æ„å’Œç»„ä»¶äº¤äº’
- **è§£å†³æ–¹æ¡ˆ**ï¼šå¯è§†åŒ–å±•ç¤ºç³»ç»Ÿçš„å®é™…è¿è¡Œæ¶æ„
- **ä»·å€¼**ï¼šä¸ºæ¶æ„ä¼˜åŒ–å’Œé‡æ„æä¾›æ•°æ®æ”¯æ’‘

#### 2.3.5 é«˜çº§åº”ç”¨åœºæ™¯

**åœºæ™¯12ï¼šè¯·æ±‚å›æ”¾è°ƒè¯•**
- **ç”¨æˆ·**ï¼šå¼€å‘è€…å’Œæµ‹è¯•å·¥ç¨‹å¸ˆ
- **éœ€æ±‚**ï¼šä¿å­˜é—®é¢˜è¯·æ±‚çš„å›æ”¾æ–‡ä»¶ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸­é‡å¤æ‰§è¡Œè¿›è¡Œè°ƒè¯•
- **è§£å†³æ–¹æ¡ˆ**ï¼šè®°å½•å®Œæ•´çš„è¯·æ±‚å‚æ•°å’Œä¸Šä¸‹æ–‡ï¼Œæ”¯æŒåœ¨ä¸åŒç¯å¢ƒä¸­å›æ”¾
- **ä»·å€¼**ï¼šæé«˜é—®é¢˜å¤ç°æ•ˆç‡ï¼Œæ”¯æŒç¦»çº¿è°ƒè¯•

**åœºæ™¯13ï¼šå›å½’æµ‹è¯•**
- **ç”¨æˆ·**ï¼šæµ‹è¯•å·¥ç¨‹å¸ˆ
- **éœ€æ±‚**ï¼šä½¿ç”¨å›æ”¾æ–‡ä»¶éªŒè¯ä»£ç ä¿®æ”¹åçš„è¡Œä¸ºæ˜¯å¦ä¸é¢„æœŸä¸€è‡´
- **è§£å†³æ–¹æ¡ˆ**ï¼šå¯¹æ¯”å›æ”¾ç»“æœä¸åŸºçº¿ç»“æœï¼Œè‡ªåŠ¨æ£€æµ‹å·®å¼‚
- **ä»·å€¼**ï¼šè‡ªåŠ¨åŒ–å›å½’æµ‹è¯•ï¼Œæé«˜æµ‹è¯•è¦†ç›–ç‡

**åœºæ™¯14ï¼šè·Ÿè¸ªç»“æœå¯¹æ¯”**
- **ç”¨æˆ·**ï¼šå¼€å‘è€…å’Œè¿ç»´å·¥ç¨‹å¸ˆ
- **éœ€æ±‚**ï¼šä¿å­˜æ­£å¸¸å’Œå¼‚å¸¸æƒ…å†µçš„è·Ÿè¸ªç»“æœï¼Œé€šè¿‡å¯¹æ¯”åˆ†ææ‰¾å‡ºå·®å¼‚
- **è§£å†³æ–¹æ¡ˆ**ï¼šæä¾›å¯è§†åŒ–çš„å¯¹æ¯”ç•Œé¢ï¼Œçªå‡ºæ˜¾ç¤ºå·®å¼‚ç‚¹
- **ä»·å€¼**ï¼šå¿«é€Ÿè¯†åˆ«é—®é¢˜åŸå› ï¼Œæé«˜åˆ†ææ•ˆç‡

**åœºæ™¯15ï¼šç‰¹å®šå€¼è¿½è¸ª**
- **ç”¨æˆ·**ï¼šæ•°æ®åˆ†æå¸ˆå’Œå¼€å‘è€…
- **éœ€æ±‚**ï¼šé€šè¿‡ç‰¹å®šå€¼è¿‡æ»¤ï¼ŒæŸ¥çœ‹åŒ…å«è¯¥å€¼çš„æ‰€æœ‰æ“ä½œè·¯å¾„
- **è§£å†³æ–¹æ¡ˆ**ï¼šæ”¯æŒå¤æ‚çš„å€¼åŒ¹é…å’Œè¿‡æ»¤æ¡ä»¶
- **ä»·å€¼**ï¼šç²¾ç¡®è¿½è¸ªæ•°æ®æµå‘ï¼Œå®šä½æ•°æ®å¼‚å¸¸

**åœºæ™¯16ï¼šæ•°æ®è®¿é—®åˆ†æ**
- **ç”¨æˆ·**ï¼šDBAå’Œæ€§èƒ½ä¼˜åŒ–å·¥ç¨‹å¸ˆ
- **éœ€æ±‚**ï¼šè¿½è¸ªç‰¹å®šæ•°æ®çš„è®¿é—®è·¯å¾„ï¼Œäº†è§£æ•°æ®çš„è¯»å†™æ¨¡å¼
- **è§£å†³æ–¹æ¡ˆ**ï¼šç»Ÿè®¡æ•°æ®è®¿é—®é¢‘ç‡å’Œæ¨¡å¼ï¼Œç”Ÿæˆè®¿é—®æŠ¥å‘Š
- **ä»·å€¼**ï¼šä¼˜åŒ–æ•°æ®åº“è®¾è®¡å’ŒæŸ¥è¯¢æ€§èƒ½

**åœºæ™¯17ï¼šè‡ªå®šä¹‰ç›‘æ§éœ€æ±‚**
- **ç”¨æˆ·**ï¼šè¿ç»´å·¥ç¨‹å¸ˆå’Œå¼€å‘è€…
- **éœ€æ±‚**ï¼šé€šè¿‡é…ç½®å¿«é€Ÿæ·»åŠ å¯¹ç‰¹å®šæ–¹æ³•ã€ç¬¬ä¸‰æ–¹åº“çš„ç›‘æ§
- **è§£å†³æ–¹æ¡ˆ**ï¼šæä¾›çµæ´»çš„æ¢é’ˆé…ç½®ç³»ç»Ÿï¼Œæ”¯æŒè‡ªå®šä¹‰ç›‘æ§ç‚¹
- **ä»·å€¼**ï¼šæ»¡è¶³ä¸ªæ€§åŒ–ç›‘æ§éœ€æ±‚ï¼Œæé«˜ç³»ç»Ÿå¯è§‚æµ‹æ€§

#### 2.3.6 ä¸“ä¸šåœºæ™¯

**åœºæ™¯18ï¼šæ–‡ä»¶æ“ä½œåˆ†æ**
- **ç”¨æˆ·**ï¼šç³»ç»Ÿç®¡ç†å‘˜å’Œå¼€å‘è€…
- **éœ€æ±‚**ï¼šç›‘æ§æ–‡ä»¶è¯»å†™æ“ä½œï¼Œäº†è§£æ•°æ®æ–‡ä»¶çš„å¤„ç†æµç¨‹
- **è§£å†³æ–¹æ¡ˆ**ï¼šè·Ÿè¸ªæ–‡ä»¶I/Oæ“ä½œï¼Œè®°å½•æ–‡ä»¶è·¯å¾„ã€å¤§å°ã€æ“ä½œç±»å‹
- **ä»·å€¼**ï¼šä¼˜åŒ–æ–‡ä»¶å¤„ç†é€»è¾‘ï¼Œæ’æŸ¥æ–‡ä»¶ç›¸å…³é—®é¢˜

**åœºæ™¯19ï¼šæ•…éšœå¤ç°åˆ†æ**
- **ç”¨æˆ·**ï¼šå¼€å‘è€…å’Œæµ‹è¯•å·¥ç¨‹å¸ˆ
- **éœ€æ±‚**ï¼šå¤ç°é—®é¢˜æ—¶ï¼Œå¯¹æ¯”æ­£å¸¸å’Œå¼‚å¸¸è¯·æ±‚çš„å‚æ•°ã€æ‰§è¡Œè¿‡ç¨‹å’Œç»“æœå·®å¼‚
- **è§£å†³æ–¹æ¡ˆ**ï¼šå¹¶è¡Œè·Ÿè¸ªå¤šä¸ªè¯·æ±‚ï¼Œæä¾›è¯¦ç»†çš„å¯¹æ¯”åˆ†æ
- **ä»·å€¼**ï¼šæé«˜æ•…éšœå¤ç°æˆåŠŸç‡ï¼ŒåŠ é€Ÿé—®é¢˜è§£å†³

**åœºæ™¯20ï¼šæ•°æ®è°ƒè¯•**
- **ç”¨æˆ·**ï¼šå¼€å‘è€…
- **éœ€æ±‚**ï¼šè°ƒè¯•å¤æ‚çš„æ•°æ®å¤„ç†é€»è¾‘ï¼ŒæŸ¥çœ‹æ¯ä¸€æ­¥çš„è¾“å…¥è¾“å‡ºå’Œä¸­é—´ç»“æœ
- **è§£å†³æ–¹æ¡ˆ**ï¼šè¯¦ç»†è®°å½•æ•°æ®å˜æ¢è¿‡ç¨‹ï¼Œæ”¯æŒæ–­ç‚¹å¼æŸ¥çœ‹
- **ä»·å€¼**ï¼šæé«˜å¤æ‚é€»è¾‘çš„è°ƒè¯•æ•ˆç‡

**åœºæ™¯21ï¼šåœºæ™¯æ¨¡æ¿å­¦ä¹ **
- **ç”¨æˆ·**ï¼šåˆçº§å¼€å‘è€…å’Œæ–°ç”¨æˆ·
- **éœ€æ±‚**ï¼šé€šè¿‡å†…ç½®åœºæ™¯é…ç½®å­¦ä¹ æœ€ä½³å®è·µå’Œå¸¸è§é—®é¢˜çš„æ’æŸ¥æ–¹æ³•
- **è§£å†³æ–¹æ¡ˆ**ï¼šæä¾›ä¸°å¯Œçš„åœºæ™¯æ¨¡æ¿å’Œä½¿ç”¨æŒ‡å—
- **ä»·å€¼**ï¼šé™ä½å­¦ä¹ æˆæœ¬ï¼Œå¿«é€ŸæŒæ¡å·¥å…·ä½¿ç”¨

### 2.4 éœ€æ±‚ç›®æ ‡

#### 2.4.1 åŠŸèƒ½ç›®æ ‡

**æ ¸å¿ƒåŠŸèƒ½ç›®æ ‡**
- **å®Œæ•´é“¾è·¯è·Ÿè¸ª**ï¼šå®ç°ä»HTTPè¯·æ±‚åˆ°æ•°æ®åº“ã€ç¼“å­˜ã€å¤–éƒ¨æœåŠ¡è°ƒç”¨çš„å®Œæ•´é“¾è·¯è·Ÿè¸ª
- **å®æ—¶ç›‘æ§åˆ†æ**ï¼šæ”¯æŒç”Ÿäº§ç¯å¢ƒçš„å®æ—¶ç›‘æ§å’Œé—®é¢˜åˆ†æ
- **é…ç½®é©±åŠ¨æ‰©å±•**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶å³å¯æ”¯æŒæ–°çš„ç›‘æ§åœºæ™¯å’Œç¬¬ä¸‰æ–¹ç»„ä»¶
- **æŒ‡æ ‡é©±åŠ¨æ”¶é›†**ï¼šç”¨æˆ·å¯ä»¥ç›´æ¥å®šä¹‰å…³å¿ƒçš„ä¸šåŠ¡æŒ‡æ ‡ï¼Œç³»ç»Ÿè‡ªåŠ¨æ”¶é›†å’Œè®¡ç®—

**é«˜çº§åŠŸèƒ½ç›®æ ‡**
- **æ™ºèƒ½é—®é¢˜è¯Šæ–­**ï¼šåŸºäºå†å²æ•°æ®å’Œæ¨¡å¼è¯†åˆ«ï¼Œæä¾›æ™ºèƒ½çš„é—®é¢˜è¯Šæ–­å»ºè®®
- **æ€§èƒ½åŸºçº¿å¯¹æ¯”**ï¼šæ”¯æŒæ€§èƒ½åŸºçº¿å»ºç«‹å’Œå›å½’æ£€æµ‹
- **åœºæ™¯åŒ–æ¨¡æ¿**ï¼šæä¾›ä¸°å¯Œçš„å†…ç½®åœºæ™¯æ¨¡æ¿ï¼Œé™ä½ä½¿ç”¨é—¨æ§›
- **å¯è§†åŒ–åˆ†æ**ï¼šæä¾›ç›´è§‚çš„å¯è§†åŒ–ç•Œé¢ï¼Œæ”¯æŒäº¤äº’å¼åˆ†æ

#### 2.4.2 æ€§èƒ½ç›®æ ‡

**å“åº”æ—¶é—´ç›®æ ‡**
- **å¯åŠ¨æ—¶é—´**ï¼štrace-flowå‘½ä»¤å¯åŠ¨æ—¶é—´ä¸è¶…è¿‡3ç§’
- **é…ç½®åŠ è½½**ï¼šé…ç½®æ–‡ä»¶è§£æå’ŒåŠ è½½æ—¶é—´ä¸è¶…è¿‡100ms
- **å®æ—¶å“åº”**ï¼šè·Ÿè¸ªç»“æœå±•ç¤ºå»¶è¿Ÿä¸è¶…è¿‡500ms

**èµ„æºå ç”¨ç›®æ ‡**
- **å†…å­˜å ç”¨**ï¼šå¢åŠ çš„å†…å­˜å ç”¨ä¸è¶…è¿‡åŸåº”ç”¨çš„10%
- **CPUå¼€é”€**ï¼šå¢åŠ çš„CPUå¼€é”€ä¸è¶…è¿‡åŸåº”ç”¨çš„2%
- **ç½‘ç»œå¼€é”€**ï¼šè·Ÿè¸ªæ•°æ®ä¼ è¾“ä¸å½±å“ä¸šåŠ¡ç½‘ç»œæ€§èƒ½

**å¹¶å‘æ€§èƒ½ç›®æ ‡**
- **é«˜å¹¶å‘æ”¯æŒ**ï¼šæ”¯æŒ1000+ QPSçš„é«˜å¹¶å‘åœºæ™¯è·Ÿè¸ª
- **å¤šçº¿ç¨‹å®‰å…¨**ï¼šç¡®ä¿å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ•°æ®ä¸€è‡´æ€§
- **èµ„æºéš”ç¦»**ï¼šè·Ÿè¸ªåŠŸèƒ½ä¸å½±å“ä¸šåŠ¡åŠŸèƒ½çš„æ­£å¸¸æ‰§è¡Œ

#### 2.4.3 å¯ç”¨æ€§ç›®æ ‡

**æ˜“ç”¨æ€§ç›®æ ‡**
- **é›¶é…ç½®å¯åŠ¨**ï¼šæä¾›å¼€ç®±å³ç”¨çš„é»˜è®¤é…ç½®
- **ä¸€é”®åœºæ™¯**ï¼šå¸¸è§é—®é¢˜æ’æŸ¥åœºæ™¯ä¸€é”®å¯åŠ¨
- **æ™ºèƒ½æç¤º**ï¼šæä¾›ä¸°å¯Œçš„é”™è¯¯æç¤ºå’Œä¿®å¤å»ºè®®
- **å­¦ä¹ æˆæœ¬**ï¼šæ–°ç”¨æˆ·åœ¨30åˆ†é’Ÿå†…æŒæ¡åŸºæœ¬ä½¿ç”¨æ–¹æ³•

**ç¨³å®šæ€§ç›®æ ‡**
- **æ•…éšœéš”ç¦»**ï¼šè·Ÿè¸ªåŠŸèƒ½å¼‚å¸¸ä¸å½±å“ä¸šåŠ¡ç³»ç»Ÿæ­£å¸¸è¿è¡Œ
- **ä¼˜é›…é™çº§**ï¼šåœ¨èµ„æºä¸è¶³æ—¶è‡ªåŠ¨é™çº§ï¼Œä¿è¯ä¸šåŠ¡ä¼˜å…ˆ
- **é”™è¯¯æ¢å¤**ï¼šæ”¯æŒé…ç½®é”™è¯¯çš„è‡ªåŠ¨æ£€æµ‹å’Œæ¢å¤
- **å…¼å®¹æ€§ä¿è¯**ï¼šå‘åå…¼å®¹ï¼Œæ–°ç‰ˆæœ¬ä¸ç ´åç°æœ‰é…ç½®

#### 2.4.4 æ‰©å±•æ€§ç›®æ ‡

**åŠŸèƒ½æ‰©å±•ç›®æ ‡**
- **æ’ä»¶åŒ–æ¶æ„**ï¼šæ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶å’Œæ¢é’ˆçš„æ— ç¼é›†æˆ
- **APIå¼€æ”¾**ï¼šæä¾›å®Œæ•´çš„APIæ¥å£ï¼Œæ”¯æŒäºŒæ¬¡å¼€å‘
- **é…ç½®æ‰©å±•**ï¼šæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰é…ç½®æ ¼å¼å’Œå¤„ç†é€»è¾‘
- **è¾“å‡ºæ‰©å±•**ï¼šæ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼å’Œç›®æ ‡ç³»ç»Ÿ

**ç”Ÿæ€æ‰©å±•ç›®æ ‡**
- **ç¤¾åŒºè´¡çŒ®**ï¼šå»ºç«‹æ´»è·ƒçš„ç¤¾åŒºï¼Œæ”¯æŒç”¨æˆ·è´¡çŒ®æ¢é’ˆé…ç½®
- **å·¥å…·é›†æˆ**ï¼šä¸ä¸»æµå¼€å‘å·¥å…·å’Œç›‘æ§ç³»ç»Ÿé›†æˆ
- **æ ‡å‡†å…¼å®¹**ï¼šå…¼å®¹OpenTracingç­‰è¡Œä¸šæ ‡å‡†
- **äº‘åŸç”Ÿæ”¯æŒ**ï¼šæ”¯æŒå®¹å™¨åŒ–å’Œäº‘åŸç”Ÿç¯å¢ƒéƒ¨ç½²

### 2.5 ç›®æ ‡ç”¨æˆ·

- **Javaå¼€å‘è€…**ï¼šéœ€è¦å¿«é€Ÿç†è§£å’Œè°ƒè¯•å¤æ‚çš„ä¸šåŠ¡é€»è¾‘
- **ç³»ç»Ÿæ¶æ„å¸ˆ**ï¼šéœ€è¦äº†è§£ç³»ç»Ÿçš„å®é™…è¿è¡Œæƒ…å†µå’Œæ€§èƒ½ç“¶é¢ˆ
- **è¿ç»´å·¥ç¨‹å¸ˆ**ï¼šéœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜
- **æµ‹è¯•å·¥ç¨‹å¸ˆ**ï¼šéœ€è¦éªŒè¯ç³»ç»ŸåŠŸèƒ½å’Œæ€§èƒ½æ˜¯å¦ç¬¦åˆé¢„æœŸ
- **é—®é¢˜æ’æŸ¥è€…**ï¼šéœ€è¦åœ¨ä¸æ·±å…¥ä»£ç çš„æƒ…å†µä¸‹å¿«é€Ÿå®šä½é—®é¢˜
- **ä»£ç å®¡æŸ¥è€…**ï¼šéœ€è¦å¿«é€ŸæŒæ¡ç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶

### 2.6 æˆåŠŸæ ‡å‡†

**åŠŸèƒ½å®Œæ•´æ€§ï¼š**
- âœ… èƒ½å¤Ÿè·Ÿè¸ªå®Œæ•´çš„HTTPè¯·æ±‚ç”Ÿå‘½å‘¨æœŸï¼ˆä»æ¥æ”¶åˆ°å“åº”ï¼‰
- âœ… æ”¯æŒä¸»æµä¸­é—´ä»¶çš„è°ƒç”¨æ•è·ï¼ˆMySQL/PostgreSQLã€Redisã€Kafkaã€HTTPå®¢æˆ·ç«¯ï¼‰
- âœ… æä¾›çµæ´»çš„è¾“å‡ºæ ¼å¼ï¼ˆæ§åˆ¶å°æ ‘çŠ¶å›¾ã€JSONæ–‡ä»¶ã€è‡ªå®šä¹‰æ¨¡æ¿ï¼‰
- âœ… æ”¯æŒä¸šåŠ¡è·Ÿè¸ªIDå…³è”ï¼Œä¾¿äºåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª

**æ‰§è¡Œé€»è¾‘ç†è§£èƒ½åŠ›ï¼š**
- âœ… èƒ½å¤Ÿæ¸…æ™°å±•ç¤ºæ•°æ®çš„è¯»å–ã€å¤„ç†ã€å­˜å‚¨å®Œæ•´æµç¨‹
- âœ… è‡ªåŠ¨è¯†åˆ«å’Œæ ‡è®°å…³é”®æ‰§è¡Œæ­¥éª¤å’Œæ•°æ®æ“ä½œ
- âœ… æä¾›æ¸…æ™°çš„è°ƒç”¨æ‘˜è¦å’Œæµç¨‹æ¦‚è§ˆ
- âœ… æ”¯æŒå¿«é€Ÿè¯†åˆ«å¼‚å¸¸è·¯å¾„å’Œæ€§èƒ½ç“¶é¢ˆç‚¹

**å‚æ•°å’Œç»“æœè®°å½•èƒ½åŠ›ï¼š**
- âœ… å®Œæ•´è®°å½•æ‰€æœ‰å…³é”®æ“ä½œçš„è¾“å…¥å‚æ•°å’Œæ‰§è¡Œç»“æœ
- âœ… æ”¯æŒå¤æ‚å¯¹è±¡çš„ç»“æ„åŒ–æ˜¾ç¤ºå’Œæ•°æ®æˆªæ–­
- âœ… æä¾›æ•æ„Ÿä¿¡æ¯è„±æ•å’Œå®‰å…¨ä¿æŠ¤æœºåˆ¶
- âœ… æ”¯æŒå¤šçº§è¯¦ç»†ç¨‹åº¦çš„æ•°æ®å±•ç¤ºæ§åˆ¶

**å€¼è¿‡æ»¤å’Œæ•°æ®è¿½è¸ªèƒ½åŠ›ï¼š**
- âœ… æ”¯æŒåŸºäºç‰¹å®šå€¼çš„æ™ºèƒ½è¿‡æ»¤å’ŒåŒ¹é…
- âœ… è‡ªåŠ¨æ£€æµ‹å’Œè¿½è¸ªæ•°æ®ä¿®æ”¹æ“ä½œ
- âœ… æä¾›å€¼åŒ¹é…æ—¶çš„è‡ªåŠ¨å †æ ˆæ•è·åŠŸèƒ½
- âœ… æ”¯æŒå¤æ‚çš„è¿‡æ»¤è¡¨è¾¾å¼å’Œç»„åˆæ¡ä»¶

**åŠŸèƒ½å¼ºå¤§æ€§ï¼š**
- âœ… æ”¯æŒæ·±åº¦åµŒå¥—çš„è°ƒç”¨é“¾è·Ÿè¸ªï¼Œæ— å±‚çº§é™åˆ¶
- âœ… æ”¯æŒå¤æ‚çš„è¿‡æ»¤å’ŒåŒ¹é…æ¡ä»¶ï¼ˆURLæ¨¡å¼ã€HTTPæ–¹æ³•ã€è¯·æ±‚å¤´ç­‰ï¼‰
- âœ… æ”¯æŒå®æ—¶å’Œæ‰¹é‡è·Ÿè¸ªæ¨¡å¼
- âœ… æ”¯æŒè‡ªå®šä¹‰æ¢é’ˆæ‰©å±•å’Œç¬¬ä¸‰æ–¹é›†æˆ

**é…ç½®é©±åŠ¨æ‰©å±•èƒ½åŠ›ï¼š**
- âœ… æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶å®šä¹‰æ–°æ¢é’ˆï¼Œæ— éœ€ç¼–å†™ä»£ç 
- âœ… æä¾›çµæ´»çš„ç±»å’Œæ–¹æ³•åŒ¹é…è§„åˆ™é…ç½®
- âœ… æ”¯æŒé…ç½®æ–‡ä»¶çš„çƒ­æ›´æ–°å’ŒåŠ¨æ€åŠ è½½
- âœ… æä¾›ä¸°å¯Œçš„é…ç½®æ¨¡æ¿å’Œå‘å¯¼å·¥å…·
- âœ… æ”¯æŒjaråŒ…ç‰ˆæœ¬çš„ç²¾ç¡®æ§åˆ¶å’Œè‡ªåŠ¨æ£€æµ‹
- âœ… æ”¯æŒå¤šç‰ˆæœ¬jaråŒ…çš„å·®å¼‚åŒ–é…ç½®ç®¡ç†

**å†…ç½®åœºæ™¯é…ç½®èƒ½åŠ›ï¼š**
- âœ… æä¾›å¸¸è§é—®é¢˜åœºæ™¯çš„é¢„è®¾é…ç½®æ¨¡æ¿
- âœ… æ”¯æŒåœºæ™¯çš„å‚æ•°åŒ–å’Œå¿«é€Ÿåº”ç”¨
- âœ… æ”¯æŒè‡ªå®šä¹‰åœºæ™¯çš„ä¿å­˜å’Œç®¡ç†
- âœ… æä¾›åœºæ™¯ç»„åˆå’Œæœ€ä½³å®è·µæŒ‡å¯¼

**è¯·æ±‚å›æ”¾èƒ½åŠ›ï¼š**
- âœ… æ”¯æŒå®Œæ•´çš„è¯·æ±‚å›æ”¾æ•°æ®è®°å½•å’Œä¿å­˜
- âœ… æ”¯æŒå¤šç§å›æ”¾æ¨¡å¼ï¼ˆç²¾ç¡®ã€å‚æ•°åŒ–ã€æ‰¹é‡ã€å‹åŠ›ï¼‰
- âœ… æä¾›å›æ”¾ç»“æœå¯¹æ¯”å’Œå·®å¼‚åˆ†æåŠŸèƒ½
- âœ… æ”¯æŒå›æ”¾æ–‡ä»¶çš„ç®¡ç†ã€å¯¼å…¥å¯¼å‡ºåŠŸèƒ½

**è·Ÿè¸ªç»“æœä¿å­˜å’Œå¯¹æ¯”èƒ½åŠ›ï¼š**
- âœ… æ”¯æŒè·Ÿè¸ªç»“æœçš„å¤šæ ¼å¼ä¿å­˜ï¼ˆJSONã€XMLã€æ–‡æœ¬ï¼‰
- âœ… æä¾›è·Ÿè¸ªç»“æœçš„å¯¹æ¯”åˆ†æå’Œå·®å¼‚æ£€æµ‹åŠŸèƒ½
- âœ… æ”¯æŒå†å²åŸºçº¿å¯¹æ¯”å’Œæ€§èƒ½å›å½’æ£€æµ‹
- âœ… æä¾›è·Ÿè¸ªç»“æœçš„æœç´¢ã€åˆ†ç±»å’Œç®¡ç†åŠŸèƒ½

**æ˜“ç”¨æ€§è¦æ±‚ï¼š**
- âœ… å­¦ä¹ æˆæœ¬ä½ï¼Œæ–°ç”¨æˆ·5åˆ†é’Ÿå†…å®Œæˆé¦–æ¬¡æˆåŠŸè·Ÿè¸ª
- âœ… é…ç½®ç®€å•ï¼Œæ”¯æŒä¸€é”®å¯ç”¨å’Œæ™ºèƒ½é»˜è®¤é…ç½®
- âœ… è¾“å‡ºç›´è§‚ï¼Œéæ€§èƒ½ä¸“å®¶ä¹Ÿèƒ½å¿«é€Ÿè¯†åˆ«é—®é¢˜ç‚¹
- âœ… é”™è¯¯æç¤ºå‹å¥½ï¼Œé…ç½®é”™è¯¯æ—¶æœ‰æ˜ç¡®çš„ä¿®å¤å»ºè®®

### 2.5 é¢„æœŸæ”¶ç›Š

**å®šé‡æ”¶ç›Šï¼š**
- ä»£ç ç†è§£æ—¶é—´å‡å°‘ 80%ï¼ˆä»å¹³å‡1å‘¨é™è‡³1-2å¤©ï¼‰
- é—®é¢˜å®šä½æ—¶é—´å‡å°‘ 70%ï¼ˆä»å¹³å‡2å°æ—¶é™è‡³30åˆ†é’Ÿï¼‰
- ä»£ç ç†è§£æ•ˆç‡æå‡ 5å€ï¼ˆæ— éœ€æ·±å…¥é˜…è¯»ä»£ç å³å¯ç†è§£æµç¨‹ï¼‰
- ç³»ç»Ÿç»´æŠ¤æ•ˆç‡æå‡ 3å€

**å®šæ€§æ”¶ç›Šï¼š**
- é™ä½ä»£ç ç†è§£éš¾åº¦ï¼Œå¿«é€ŸæŒæ¡ç³»ç»Ÿè¿è¡Œæœºåˆ¶
- æå‡å›¢é˜Ÿå¯¹å¤æ‚ç³»ç»Ÿçš„ç†è§£å’Œç»´æŠ¤èƒ½åŠ›
- å‡å°‘å› ä¸ç†Ÿæ‚‰ä»£ç é€»è¾‘å¯¼è‡´çš„å¼€å‘é”™è¯¯
- å»ºç«‹å¯è§†åŒ–çš„ç³»ç»Ÿæ–‡æ¡£ï¼Œä¾¿äºçŸ¥è¯†ä¼ æ‰¿

### 2.6 åŠŸèƒ½æ¦‚è¿°

æ–°å¢ `trace-flow` å‘½ä»¤ï¼ˆåˆ«å `tf`ï¼‰ï¼Œå®ç°å¯¹ HTTP è¯·æ±‚çš„å®Œæ•´è·Ÿè¸ªã€‚é€šè¿‡å¯æ’æ‹”çš„æ¢é’ˆç³»ç»Ÿæ•è·æ•°æ®åº“ã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰å…³é”®ç»„ä»¶çš„è°ƒç”¨ä¿¡æ¯ï¼Œå¹¶æä¾›çµæ´»çš„è¾“å‡ºå’Œé…ç½®ç®¡ç†èƒ½åŠ›ã€‚

**æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§ï¼š**
- **é…ç½®é©±åŠ¨**ï¼šæ‰€æœ‰æ¢é’ˆé€šè¿‡é…ç½®æ–‡ä»¶å®šä¹‰ï¼Œæ”¯æŒçƒ­æ›´æ–°å’ŒåŠ¨æ€åŠ è½½
- **ç‰ˆæœ¬é€‚é…**ï¼šè‡ªåŠ¨é€‚é…ä¸åŒç‰ˆæœ¬çš„jaråŒ…ï¼Œç¡®ä¿å…¼å®¹æ€§
- **åˆ†å±‚é…ç½®**ï¼šæ”¯æŒç³»ç»Ÿçº§ã€ç”¨æˆ·çº§ã€é¡¹ç›®çº§çš„é…ç½®ç®¡ç†
- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒç¬¬ä¸‰æ–¹æ¢é’ˆè´¡çŒ®å’Œè‡ªå®šä¹‰æ¢é’ˆå¼€å‘

## 3. ç³»ç»Ÿæ¶æ„è®¾è®¡

### 3.1 æ•´ä½“æ¶æ„

ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š

- **å‘½ä»¤å±‚**ï¼šæä¾›ç”¨æˆ·äº¤äº’æ¥å£ï¼ˆtrace-flowã€replayã€trace-diffï¼‰
- **é…ç½®å±‚**ï¼šç»Ÿä¸€çš„é…ç½®ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šå±‚çº§é…ç½®å’ŒåŒå‘åŒæ­¥
- **æ¢é’ˆå±‚**ï¼šå¯æ’æ‹”çš„æ¢é’ˆç³»ç»Ÿï¼Œæ”¯æŒé…ç½®é©±åŠ¨çš„æ¢é’ˆå®šä¹‰
- **è·Ÿè¸ªå±‚**ï¼šæ ¸å¿ƒè·Ÿè¸ªå¼•æ“ï¼Œè´Ÿè´£æ•°æ®æ”¶é›†å’Œå¤„ç†
- **è¾“å‡ºå±‚**ï¼šå¤šæ ¼å¼è¾“å‡ºæ”¯æŒï¼ŒåŒ…æ‹¬æ§åˆ¶å°ã€æ–‡ä»¶ã€è‡ªå®šä¹‰æ¨¡æ¿
- **å­˜å‚¨å±‚**ï¼šè·Ÿè¸ªç»“æœå’Œå›æ”¾æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨

### 3.2 æ ¸å¿ƒè®¾è®¡åŸåˆ™

- **é…ç½®é©±åŠ¨**ï¼šæ‰€æœ‰åŠŸèƒ½é€šè¿‡é…ç½®æ–‡ä»¶å®šä¹‰ï¼Œé¿å…ç¡¬ç¼–ç ï¼Œæ”¯æŒç‰ˆæœ¬ç²¾ç¡®æ§åˆ¶
- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒæ’ä»¶åŒ–æ‰©å±•ï¼Œä¾¿äºæ·»åŠ æ–°çš„æ¢é’ˆå’ŒåŠŸèƒ½
- **éä¾µå…¥æ€§**ï¼šæ— éœ€ä¿®æ”¹åº”ç”¨ä»£ç å³å¯å®ç°è·Ÿè¸ª
- **é«˜æ€§èƒ½**ï¼šæœ€å°åŒ–å¯¹ç›®æ ‡åº”ç”¨çš„æ€§èƒ½å½±å“
- **æ˜“ç”¨æ€§**ï¼šæä¾›ä¸°å¯Œçš„å†…ç½®åœºæ™¯å’Œæ¨¡æ¿ï¼Œé™ä½ä½¿ç”¨é—¨æ§›
- **ç‰ˆæœ¬å…¼å®¹**ï¼šæ™ºèƒ½æ£€æµ‹jaråŒ…ç‰ˆæœ¬ï¼Œç¡®ä¿æ¢é’ˆé…ç½®çš„å‡†ç¡®æ€§å’Œå…¼å®¹æ€§
- **çƒ­æ›´æ–°**ï¼šæ”¯æŒé…ç½®æ–‡ä»¶çš„å®æ—¶ç›‘æ§å’ŒåŠ¨æ€åŠ è½½ï¼Œæ— éœ€é‡å¯åº”ç”¨

## 4. åŠŸèƒ½æ€§éœ€æ±‚

### 4.1 trace-flow å‘½ä»¤æ ¸å¿ƒåŠŸèƒ½

#### 4.1.1 åŸºæœ¬è¦æ±‚

- **FR-0**: `trace-flow` å‘½ä»¤å¿…é¡»æä¾›ä¸€ä¸ªç®€çŸ­çš„åˆ«å `tf`ï¼Œä¸¤è€…åŠŸèƒ½å®Œå…¨ç­‰ä»·ã€‚

#### 4.1.2 æ‰§è¡Œæµç¨‹è·Ÿè¸ª

- **FR-1**: å‘½ä»¤å¿…é¡»èƒ½å¤Ÿè·Ÿè¸ª Java åº”ç”¨çš„å®Œæ•´æ‰§è¡Œæµç¨‹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š
    - **HTTPè¯·æ±‚è·Ÿè¸ª**ï¼šè·Ÿè¸ªHTTPè¯·æ±‚çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ
        - è¯·æ±‚æ¥æ”¶æ—¶é—´ï¼šè¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨çš„æ—¶é—´æˆ³
        - é˜Ÿåˆ—ç­‰å¾…æ—¶é—´ï¼šè¯·æ±‚åœ¨ Servlet å®¹å™¨çº¿ç¨‹æ± é˜Ÿåˆ—ä¸­çš„ç­‰å¾…æ—¶é—´
        - å¤„ç†å¼€å§‹æ—¶é—´ï¼šå®é™…å¼€å§‹å¤„ç†è¯·æ±‚çš„æ—¶é—´æˆ³
        - å¤„ç†ç»“æŸæ—¶é—´ï¼šè¯·æ±‚å¤„ç†å®Œæˆçš„æ—¶é—´æˆ³
        - å“åº”å‘é€æ—¶é—´ï¼šå“åº”æ•°æ®å‘é€å®Œæˆçš„æ—¶é—´æˆ³
    - **æ–¹æ³•è°ƒç”¨è·Ÿè¸ª**ï¼šè·Ÿè¸ªä»»æ„Javaæ–¹æ³•çš„è°ƒç”¨é“¾è·¯å’Œæ‰§è¡Œè¿‡ç¨‹
    - **ç»„ä»¶äº¤äº’è·Ÿè¸ª**ï¼šè·Ÿè¸ªå„ç§ç»„ä»¶ï¼ˆæ•°æ®åº“ã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰ä¹‹é—´çš„äº¤äº’

#### 4.1.3 è·Ÿè¸ªç›®æ ‡åŒ¹é…

- **FR-2**: å‘½ä»¤å¿…é¡»æ”¯æŒå¤šç§è·Ÿè¸ªç›®æ ‡çš„åŒ¹é…æ–¹å¼ï¼š
    - **URLæ¨¡å¼åŒ¹é…**ï¼šåŸºäº URL æ¨¡å¼ (ä¾‹å¦‚ï¼ŒAnt é£æ ¼çš„ `/api/**` æˆ–æ­£åˆ™è¡¨è¾¾å¼) æ¥åŒ¹é…ç‰¹å®šçš„ HTTP è¯·æ±‚
    - **æ–¹æ³•åŒ¹é…**ï¼šåŸºäºç±»åå’Œæ–¹æ³•ååŒ¹é…ç‰¹å®šçš„Javaæ–¹æ³•è°ƒç”¨
    - **æ³¨è§£åŒ¹é…**ï¼šåŸºäºæ³¨è§£åŒ¹é…æ ‡æ³¨äº†ç‰¹å®šæ³¨è§£çš„æ–¹æ³•
    - **åŒ…è·¯å¾„åŒ¹é…**ï¼šåŸºäºåŒ…è·¯å¾„åŒ¹é…ç‰¹å®šåŒ…ä¸‹çš„æ‰€æœ‰æ–¹æ³•è°ƒç”¨
- **FR-3**: å‘½ä»¤å¿…é¡»èƒ½å¤ŸæŒ‰ HTTP æ–¹æ³• (ä¾‹å¦‚ `GET`, `POST`) æˆ–æ–¹æ³•ç­¾ååŒ¹é…è·Ÿè¸ªç›®æ ‡ã€‚
- **FR-4**: å¦‚æœæœªæä¾›åŒ¹é…æ¡ä»¶ï¼Œå‘½ä»¤å¿…é¡»è·Ÿè¸ªè¿›å…¥ç³»ç»Ÿçš„ä¸‹ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„è°ƒç”¨ã€‚
- **FR-5**: å‘½ä»¤å¿…é¡»æ”¯æŒä¸€ä¸ªè®¡æ•°å‚æ•°ï¼Œä»¥è¿ç»­è·Ÿè¸ª N ä¸ªæ»¡è¶³æ¡ä»¶çš„è°ƒç”¨ã€‚

#### 4.1.4 å€¼è¿‡æ»¤å’Œæ•°æ®è¿½è¸ª

- **FR-5.1**: å¿…é¡»æ”¯æŒåŸºäºç‰¹å®šå€¼çš„è¿‡æ»¤åŠŸèƒ½ï¼š
    - **å‚æ•°å€¼è¿‡æ»¤**ï¼šæ ¹æ®æŒ‡å®šçš„å€¼è¿‡æ»¤åŒ…å«è¯¥å€¼çš„æ‰€æœ‰æ“ä½œ
    - **å¤šå€¼è¿‡æ»¤**ï¼šæ”¯æŒåŒæ—¶è¿‡æ»¤å¤šä¸ªå€¼ï¼ˆå¦‚å¤šä¸ªç”¨æˆ·IDï¼‰
    - **æ¨¡ç³ŠåŒ¹é…**ï¼šæ”¯æŒé€šé…ç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
    - **ç±»å‹æ™ºèƒ½åŒ¹é…**ï¼šè‡ªåŠ¨é€‚é…ä¸åŒæ•°æ®ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡å±æ€§ï¼‰
- **FR-5.2**: å¿…é¡»æä¾›æ•°æ®ä¿®æ”¹è¿½è¸ªåŠŸèƒ½ï¼š
    - **å†™æ“ä½œæ£€æµ‹**ï¼šè‡ªåŠ¨è¯†åˆ«å¯èƒ½ä¿®æ”¹æ•°æ®çš„æ“ä½œï¼ˆINSERTã€UPDATEã€DELETEç­‰ï¼‰
    - **å‚æ•°æ·±åº¦æ‰«æ**ï¼šæ‰«ææ–¹æ³•å‚æ•°ã€SQLå‚æ•°ã€HTTPè¯·æ±‚ä½“ä¸­çš„ç›®æ ‡å€¼
    - **è°ƒç”¨é“¾å…³è”**ï¼šæ˜¾ç¤ºåŒ…å«ç›®æ ‡å€¼çš„å®Œæ•´è°ƒç”¨é“¾è·¯
    - **å †æ ˆè‡ªåŠ¨æ•è·**ï¼šå½“æ£€æµ‹åˆ°ç›®æ ‡å€¼æ—¶è‡ªåŠ¨æ•è·çº¿ç¨‹å †æ ˆ
- **FR-5.3**: å¿…é¡»æ”¯æŒçµæ´»çš„è¿‡æ»¤è¡¨è¾¾å¼ï¼š
    - **ç®€å•å€¼åŒ¹é…**ï¼š`--filter-value userId=12345`
    - **å¤šå­—æ®µåŒ¹é…**ï¼š`--filter-value "userId=12345 OR email=user@example.com"`
    - **æ·±åº¦å¯¹è±¡åŒ¹é…**ï¼š`--filter-value "user.id=12345"`
    - **SQLå‚æ•°åŒ¹é…**ï¼š`--filter-value "sql.params contains 12345"`
    - **ç»„åˆæ¡ä»¶**ï¼šæ”¯æŒANDã€ORã€NOTç­‰é€»è¾‘ç»„åˆ

### 4.2 æ¢é’ˆç³»ç»Ÿ **ã€æ ¸å¿ƒåŸºç¡€æ¶æ„ã€‘**

#### 4.2.0 æ¢é’ˆç³»ç»Ÿæ ¸å¿ƒåŸåˆ™

- **FR-6**: å‘½ä»¤å¿…é¡»èƒ½å¤Ÿé€šè¿‡å¯ç”¨ä¸åŒçš„ **æ¢é’ˆ (Probe)** æ¥æ•è·ç‰¹å®šç»„ä»¶çš„è°ƒç”¨ã€‚æ‰€æœ‰æ¢é’ˆå¿…é¡»é€šè¿‡é…ç½®æ–‡ä»¶å®šä¹‰ï¼Œç³»ç»Ÿä¸åº”ç¡¬ç¼–ç ä»»ä½•æ¢é’ˆå®ç°ã€‚
- **FR-7**: ç”¨æˆ·å¿…é¡»èƒ½é€šè¿‡å‚æ•° (ä¾‹å¦‚ `--probes database-probe,cache-probe`) æ¥é€‰æ‹©å’Œç»„åˆæ¢é’ˆã€‚é»˜è®¤å¯ç”¨çš„æ¢é’ˆå¿…é¡»é€šè¿‡é…ç½®æ–‡ä»¶å®šä¹‰ã€‚
- **FR-8**: ç³»ç»Ÿå¿…é¡»æ˜¯å¯æ‰©å±•çš„ï¼Œä»¥ä¾¿å°†æ¥å¯ä»¥æ–¹ä¾¿åœ°æ·»åŠ æ–°çš„æ¢é’ˆ (ä¾‹å¦‚ `dubbo-probe`, `mongodb-probe`, `elasticsearch-probe`, `grpc-probe`)ã€‚
- **FR-8.1**: æ¢é’ˆç³»ç»Ÿå¿…é¡»æ”¯æŒæ’ä»¶åŒ–æ¶æ„ï¼Œå…è®¸ç¬¬ä¸‰æ–¹å¼€å‘è€…è´¡çŒ®æ¢é’ˆã€‚
- **FR-8.2**: å¿…é¡»æä¾›æ¢é’ˆå¼€å‘çš„æ ‡å‡†æ¥å£å’Œæ–‡æ¡£ï¼ŒåŒ…æ‹¬ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€æ•°æ®æ”¶é›†ã€é”™è¯¯å¤„ç†ç­‰ã€‚
- **FR-8.3**: å¿…é¡»æ”¯æŒæ¢é’ˆçš„çƒ­æ’æ‹”ï¼Œæ— éœ€é‡å¯ Arthas å³å¯åŠ è½½æ–°æ¢é’ˆã€‚

#### 4.2.0.1 æ¢é’ˆé…ç½®æ–‡ä»¶æ ¸å¿ƒè¦æ±‚

- **FR-8.0.1**: æ¢é’ˆé…ç½®æ–‡ä»¶å¿…é¡»æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œæ‰€æœ‰æ¢é’ˆè¡Œä¸ºéƒ½é€šè¿‡é…ç½®æ–‡ä»¶æ§åˆ¶ï¼š
    - **é›¶ç¡¬ç¼–ç åŸåˆ™**ï¼šç³»ç»Ÿä»£ç ä¸­ä¸å¾—ç¡¬ç¼–ç ä»»ä½•å…·ä½“çš„ç±»åã€æ–¹æ³•åã€jaråŒ…ä¿¡æ¯
    - **å®Œå…¨é…ç½®é©±åŠ¨**ï¼šæ‰€æœ‰æ¢é’ˆçš„ç›®æ ‡ç±»ã€æ–¹æ³•ã€å‚æ•°æå–ã€æ•°æ®å¤„ç†éƒ½é€šè¿‡é…ç½®å®šä¹‰
    - **è¿è¡Œæ—¶å¯å˜**ï¼šæ¢é’ˆè¡Œä¸ºå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶åœ¨è¿è¡Œæ—¶æ”¹å˜ï¼Œæ— éœ€é‡æ–°ç¼–è¯‘
    - **å£°æ˜å¼å®šä¹‰**ï¼šæ¢é’ˆé…ç½®ä½¿ç”¨å£°æ˜å¼è¯­æ³•ï¼Œæè¿°"åšä»€ä¹ˆ"è€Œä¸æ˜¯"æ€ä¹ˆåš"
- **FR-8.0.2**: æ¢é’ˆé…ç½®æ–‡ä»¶å¿…é¡»æ”¯æŒå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š
    - **é…ç½®éªŒè¯**ï¼šåŠ è½½å‰å¿…é¡»éªŒè¯é…ç½®æ–‡ä»¶çš„è¯­æ³•å’Œè¯­ä¹‰æ­£ç¡®æ€§
    - **ä¾èµ–æ£€æŸ¥**ï¼šéªŒè¯é…ç½®ä¸­å¼•ç”¨çš„ç±»ã€æ–¹æ³•ã€jaråŒ…æ˜¯å¦å­˜åœ¨
    - **å†²çªæ£€æµ‹**ï¼šæ£€æµ‹å¤šä¸ªæ¢é’ˆé…ç½®ä¹‹é—´çš„å†²çªå’Œé‡å¤
    - **æ€§èƒ½è¯„ä¼°**ï¼šè¯„ä¼°é…ç½®å¯¹ç³»ç»Ÿæ€§èƒ½çš„æ½œåœ¨å½±å“
    - **å®‰å…¨æ£€æŸ¥**ï¼šç¡®ä¿é…ç½®ä¸ä¼šè®¿é—®æ•æ„Ÿä¿¡æ¯æˆ–æ‰§è¡Œå±é™©æ“ä½œ

#### 4.2.1 ç»Ÿä¸€æ¢é’ˆé…ç½®æŠ½è±¡æ¨¡å‹ **ã€æœ€é«˜ä¼˜å…ˆçº§ã€‘**

##### 4.2.1.1 ç»Ÿä¸€é…ç½®æ¨¡å‹è®¾è®¡åŸåˆ™

- **FR-8.7**: å¿…é¡»å»ºç«‹ç»Ÿä¸€çš„æ¢é’ˆé…ç½®æŠ½è±¡æ¨¡å‹ï¼Œæ”¯æŒæ‰€æœ‰åœºæ™¯çš„æ•°æ®é‡‡é›†ï¼š
    - **ç»Ÿä¸€æ ¼å¼**ï¼šæ‰€æœ‰æ¢é’ˆä½¿ç”¨ç›¸åŒçš„é…ç½®ç»“æ„å’Œè¯­æ³•è§„èŒƒ
    - **åœºæ™¯æ— å…³**ï¼šé…ç½®æ¨¡å‹ä¸å…·ä½“ç›‘æ§åœºæ™¯è§£è€¦ï¼Œé€šè¿‡é…ç½®é€‚é…ä¸åŒåœºæ™¯
    - **å®Œå…¨æŠ½è±¡**ï¼šå°†ç›®æ ‡åŒ¹é…ã€æ•°æ®æ•è·ã€æ•°æ®å¤„ç†ã€è¾“å‡ºç­‰æŠ½è±¡ä¸ºé€šç”¨æ¨¡å‹
    - **è¡¨è¾¾å¼é©±åŠ¨**ï¼šä½¿ç”¨ç»Ÿä¸€çš„è¡¨è¾¾å¼è¯­è¨€æè¿°æ•°æ®æå–å’Œå¤„ç†é€»è¾‘
    - **å¯æ‰©å±•æ€§**ï¼šæ–°å¢ç›‘æ§åœºæ™¯æ— éœ€ä¿®æ”¹é…ç½®æ ¼å¼ï¼Œåªéœ€æä¾›æ–°çš„é…ç½®å®ä¾‹

##### 4.2.1.2 ç»Ÿä¸€é…ç½®æ–‡ä»¶ç»“æ„

- **FR-8.7.1**: æ‰€æœ‰æ¢é’ˆé…ç½®æ–‡ä»¶å¿…é¡»éµå¾ªç»Ÿä¸€çš„é¡¶å±‚ç»“æ„ï¼š
```json
{
  "version": "1.0",                    // å¿…å¡«ï¼šé…ç½®ç‰ˆæœ¬
  "metadata": {                        // å¿…å¡«ï¼šæ¢é’ˆå…ƒæ•°æ®
    "name": "æ¢é’ˆåç§°",
    "description": "æ¢é’ˆæè¿°",
    "category": "æ¢é’ˆåˆ†ç±»",
    "author": "ä½œè€…",
    "createdAt": "åˆ›å»ºæ—¶é—´",
    "tags": ["æ ‡ç­¾æ•°ç»„"]
  },
  "probe": {                           // å¿…å¡«ï¼šæ¢é’ˆæ ¸å¿ƒå®šä¹‰
    "enabled": true,                   // æ˜¯å¦å¯ç”¨
    "priority": 100,                   // ä¼˜å…ˆçº§
    "scope": "method|class|package",   // ç›‘æ§èŒƒå›´
    "lifecycle": "before|after|around", // ç”Ÿå‘½å‘¨æœŸ
    "targets": [...],                  // ç›®æ ‡å®šä¹‰ï¼ˆç»Ÿä¸€æ ¼å¼ï¼‰
    "capture": {...},                  // æ•°æ®æ•è·ï¼ˆç»Ÿä¸€æ ¼å¼ï¼‰
    "processing": {...},               // æ•°æ®å¤„ç†ï¼ˆç»Ÿä¸€æ ¼å¼ï¼‰
    "output": {...}                    // è¾“å‡ºé…ç½®ï¼ˆç»Ÿä¸€æ ¼å¼ï¼‰
  },
  "dependencies": {...},               // å¯é€‰ï¼šä¾èµ–å£°æ˜
  "performance": {...},                // å¯é€‰ï¼šæ€§èƒ½é…ç½®
  "security": {...}                    // å¯é€‰ï¼šå®‰å…¨é…ç½®
}
```

##### 4.2.1.3 ç»Ÿä¸€ç›®æ ‡åŒ¹é…æ¨¡å‹

- **FR-8.7.2**: ç›®æ ‡åŒ¹é…å¿…é¡»ä½¿ç”¨ç»Ÿä¸€çš„matcheræ¨¡å‹ï¼Œæ”¯æŒæ‰€æœ‰ç›‘æ§åœºæ™¯ï¼š
```json
{
  "targets": [
    {
      "id": "target-unique-id",
      "name": "ç›®æ ‡åç§°",
      "type": "method|constructor|field|annotation",
      "matcher": {
        "strategy": "exact|wildcard|regex|annotation|inheritance|interface",
        "class": {
          "name": "ç±»åæˆ–æ¨¡å¼",
          "package": "åŒ…åæˆ–æ¨¡å¼",
          "annotation": "æ³¨è§£åç§°",
          "implements": "æ¥å£åç§°",
          "extends": "çˆ¶ç±»åç§°",
          "modifiers": ["public", "!abstract"]
        },
        "method": {
          "name": "æ–¹æ³•åæˆ–æ¨¡å¼",
          "signature": {
            "parameterTypes": ["å‚æ•°ç±»å‹æ•°ç»„"],
            "returnType": "è¿”å›ç±»å‹",
            "exceptions": ["å¼‚å¸¸ç±»å‹æ•°ç»„"]
          },
          "annotation": "æ–¹æ³•æ³¨è§£",
          "modifiers": ["public", "!static"]
        }
      },
      "versions": {
        "groupId": "Maven groupId",
        "artifactId": "Maven artifactId",
        "versionRange": "[1.0.0, 2.0.0)",
        "excludeVersions": ["æ’é™¤ç‰ˆæœ¬æ•°ç»„"]
      }
    }
  ]
}
```

##### 4.2.1.4 ç»Ÿä¸€æ•°æ®æ•è·æ¨¡å‹

- **FR-8.7.3**: æ•°æ®æ•è·å¿…é¡»ä½¿ç”¨ç»Ÿä¸€çš„captureæ¨¡å‹ï¼Œé€‚é…æ‰€æœ‰æ•°æ®ç±»å‹ï¼š
```json
{
  "capture": {
    "scope": "local|global|thread|request",
    "timing": {
      "before": {"enabled": true, "timestamp": true},
      "after": {"enabled": true, "executionTime": true},
      "exception": {"enabled": true, "stackTrace": true}
    },
    "data": {
      "parameters": {
        "enabled": true,
        "strategy": "all|indexed|named|filtered",
        "indexes": [0, 1, 2],
        "depth": 3,
        "sizeLimit": 1024
      },
      "returnValue": {
        "enabled": true,
        "depth": 2,
        "sizeLimit": 2048
      },
      "context": {
        "enabled": true,
        "threadLocal": true,
        "requestAttributes": true
      }
    }
  }
}
```
##### 4.2.1.5 ç»Ÿä¸€æŒ‡æ ‡é©±åŠ¨æ¨¡å‹ **ã€æ ¸å¿ƒåˆ›æ–°ã€‘**

- **FR-8.7.4**: æ¢é’ˆé…ç½®å¿…é¡»ä»¥æŒ‡æ ‡ä¸ºé©±åŠ¨ï¼Œé€šè¿‡å®šä¹‰æŒ‡æ ‡å’Œè®¡ç®—è§„åˆ™å®ç°æ•°æ®æ”¶é›†ï¼š
```json
{
  "metrics": {
    "definitions": [
      {
        "id": "start-time",
        "name": "å¼€å§‹æ‰§è¡Œæ—¶é—´",
        "type": "timestamp",
        "source": "System.currentTimeMillis()",
        "capturePoint": "before",
        "unit": "milliseconds"
      },
      {
        "id": "end-time",
        "name": "ç»“æŸæ‰§è¡Œæ—¶é—´",
        "type": "timestamp",
        "source": "System.currentTimeMillis()",
        "capturePoint": "after",
        "unit": "milliseconds"
      },
      {
        "id": "execution-time",
        "name": "æ‰§è¡Œè€—æ—¶",
        "type": "computed",
        "formula": "metrics.endTime - metrics.startTime",
        "unit": "milliseconds",
        "description": "æ–¹æ³•æ‰§è¡Œçš„æ€»è€—æ—¶"
      },
      {
        "id": "request-url",
        "name": "è¯·æ±‚URL",
        "type": "string",
        "source": "args[0].getRequestURL().toString()",
        "capturePoint": "before"
      },
      {
        "id": "response-status",
        "name": "å“åº”çŠ¶æ€ç ",
        "type": "number",
        "source": "args[1].getStatus()",
        "capturePoint": "after"
      }
    ],
    "aggregations": [
      {
        "id": "avg-execution-time",
        "name": "å¹³å‡æ‰§è¡Œæ—¶é—´",
        "type": "average",
        "sourceMetric": "execution-time",
        "window": "1m",
        "groupBy": ["request-url"]
      },
      {
        "id": "error-rate",
        "name": "é”™è¯¯ç‡",
        "type": "percentage",
        "formula": "count(response-status >= 400) / count(*) * 100",
        "window": "1m"
      }
    ]
  }
}
```

##### 4.2.1.6 ç»Ÿä¸€æ•°æ®å¤„ç†æ¨¡å‹

- **FR-8.7.5**: æ•°æ®å¤„ç†å¿…é¡»æ”¯æŒæŒ‡æ ‡é©±åŠ¨çš„å¤„ç†æµç¨‹ï¼š
```json
{
  "processing": {
    "extractors": [
      {
        "id": "extractor-id",
        "name": "æå–å™¨åç§°",
        "type": "parameter|return|field|context|computed",
        "source": "æ•°æ®æºè¡¨è¾¾å¼",
        "target": "ç›®æ ‡å­—æ®µå",
        "dataType": "string|number|boolean|object|array",
        "processor": "å¤„ç†å™¨åç§°"
      }
    ],
    "transformers": [
      {
        "id": "transformer-id",
        "type": "format|mask|encrypt|compress",
        "source": "æºå­—æ®µ",
        "target": "ç›®æ ‡å­—æ®µ",
        "config": {"å¤„ç†å™¨é…ç½®": "å€¼"}
      }
    ],
    "filters": [
      {
        "id": "filter-id",
        "condition": "è¿‡æ»¤æ¡ä»¶è¡¨è¾¾å¼",
        "action": "include|exclude|tag|transform|alert",
        "priority": 100
      }
    ]
  }
}
```

##### 4.2.1.7 ç»Ÿä¸€è¡¨è¾¾å¼è¯­è¨€è§„èŒƒ

- **FR-8.7.6**: æ‰€æœ‰æ¢é’ˆå¿…é¡»ä½¿ç”¨ç»Ÿä¸€çš„è¡¨è¾¾å¼è¯­è¨€ï¼Œæ”¯æŒè·¨åœºæ™¯çš„æ•°æ®æå–å’ŒæŒ‡æ ‡è®¡ç®—ï¼š
    - **åŸºç¡€è¡¨è¾¾å¼**ï¼š
        - `this` - å½“å‰å¯¹è±¡å®ä¾‹
        - `args[0]` - æ–¹æ³•å‚æ•°ï¼ˆæŒ‰ç´¢å¼•ï¼‰
        - `args.userId` - æ–¹æ³•å‚æ•°ï¼ˆæŒ‰åç§°ï¼‰
        - `returnValue` - æ–¹æ³•è¿”å›å€¼
        - `exception` - æŠ›å‡ºçš„å¼‚å¸¸
        - `target` - ç›®æ ‡å¯¹è±¡
    - **å±æ€§è®¿é—®**ï¼š
        - `this.userId` - å¯¹è±¡å±æ€§è®¿é—®
        - `args[0].request.headers` - åµŒå¥—å±æ€§è®¿é—®
        - `returnValue.data.size()` - æ–¹æ³•è°ƒç”¨
    - **æ¡ä»¶è¡¨è¾¾å¼**ï¼š
        - `args[0] != null ? args[0].toString() : "null"` - ä¸‰å…ƒè¿ç®—ç¬¦
        - `returnValue instanceof List ? returnValue.size() : 0` - ç±»å‹æ£€æŸ¥
    - **å†…ç½®å‡½æ•°**ï¼š
        - `JSON.stringify(obj)` - JSONåºåˆ—åŒ–
        - `String.format("template", args)` - å­—ç¬¦ä¸²æ ¼å¼åŒ–
        - `MD5.hash(str)` - å“ˆå¸Œè®¡ç®—
        - `StringUtils.truncate(str, 100)` - å­—ç¬¦ä¸²æˆªæ–­

##### 4.2.1.5 åˆ†ç¦»å¼é…ç½®æ–‡ä»¶ç»“æ„

- **FR-8.7.6**: å¿…é¡»æä¾›åˆ†ç¦»å¼çš„æ¢é’ˆé…ç½®æ–‡ä»¶ç»“æ„ï¼Œæ¯ä¸ªæ¢é’ˆä½¿ç”¨ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼š
    - **HTTPæœåŠ¡æ¢é’ˆ**ï¼š`http-server-probe.json` - HTTPè¯·æ±‚æ¥æ”¶å’Œå¤„ç†çš„ç›‘æ§é…ç½®
    - **æ•°æ®åº“æ¢é’ˆ**ï¼š`database-probe.json` - JDBCç›¸å…³ç±»å’Œæ–¹æ³•çš„ç›‘æ§é…ç½®
    - **ç¼“å­˜æ¢é’ˆ**ï¼š`cache-probe.json` - Redisã€Memcachedç­‰ç¼“å­˜å®¢æˆ·ç«¯çš„ç›‘æ§é…ç½®
    - **æ¶ˆæ¯é˜Ÿåˆ—æ¢é’ˆ**ï¼š`messaging-probe.json` - Kafkaã€RabbitMQç­‰æ¶ˆæ¯ä¸­é—´ä»¶çš„ç›‘æ§é…ç½®
    - **HTTPå®¢æˆ·ç«¯æ¢é’ˆ**ï¼š`http-client-probe.json` - å„ç§HTTPå®¢æˆ·ç«¯åº“çš„ç›‘æ§é…ç½®
    - **æ–‡ä»¶æ“ä½œæ¢é’ˆ**ï¼š`file-operations-probe.json` - æ–‡ä»¶I/Oæ“ä½œçš„ç›‘æ§é…ç½®
    - **è‡ªå®šä¹‰æ¢é’ˆ**ï¼šç”¨æˆ·å¯ä»¥åˆ›å»ºè‡ªå·±çš„æ¢é’ˆé…ç½®æ–‡ä»¶ï¼Œå¦‚ `custom-business-probe.json`
- **FR-8.8**: å¿…é¡»æä¾›çµæ´»çš„åŒ¹é…è§„åˆ™é…ç½®ï¼š
    - **ç±»åŒ¹é…è§„åˆ™**ï¼šæ”¯æŒç²¾ç¡®åŒ¹é…ã€é€šé…ç¬¦åŒ¹é…ã€æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
    - **æ–¹æ³•åŒ¹é…è§„åˆ™**ï¼šæ”¯æŒæ–¹æ³•åã€å‚æ•°ç±»å‹ã€è¿”å›ç±»å‹ã€æ³¨è§£åŒ¹é…
    - **ç‰ˆæœ¬åŒ¹é…è§„åˆ™**ï¼šæ”¯æŒjaråŒ…ç‰ˆæœ¬çš„ç²¾ç¡®åŒ¹é…ã€èŒƒå›´åŒ¹é…ã€æ’é™¤åŒ¹é…
    - **æ¡ä»¶è¿‡æ»¤**ï¼šæ”¯æŒåŸºäºå‚æ•°å€¼ã€è¿”å›å€¼çš„æ¡ä»¶è¿‡æ»¤
    - **ç»„åˆè§„åˆ™**ï¼šæ”¯æŒANDã€ORã€NOTç­‰é€»è¾‘ç»„åˆ
- **FR-8.8.1**: å¿…é¡»æ”¯æŒjaråŒ…ç‰ˆæœ¬çš„ç²¾ç¡®æ§åˆ¶ï¼š
    - **ç‰ˆæœ¬èŒƒå›´æŒ‡å®š**ï¼šæ”¯æŒæŒ‡å®šjaråŒ…çš„ç‰ˆæœ¬èŒƒå›´ï¼ˆå¦‚ï¼š[1.0.0, 2.0.0)ï¼‰
    - **ç‰ˆæœ¬æ’é™¤**ï¼šæ”¯æŒæ’é™¤ç‰¹å®šç‰ˆæœ¬çš„jaråŒ…ï¼ˆå¦‚ï¼š!1.5.0ï¼‰
    - **ç‰ˆæœ¬æ£€æµ‹**ï¼šè¿è¡Œæ—¶è‡ªåŠ¨æ£€æµ‹jaråŒ…ç‰ˆæœ¬å¹¶åŒ¹é…ç›¸åº”çš„æ¢é’ˆé…ç½®
    - **ç‰ˆæœ¬å…¼å®¹æ€§è­¦å‘Š**ï¼šå½“jaråŒ…ç‰ˆæœ¬ä¸é…ç½®ä¸åŒ¹é…æ—¶æä¾›æ˜ç¡®çš„è­¦å‘Šä¿¡æ¯
    - **å¤šç‰ˆæœ¬æ”¯æŒ**ï¼šåŒä¸€ä¸ªæ¢é’ˆå¯ä»¥ä¸ºä¸åŒç‰ˆæœ¬çš„jaråŒ…æä¾›ä¸åŒçš„é…ç½®
- **FR-8.9**: å¿…é¡»æ”¯æŒé…ç½®æ–‡ä»¶çš„åŠ¨æ€åŠ è½½å’Œçƒ­æ›´æ–°ï¼š
    - **é…ç½®æ–‡ä»¶ç›‘æ§**ï¼šè‡ªåŠ¨ç›‘æ§é…ç½®æ–‡ä»¶å˜åŒ–
    - **çƒ­æ›´æ–°æœºåˆ¶**ï¼šé…ç½®å˜æ›´åè‡ªåŠ¨é‡æ–°åŠ è½½æ¢é’ˆ
    - **é…ç½®éªŒè¯**ï¼šåŠ è½½å‰éªŒè¯é…ç½®æ–‡ä»¶çš„æ­£ç¡®æ€§
    - **å›æ»šæœºåˆ¶**ï¼šé…ç½®é”™è¯¯æ—¶è‡ªåŠ¨å›æ»šåˆ°ä¸Šä¸€ä¸ªæœ‰æ•ˆé…ç½®

#### 4.2.2 æ¢é’ˆé…ç½®æ ¼å¼å’Œç¤ºä¾‹

#### 4.2.2 æ¢é’ˆé…ç½®æ–‡ä»¶æ ¼å¼æ ‡å‡† **ã€å¼ºåˆ¶è§„èŒƒã€‘**

##### 4.2.2.1 é…ç½®æ–‡ä»¶ç»“æ„è§„èŒƒ

- **FR-8.10**: å¿…é¡»æä¾›æ ‡å‡†çš„æ¢é’ˆé…ç½®æ ¼å¼ï¼Œå¼ºåˆ¶ä½¿ç”¨JSONæ ¼å¼ï¼š
    - **æ–‡ä»¶ç¼–ç **ï¼šå¿…é¡»ä½¿ç”¨UTF-8ç¼–ç 
    - **JSONæ ¼å¼**ï¼šä¸¥æ ¼éµå¾ªJSONè§„èŒƒï¼Œæ”¯æŒæ³¨é‡Šï¼ˆä½¿ç”¨JSON5æ‰©å±•ï¼‰
    - **ç¼©è¿›æ ¼å¼**ï¼šä½¿ç”¨2ä¸ªç©ºæ ¼ç¼©è¿›ï¼Œç¡®ä¿å¯è¯»æ€§
    - **å­—æ®µå‘½å**ï¼šä½¿ç”¨camelCaseå‘½åè§„èŒƒ
    - **å¿…å¡«å­—æ®µéªŒè¯**ï¼šæ‰€æœ‰å¿…å¡«å­—æ®µå¿…é¡»å­˜åœ¨ä¸”éç©º

- **FR-8.10.1**: æ¢é’ˆé…ç½®æ–‡ä»¶å¿…é¡»åŒ…å«ä»¥ä¸‹æ ‡å‡†ç»“æ„ï¼š
```json
{
  "version": "1.0",                    // å¿…å¡«ï¼šé…ç½®æ–‡ä»¶ç‰ˆæœ¬
  "metadata": {                        // å¿…å¡«ï¼šæ¢é’ˆå…ƒæ•°æ®
    "name": "æ¢é’ˆåç§°",
    "description": "æ¢é’ˆæè¿°",
    "category": "æ¢é’ˆåˆ†ç±»",
    "author": "ä½œè€…ä¿¡æ¯",
    "createdAt": "2025-01-11T10:00:00Z",
    "updatedAt": "2025-01-11T10:00:00Z",
    "tags": ["tag1", "tag2"]
  },
  "probe": {                           // å¿…å¡«ï¼šæ¢é’ˆå®šä¹‰
    "enabled": true,                   // å¿…å¡«ï¼šæ˜¯å¦å¯ç”¨
    "priority": 100,                   // å¯é€‰ï¼šä¼˜å…ˆçº§ï¼ˆæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼‰
    "targets": [...],                  // å¿…å¡«ï¼šç›®æ ‡å®šä¹‰æ•°ç»„
    "capture": {...},                  // å¿…å¡«ï¼šæ•°æ®æ•è·é…ç½®
    "format": {...},                   // å¿…å¡«ï¼šæ•°æ®æ ¼å¼åŒ–é…ç½®
    "filters": [...],                  // å¯é€‰ï¼šè¿‡æ»¤è§„åˆ™æ•°ç»„
    "conditions": {...}                // å¯é€‰ï¼šå¯ç”¨æ¡ä»¶
  },
  "dependencies": {                    // å¯é€‰ï¼šä¾èµ–å£°æ˜
    "requiredJars": [...],
    "optionalJars": [...],
    "conflictsWith": [...]
  },
  "performance": {                     // å¯é€‰ï¼šæ€§èƒ½é…ç½®
    "maxExecutionTime": 5000,
    "maxMemoryUsage": "10MB",
    "samplingRate": 1.0
  }
}
```

##### 4.2.2.2 ç›®æ ‡å®šä¹‰è¯¦ç»†è§„èŒƒ

- **FR-8.10.2**: targetsæ•°ç»„ä¸­çš„æ¯ä¸ªç›®æ ‡å¿…é¡»åŒ…å«å®Œæ•´çš„åŒ¹é…ä¿¡æ¯ï¼š
```json
{
  "name": "ç›®æ ‡åç§°",                   // å¿…å¡«ï¼šç›®æ ‡çš„å”¯ä¸€æ ‡è¯†
  "description": "ç›®æ ‡æè¿°",           // å¯é€‰ï¼šç›®æ ‡çš„è¯¦ç»†æè¿°
  "class": "com.example.UserService", // å¿…å¡«ï¼šç›®æ ‡ç±»åï¼ˆæ”¯æŒé€šé…ç¬¦å’Œæ­£åˆ™ï¼‰
  "classMatchType": "exact",          // å¿…å¡«ï¼šåŒ¹é…ç±»å‹ exact|wildcard|regex|annotation
  "methods": ["findById", "save"],    // å¿…å¡«ï¼šç›®æ ‡æ–¹æ³•åˆ—è¡¨
  "methodMatchType": "exact",         // å¿…å¡«ï¼šæ–¹æ³•åŒ¹é…ç±»å‹
  "methodSignature": {                // å¯é€‰ï¼šç²¾ç¡®æ–¹æ³•ç­¾å
    "parameterTypes": ["java.lang.Long"],
    "returnType": "com.example.User",
    "modifiers": ["public"],
    "annotations": ["@Transactional"]
  },
  "jarVersions": {                    // å¿…å¡«ï¼šjaråŒ…ç‰ˆæœ¬è¦æ±‚
    "groupId": "com.example",
    "artifactId": "user-service",
    "versionRange": "[1.0.0, 2.0.0)",
    "excludeVersions": ["1.2.0"]
  },
  "conditions": {                     // å¯é€‰ï¼šå¯ç”¨æ¡ä»¶
    "javaVersion": "[8,)",
    "osName": "!Windows",
    "systemProperty": "spring.profiles.active=prod"
  }
}
```

##### 4.2.2.3 æ•°æ®æ•è·é…ç½®è§„èŒƒ

- **FR-8.10.3**: captureé…ç½®å¿…é¡»ç²¾ç¡®å®šä¹‰æ•°æ®æ•è·è¡Œä¸ºï¼š
```json
{
  "parameters": {
    "enabled": true,                  // æ˜¯å¦æ•è·å‚æ•°
    "indexes": [0, 1, 2],            // æ•è·çš„å‚æ•°ç´¢å¼•ï¼Œnullè¡¨ç¤ºå…¨éƒ¨
    "names": ["userId", "request"],   // æ•è·çš„å‚æ•°åç§°
    "depth": 3,                      // å¯¹è±¡é€’å½’æ·±åº¦
    "sizeLimit": 1024,               // å•ä¸ªå‚æ•°å¤§å°é™åˆ¶ï¼ˆå­—èŠ‚ï¼‰
    "excludeTypes": ["java.lang.Class"] // æ’é™¤çš„å‚æ•°ç±»å‹
  },
  "returnValue": {
    "enabled": true,
    "depth": 2,
    "sizeLimit": 2048,
    "excludeNull": false             // æ˜¯å¦æ’é™¤nullè¿”å›å€¼
  },
  "exceptions": {
    "enabled": true,
    "types": ["java.sql.SQLException"], // åªæ•è·æŒ‡å®šç±»å‹å¼‚å¸¸
    "stackTrace": true,
    "stackDepth": 20,
    "causeChain": true               // æ˜¯å¦æ•è·å¼‚å¸¸é“¾
  },
  "executionTime": {
    "enabled": true,
    "unit": "milliseconds",          // æ—¶é—´å•ä½
    "precision": 3                   // ç²¾åº¦ï¼ˆå°æ•°ä½æ•°ï¼‰
  },
  "threadInfo": {
    "enabled": false,
    "captureThreadName": true,
    "captureThreadId": true,
    "captureThreadState": false
  }
}
```
##### 4.2.2.4 æ•°æ®æ ¼å¼åŒ–é…ç½®è§„èŒƒ

- **FR-8.10.4**: formaté…ç½®å¿…é¡»å®šä¹‰æ•°æ®çš„æ ¼å¼åŒ–å’Œæå–è§„åˆ™ï¼š
```json
{
  "operationType": "DATABASE",        // å¿…å¡«ï¼šæ“ä½œç±»å‹æ ‡è¯†
  "displayName": "æ•°æ®åº“æŸ¥è¯¢",        // å¯é€‰ï¼šæ˜¾ç¤ºåç§°
  "parameterExtractors": [            // å‚æ•°æå–å™¨æ•°ç»„
    {
      "name": "sql",                  // æå–å­—æ®µåç§°
      "expression": "this.toString()", // æå–è¡¨è¾¾å¼
      "type": "string",               // æ•°æ®ç±»å‹
      "required": true,               // æ˜¯å¦å¿…éœ€
      "defaultValue": "unknown",      // é»˜è®¤å€¼
      "formatter": "sql",             // æ ¼å¼åŒ–å™¨ç±»å‹
      "truncate": 500,                // æˆªæ–­é•¿åº¦
      "mask": false                   // æ˜¯å¦è„±æ•
    },
    {
      "name": "parameters",
      "expression": "args",
      "type": "array",
      "processor": "sqlParameterProcessor" // è‡ªå®šä¹‰å¤„ç†å™¨
    }
  ],
  "resultExtractors": [               // ç»“æœæå–å™¨æ•°ç»„
    {
      "name": "affectedRows",
      "expression": "returnValue",
      "type": "integer",
      "condition": "returnValue instanceof Integer"
    },
    {
      "name": "resultSetSize",
      "expression": "returnValue.size()",
      "type": "integer",
      "condition": "returnValue instanceof Collection"
    }
  ],
  "contextExtractors": [              // ä¸Šä¸‹æ–‡æå–å™¨æ•°ç»„
    {
      "name": "connectionUrl",
      "expression": "this.getConnection().getMetaData().getURL()",
      "type": "string",
      "cache": true                   // æ˜¯å¦ç¼“å­˜ç»“æœ
    }
  ],
  "outputTemplate": "SQL: ${sql} | Params: ${parameters} | Rows: ${affectedRows}" // è¾“å‡ºæ¨¡æ¿
}
```

##### 4.2.2.5 è¿‡æ»¤è§„åˆ™é…ç½®è§„èŒƒ

- **FR-8.10.5**: filtersé…ç½®å¿…é¡»æ”¯æŒå¤æ‚çš„è¿‡æ»¤é€»è¾‘ï¼š
```json
[
  {
    "name": "è¯»æ“ä½œè¿‡æ»¤å™¨",
    "condition": "sql.toUpperCase().startsWith('SELECT')",
    "action": "include",              // include|exclude|tag|transform
    "tags": ["read", "query"],
    "priority": 100
  },
  {
    "name": "å†™æ“ä½œè¿‡æ»¤å™¨",
    "condition": "sql.matches('(?i)^(INSERT|UPDATE|DELETE).*')",
    "action": "tag",
    "tags": ["write", "modification"],
    "metadata": {
      "risk": "high",
      "audit": true
    }
  },
  {
    "name": "æ…¢æŸ¥è¯¢è¿‡æ»¤å™¨",
    "condition": "executionTime > 1000",
    "action": "include",
    "tags": ["slow", "performance"],
    "alert": {
      "enabled": true,
      "threshold": 5000,
      "message": "æ£€æµ‹åˆ°æ…¢æŸ¥è¯¢: ${sql}"
    }
  },
  {
    "name": "æ•æ„Ÿæ•°æ®è¿‡æ»¤å™¨",
    "condition": "sql.contains('password') || sql.contains('credit_card')",
    "action": "transform",
    "transformer": "sensitiveDataMasker",
    "config": {
      "maskPattern": "***",
      "preserveLength": false
    }
  }
]
```

##### 4.2.2.6 é…ç½®éªŒè¯è§„åˆ™

- **FR-8.10.6**: é…ç½®æ–‡ä»¶å¿…é¡»é€šè¿‡ä¸¥æ ¼çš„éªŒè¯è§„åˆ™ï¼š
    - **JSON SchemaéªŒè¯**ï¼šä½¿ç”¨JSON Schemaå®šä¹‰é…ç½®æ–‡ä»¶çš„ç»“æ„å’Œçº¦æŸ
    - **è¯­ä¹‰éªŒè¯**ï¼šéªŒè¯è¡¨è¾¾å¼è¯­æ³•ã€ç±»åå­˜åœ¨æ€§ã€æ–¹æ³•ç­¾åæ­£ç¡®æ€§
    - **ä¾èµ–éªŒè¯**ï¼šæ£€æŸ¥jaråŒ…ä¾èµ–ã€ç‰ˆæœ¬å…¼å®¹æ€§ã€å†²çªæ£€æµ‹
    - **æ€§èƒ½éªŒè¯**ï¼šè¯„ä¼°é…ç½®å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ï¼Œè¶…è¿‡é˜ˆå€¼æ—¶è­¦å‘Š
    - **å®‰å…¨éªŒè¯**ï¼šæ£€æŸ¥é…ç½®æ˜¯å¦è®¿é—®æ•æ„Ÿä¿¡æ¯æˆ–æ‰§è¡Œå±é™©æ“ä½œ

- **FR-8.11**: é…ç½®é©±åŠ¨æ¢é’ˆå¿…é¡»æ”¯æŒä»¥ä¸‹å…¸å‹åœºæ™¯ï¼š
    - **æ–‡ä»¶æ“ä½œæ¢é’ˆ**ï¼šç›‘æ§æ–‡ä»¶è¯»å†™ã€åˆ›å»ºã€åˆ é™¤ç­‰æ“ä½œ
    - **ç½‘ç»œæ“ä½œæ¢é’ˆ**ï¼šç›‘æ§Socketè¿æ¥ã€æ•°æ®ä¼ è¾“ç­‰æ“ä½œ
    - **ç¼“å­˜æ“ä½œæ¢é’ˆ**ï¼šç›‘æ§è‡ªå®šä¹‰ç¼“å­˜æ¡†æ¶çš„æ“ä½œ
    - **ä¸šåŠ¡æ–¹æ³•æ¢é’ˆ**ï¼šç›‘æ§ç‰¹å®šä¸šåŠ¡æ–¹æ³•çš„è°ƒç”¨å’Œæ‰§è¡Œ
    - **ç¬¬ä¸‰æ–¹åº“æ¢é’ˆ**ï¼šç›‘æ§ç¬¬ä¸‰æ–¹åº“çš„å…³é”®æ–¹æ³•è°ƒç”¨
- **FR-8.12**: å¿…é¡»æ”¯æŒjaråŒ…ç‰ˆæœ¬çš„è‡ªåŠ¨æ£€æµ‹å’ŒåŒ¹é…ï¼š
    - **ç‰ˆæœ¬æ£€æµ‹æœºåˆ¶**ï¼šè¿è¡Œæ—¶è‡ªåŠ¨æ£€æµ‹classpathä¸­jaråŒ…çš„ç‰ˆæœ¬ä¿¡æ¯
    - **ç‰ˆæœ¬åŒ¹é…ç®—æ³•**ï¼šæ ¹æ®é…ç½®çš„ç‰ˆæœ¬èŒƒå›´è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ¢é’ˆé…ç½®
    - **ç‰ˆæœ¬å†²çªå¤„ç†**ï¼šå½“å­˜åœ¨å¤šä¸ªç‰ˆæœ¬çš„åŒä¸€jaråŒ…æ—¶ï¼Œæä¾›æ˜ç¡®çš„å¤„ç†ç­–ç•¥
    - **ç‰ˆæœ¬å…¼å®¹æ€§æŠ¥å‘Š**ï¼šç”ŸæˆjaråŒ…ç‰ˆæœ¬ä¸æ¢é’ˆé…ç½®çš„å…¼å®¹æ€§æŠ¥å‘Š
    - **åŠ¨æ€ç‰ˆæœ¬é€‚é…**ï¼šæ”¯æŒåœ¨è¿è¡Œæ—¶æ ¹æ®å®é™…jaråŒ…ç‰ˆæœ¬åŠ¨æ€è°ƒæ•´æ¢é’ˆè¡Œä¸º

#### 4.2.3 ç»Ÿä¸€æ¢é’ˆé…ç½®æ–‡ä»¶ç¤ºä¾‹

**HTTPæœåŠ¡æ¢é’ˆé…ç½®æ–‡ä»¶ (`http-server-probe.json`) - ä½¿ç”¨ç»Ÿä¸€æ ¼å¼ï¼š**
```json
{
  "version": "1.0",
  "metadata": {
    "name": "HTTPæœåŠ¡æ¢é’ˆ",
    "description": "ç›‘æ§HTTPè¯·æ±‚çš„æ¥æ”¶å’Œå¤„ç†",
    "category": "http-server",
    "author": "Arthas Team",
    "createdAt": "2025-01-11T10:00:00Z",
    "tags": ["http", "server", "request", "servlet"]
  },
  "probe": {
    "enabled": true,
    "priority": 200,
    "scope": "method",
    "lifecycle": "around",
    "targets": [
      {
        "id": "servlet-request",
        "name": "Servletè¯·æ±‚å¤„ç†",
        "type": "method",
        "matcher": {
          "strategy": "exact",
          "class": {
            "name": "javax.servlet.http.HttpServlet"
          },
          "method": {
            "name": "service|doGet|doPost|doPut|doDelete"
          }
        },
        "versions": {
          "groupId": "javax.servlet",
          "artifactId": "servlet-api",
          "versionRange": "[2.5.0,)",
          "excludeVersions": []
        }
      },
      {
        "name": "spring-mvc-handler",
        "description": "Spring MVCè¯·æ±‚å¤„ç†",
        "class": "org.springframework.web.servlet.DispatcherServlet",
        "classMatchType": "exact",
        "methods": ["doDispatch"],
        "methodMatchType": "exact",
        "jarVersions": {
          "groupId": "org.springframework",
          "artifactId": "spring-webmvc",
          "versionRange": "[3.0.0,)",
          "excludeVersions": []
        }
      },
      {
        "name": "controller-methods",
        "description": "Controlleræ–¹æ³•è°ƒç”¨",
        "class": "*",
        "classMatchType": "annotation",
        "annotation": "@org.springframework.stereotype.Controller",
        "methods": ["*"],
        "methodMatchType": "annotation",
        "methodAnnotation": "@org.springframework.web.bind.annotation.RequestMapping",
        "jarVersions": {
          "groupId": "org.springframework",
          "artifactId": "spring-web",
          "versionRange": "[3.0.0,)",
          "excludeVersions": []
        }
      },
      {
        "name": "rest-controller-methods",
        "description": "RestControlleræ–¹æ³•è°ƒç”¨",
        "class": "*",
        "classMatchType": "annotation",
        "annotation": "@org.springframework.web.bind.annotation.RestController",
        "methods": ["*"],
        "methodMatchType": "annotation",
        "methodAnnotation": "@org.springframework.web.bind.annotation.*Mapping",
        "jarVersions": {
          "groupId": "org.springframework",
          "artifactId": "spring-web",
          "versionRange": "[4.0.0,)",
          "excludeVersions": []
        }
      }
    ],
    "capture": {
      "parameters": {
        "enabled": true,
        "indexes": [0, 1],
        "depth": 2,
        "sizeLimit": 2048,
        "excludeTypes": ["javax.servlet.ServletContext"]
      },
      "returnValue": {
        "enabled": true,
        "depth": 2,
        "sizeLimit": 4096,
        "excludeNull": false
      },
      "exceptions": {
        "enabled": true,
        "types": ["java.lang.Exception"],
        "stackTrace": true,
        "stackDepth": 30,
        "causeChain": true
      },
      "executionTime": {
        "enabled": true,
        "unit": "milliseconds",
        "precision": 3
      },
      "threadInfo": {
        "enabled": true,
        "captureThreadName": true,
        "captureThreadId": true
      }
    },
    "format": {
      "operationType": "HTTP_REQUEST",
      "displayName": "HTTPè¯·æ±‚å¤„ç†",
      "parameterExtractors": [
        {
          "name": "requestUrl",
          "expression": "args[0].getRequestURL().toString()",
          "type": "string",
          "required": true
        },
        {
          "name": "requestMethod",
          "expression": "args[0].getMethod()",
          "type": "string",
          "required": true
        },
        {
          "name": "requestHeaders",
          "expression": "extractHeaders(args[0])",
          "type": "object",
          "processor": "httpHeaderProcessor"
        },
        {
          "name": "requestParameters",
          "expression": "args[0].getParameterMap()",
          "type": "object",
          "truncate": 1000
        },
        {
          "name": "requestBody",
          "expression": "extractRequestBody(args[0])",
          "type": "string",
          "truncate": 2000,
          "processor": "requestBodyProcessor"
        },
        {
          "name": "clientIp",
          "expression": "getClientIpAddress(args[0])",
          "type": "string"
        },
        {
          "name": "userAgent",
          "expression": "args[0].getHeader('User-Agent')",
          "type": "string",
          "truncate": 200
        },
        {
          "name": "sessionId",
          "expression": "args[0].getSession(false) != null ? args[0].getSession().getId() : null",
          "type": "string"
        }
      ],
      "resultExtractors": [
        {
          "name": "responseStatus",
          "expression": "args[1].getStatus()",
          "type": "integer"
        },
        {
          "name": "responseHeaders",
          "expression": "extractResponseHeaders(args[1])",
          "type": "object",
          "processor": "httpHeaderProcessor"
        },
        {
          "name": "responseSize",
          "expression": "getResponseSize(args[1])",
          "type": "long"
        },
        {
          "name": "contentType",
          "expression": "args[1].getContentType()",
          "type": "string"
        }
      ],
      "contextExtractors": [
        {
          "name": "serverName",
          "expression": "args[0].getServerName()",
          "type": "string",
          "cache": true
        },
        {
          "name": "serverPort",
          "expression": "args[0].getServerPort()",
          "type": "integer",
          "cache": true
        },
        {
          "name": "contextPath",
          "expression": "args[0].getContextPath()",
          "type": "string",
          "cache": true
        }
      ],
      "outputTemplate": "${requestMethod} ${requestUrl} | Status: ${responseStatus} | Time: ${executionTime}ms | IP: ${clientIp}"
    },
    "filters": [
      {
        "name": "é™æ€èµ„æºè¿‡æ»¤å™¨",
        "condition": "requestUrl.matches('.*\\\\.(css|js|png|jpg|jpeg|gif|ico|woff|woff2)$')",
        "action": "exclude",
        "priority": 100
      },
      {
        "name": "å¥åº·æ£€æŸ¥è¿‡æ»¤å™¨",
        "condition": "requestUrl.contains('/health') || requestUrl.contains('/actuator')",
        "action": "exclude",
        "priority": 90
      },
      {
        "name": "APIè¯·æ±‚æ ‡è®°",
        "condition": "requestUrl.startsWith('/api/')",
        "action": "tag",
        "tags": ["api", "rest"],
        "priority": 80
      },
      {
        "name": "é”™è¯¯è¯·æ±‚æ ‡è®°",
        "condition": "responseStatus >= 400",
        "action": "tag",
        "tags": ["error", "client-error"],
        "priority": 70,
        "alert": {
          "enabled": true,
          "threshold": 500,
          "message": "æ£€æµ‹åˆ°HTTPé”™è¯¯: ${requestMethod} ${requestUrl} -> ${responseStatus}"
        }
      },
      {
        "name": "æ…¢è¯·æ±‚æ ‡è®°",
        "condition": "executionTime > 1000",
        "action": "tag",
        "tags": ["slow", "performance"],
        "priority": 60,
        "metadata": {
          "risk": "medium",
          "monitor": true
        }
      },
      {
        "name": "æ•æ„Ÿå‚æ•°è„±æ•",
        "condition": "requestParameters.containsKey('password') || requestParameters.containsKey('token')",
        "action": "transform",
        "transformer": "sensitiveParameterMasker",
        "priority": 50,
        "config": {
          "maskFields": ["password", "token", "secret", "key"],
          "maskPattern": "***"
        }
      }
    ]
  },
  "dependencies": {
    "requiredJars": [
      {
        "groupId": "javax.servlet",
        "artifactId": "servlet-api",
        "versionRange": "[2.5.0,)"
      }
    ],
    "optionalJars": [
      {
        "groupId": "org.springframework",
        "artifactId": "spring-webmvc",
        "versionRange": "[3.0.0,)"
      }
    ]
  },
  "performance": {
    "maxExecutionTime": 10000,
    "maxMemoryUsage": "20MB",
    "samplingRate": 1.0,
    "batchSize": 100
  }
}
```

**æ•°æ®åº“æ¢é’ˆé…ç½®æ–‡ä»¶ (`database-probe.json`)ï¼š**
```json
{
  "version": "1.0",
  "probe": {
    "name": "æ•°æ®åº“æ“ä½œæ¢é’ˆ",
    "description": "ç›‘æ§JDBCæ•°æ®åº“æ“ä½œ",
    "enabled": true,
    "category": "database",
    "targets": [
      {
        "class": "java.sql.PreparedStatement",
        "methods": ["execute", "executeQuery", "executeUpdate"],
        "jarVersions": {
          "groupId": "java.sql",
          "artifactId": "*",
          "versionRange": "[1.0.0,)",
          "excludeVersions": []
        }
      },
      {
        "class": "java.sql.Statement",
        "methods": ["execute", "executeQuery", "executeUpdate"],
        "jarVersions": {
          "groupId": "java.sql",
          "artifactId": "*",
          "versionRange": "[1.0.0,)",
          "excludeVersions": []
        }
      },
      {
        "class": "java.sql.Connection",
        "methods": ["prepareStatement", "createStatement"],
        "jarVersions": {
          "groupId": "java.sql",
          "artifactId": "*",
          "versionRange": "[1.0.0,)",
          "excludeVersions": []
        }
      }
    ],
    "capture": {
      "parameters": true,
      "returnValue": true,
      "exceptions": true,
      "executionTime": true
    },
    "format": {
      "operationType": "DATABASE",
      "parameterExtractors": [
        {
          "name": "sql",
          "expression": "this.toString()"
        },
        {
          "name": "parameters",
          "expression": "this.getParameterMetaData()"
        }
      ],
      "resultExtractors": [
        {
          "name": "affectedRows",
          "expression": "returnValue"
        },
        {
          "name": "resultSetSize",
          "expression": "returnValue.getFetchSize()"
        }
      ]
    },
    "filters": [
      {
        "condition": "sql.contains('SELECT')",
        "tags": ["read"]
      },
      {
        "condition": "sql.contains('INSERT') || sql.contains('UPDATE') || sql.contains('DELETE')",
        "tags": ["write"]
      }
    ]
  }
}
```

**ç¼“å­˜æ¢é’ˆé…ç½®æ–‡ä»¶ (`cache-probe.json`)ï¼š**
```json
{
  "version": "1.0",
  "probe": {
    "name": "ç¼“å­˜æ“ä½œæ¢é’ˆ",
    "description": "ç›‘æ§Redisç­‰ç¼“å­˜æ“ä½œ",
    "enabled": true,
    "category": "cache",
    "targets": [
      {
        "class": "redis.clients.jedis.Jedis",
        "methods": ["get", "set", "del", "exists", "expire"],
        "jarVersions": {
          "groupId": "redis.clients",
          "artifactId": "jedis",
          "versionRange": "[2.0.0, 5.0.0)",
          "excludeVersions": ["3.1.0"]
        }
      },
      {
        "class": "org.springframework.data.redis.core.RedisTemplate",
        "methods": ["opsForValue", "opsForHash", "opsForList"],
        "jarVersions": {
          "groupId": "org.springframework.data",
          "artifactId": "spring-data-redis",
          "versionRange": "[1.0.0,)",
          "excludeVersions": []
        }
      }
    ],

    "capture": {
      "parameters": true,
      "returnValue": true,
      "exceptions": true,
      "executionTime": true
    },
    "format": {
      "operationType": "CACHE",
      "parameterExtractors": [
        {
          "name": "key",
          "expression": "args[0]"
        },
        {
          "name": "value",
          "expression": "args[1]",
          "truncate": 1000
        }
      ],
      "resultExtractors": [
        {
          "name": "result",
          "expression": "returnValue",
          "truncate": 1000
        }
      ]
    }
  }
}
```

**HTTPå®¢æˆ·ç«¯æ¢é’ˆé…ç½®æ–‡ä»¶ (`http-client-probe.json`)ï¼š**
```json
{
  "version": "1.0",
  "probe": {
    "name": "HTTPå®¢æˆ·ç«¯æ¢é’ˆ",
    "description": "ç›‘æ§HTTPå®¢æˆ·ç«¯è°ƒç”¨",
    "enabled": true,
    "category": "http",
    "targets": [
      {
        "class": "org.apache.http.impl.client.CloseableHttpClient",
        "methods": ["execute"],
        "jarVersions": {
          "groupId": "org.apache.httpcomponents",
          "artifactId": "httpclient",
          "versionRange": "[4.0.0, 6.0.0)",
          "excludeVersions": []
        }
      },
      {
        "class": "okhttp3.OkHttpClient",
        "methods": ["newCall"],
        "jarVersions": {
          "groupId": "com.squareup.okhttp3",
          "artifactId": "okhttp",
          "versionRange": "[3.0.0, 5.0.0)",
          "excludeVersions": []
        }
      },
      {
        "class": "org.springframework.web.client.RestTemplate",
        "methods": ["exchange", "getForObject", "postForObject"],
        "jarVersions": {
          "groupId": "org.springframework",
          "artifactId": "spring-web",
          "versionRange": "[3.0.0,)",
          "excludeVersions": []
        }
      }
    ],

    "capture": {
      "parameters": true,
      "returnValue": true,
      "exceptions": true,
      "executionTime": true
    },
    "format": {
      "operationType": "HTTP_CLIENT",
      "parameterExtractors": [
        {
          "name": "url",
          "expression": "args[0].getURI().toString()"
        },
        {
          "name": "method",
          "expression": "args[0].getMethod()"
        },
        {
          "name": "headers",
          "expression": "args[0].getAllHeaders()"
        }
      ],
      "resultExtractors": [
        {
          "name": "statusCode",
          "expression": "returnValue.getStatusLine().getStatusCode()"
        },
        {
          "name": "responseSize",
          "expression": "returnValue.getEntity().getContentLength()"
        }
      ]
    }
  }
}
```

#### 4.2.4 æ¢é’ˆç»„åˆé…ç½®æ–‡ä»¶

**æ¢é’ˆç»„åˆé…ç½®æ–‡ä»¶ (`probe-groups.json`)ï¼š**
```json
{
  "version": "1.0",
  "groups": {
    "default": {
      "description": "é»˜è®¤å¯ç”¨çš„æ¢é’ˆç»„åˆ",
      "probes": [
        "http-server-probe.json",
        "database-probe.json",
        "cache-probe.json",
        "http-client-probe.json"
      ]
    },
    "full": {
      "description": "å®Œæ•´çš„æ¢é’ˆç»„åˆ",
      "probes": [
        "http-server-probe.json",
        "database-probe.json",
        "cache-probe.json",
        "http-client-probe.json",
        "file-operations-probe.json",
        "messaging-probe.json"
      ]
    },
    "web-only": {
      "description": "Webåº”ç”¨ä¸“ç”¨æ¢é’ˆç»„åˆ",
      "probes": [
        "http-server-probe.json",
        "http-client-probe.json"
      ],
      "config": {
        "capture-request-body": true,
        "capture-response-body": false
      }
    },
    "performance": {
      "description": "æ€§èƒ½åˆ†æä¸“ç”¨æ¢é’ˆç»„åˆ",
      "probes": [
        "http-server-probe.json",
        "database-probe.json",
        "cache-probe.json"
      ],
      "config": {
        "stack-trace-threshold": 100,
        "capture-queue-time": true
      }
    },
    "minimal": {
      "description": "æœ€å°æ¢é’ˆç»„åˆï¼Œä»…HTTPæœåŠ¡ç›‘æ§",
      "probes": [
        "http-server-probe.json"
      ]
    }
  }
}
```

#### 4.2.5 æ¢é’ˆé…ç½®æ–‡ä»¶ç›®å½•ç»“æ„

**ç³»ç»Ÿçº§æ¢é’ˆé…ç½®ç›®å½•ç»“æ„ï¼š**
```
$ARTHAS_HOME/probes/
â”œâ”€â”€ http-server-probe.json       # HTTPæœåŠ¡æ¢é’ˆé…ç½®
â”œâ”€â”€ database-probe.json          # æ•°æ®åº“æ¢é’ˆé…ç½®
â”œâ”€â”€ cache-probe.json             # ç¼“å­˜æ¢é’ˆé…ç½®
â”œâ”€â”€ http-client-probe.json       # HTTPå®¢æˆ·ç«¯æ¢é’ˆé…ç½®
â”œâ”€â”€ file-operations-probe.json   # æ–‡ä»¶æ“ä½œæ¢é’ˆé…ç½®
â”œâ”€â”€ messaging-probe.json         # æ¶ˆæ¯é˜Ÿåˆ—æ¢é’ˆé…ç½®
â”œâ”€â”€ probe-groups.json            # æ¢é’ˆç»„åˆé…ç½®
â””â”€â”€ README.md                    # é…ç½®æ–‡ä»¶è¯´æ˜æ–‡æ¡£
```

**ç”¨æˆ·çº§æ¢é’ˆé…ç½®ç›®å½•ç»“æ„ï¼š**
```
~/.arthas/probes/
â”œâ”€â”€ http-server-probe.json       # ç”¨æˆ·è‡ªå®šä¹‰HTTPæœåŠ¡æ¢é’ˆé…ç½®
â”œâ”€â”€ database-probe.json          # ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®åº“æ¢é’ˆé…ç½®
â”œâ”€â”€ custom-business-probe.json   # ç”¨æˆ·è‡ªå®šä¹‰ä¸šåŠ¡æ¢é’ˆé…ç½®
â”œâ”€â”€ third-party-probe.json       # ç¬¬ä¸‰æ–¹åº“æ¢é’ˆé…ç½®
â””â”€â”€ probe-groups.json            # ç”¨æˆ·è‡ªå®šä¹‰æ¢é’ˆç»„åˆ
```

**é¡¹ç›®çº§æ¢é’ˆé…ç½®ç›®å½•ç»“æ„ï¼š**
```
./probes/
â”œâ”€â”€ http-server-probe.json       # é¡¹ç›®ç‰¹å®šHTTPæœåŠ¡æ¢é’ˆé…ç½®
â”œâ”€â”€ database-probe.json          # é¡¹ç›®ç‰¹å®šæ•°æ®åº“æ¢é’ˆé…ç½®
â”œâ”€â”€ business-probe.json          # é¡¹ç›®ä¸šåŠ¡æ¢é’ˆé…ç½®
â”œâ”€â”€ integration-probe.json       # é¡¹ç›®é›†æˆæ¢é’ˆé…ç½®
â””â”€â”€ probe-groups.json            # é¡¹ç›®æ¢é’ˆç»„åˆé…ç½®
```

#### 4.2.3.1 å¤šç‰ˆæœ¬jaråŒ…æ”¯æŒç¤ºä¾‹

**å¤šç‰ˆæœ¬Rediså®¢æˆ·ç«¯æ¢é’ˆé…ç½®ç¤ºä¾‹ï¼š**
```json
{
  "probes": {
    "redis-multi-version": {
      "name": "å¤šç‰ˆæœ¬Rediså®¢æˆ·ç«¯æ¢é’ˆ",
      "description": "æ”¯æŒä¸åŒç‰ˆæœ¬çš„Rediså®¢æˆ·ç«¯åº“",
      "enabled": true,
      "category": "cache",
      "versionConfigs": [
        {
          "name": "jedis-2x",
          "jarVersions": {
            "groupId": "redis.clients",
            "artifactId": "jedis",
            "versionRange": "[2.0.0, 3.0.0)",
            "excludeVersions": ["2.1.0"]
          },
          "targets": [
            {
              "class": "redis.clients.jedis.Jedis",
              "methods": ["get", "set", "del"],
              "parameterExtractors": [
                {
                  "name": "key",
                  "expression": "args[0]"
                }
              ]
            }
          ]
        },
        {
          "name": "jedis-3x",
          "jarVersions": {
            "groupId": "redis.clients",
            "artifactId": "jedis",
            "versionRange": "[3.0.0, 4.0.0)",
            "excludeVersions": []
          },
          "targets": [
            {
              "class": "redis.clients.jedis.Jedis",
              "methods": ["get", "set", "del", "exists"],
              "parameterExtractors": [
                {
                  "name": "key",
                  "expression": "args[0]"
                },
                {
                  "name": "connectionInfo",
                  "expression": "this.getClient().getHost() + ':' + this.getClient().getPort()"
                }
              ]
            }
          ]
        },
        {
          "name": "jedis-4x",
          "jarVersions": {
            "groupId": "redis.clients",
            "artifactId": "jedis",
            "versionRange": "[4.0.0,)",
            "excludeVersions": []
          },
          "targets": [
            {
              "class": "redis.clients.jedis.Jedis",
              "methods": ["get", "set", "del", "exists", "expire"],
              "parameterExtractors": [
                {
                  "name": "key",
                  "expression": "args[0]"
                },
                {
                  "name": "connectionInfo",
                  "expression": "this.getConnectionPoolConfig().toString()"
                }
              ]
            }
          ]
        }
      ],
      "versionDetection": {
        "strategy": "automatic",
        "fallbackToLatest": true,
        "warnOnMismatch": true
      }
    }
  }
}
```

#### 4.2.4 å‚æ•°å’Œç»“æœè¯¦ç»†è®°å½•

- **FR-8.4**: å¿…é¡»æä¾›è¯¦ç»†çš„å‚æ•°è®°å½•åŠŸèƒ½ï¼š
    - **HTTPè¯·æ±‚å‚æ•°**ï¼šURLå‚æ•°ã€è¡¨å•å‚æ•°ã€JSONè¯·æ±‚ä½“ã€è¯·æ±‚å¤´ä¿¡æ¯
    - **æ–¹æ³•è°ƒç”¨å‚æ•°**ï¼šJavaæ–¹æ³•çš„è¾“å…¥å‚æ•°å€¼ã€å‚æ•°ç±»å‹ã€å‚æ•°åç§°
    - **SQLå‚æ•°ç»‘å®š**ï¼šPreparedStatementçš„å‚æ•°ç»‘å®šå€¼å’Œç±»å‹
    - **å‚æ•°å€¼å¤„ç†**ï¼šæ”¯æŒå¤æ‚å¯¹è±¡çš„åºåˆ—åŒ–æ˜¾ç¤ºã€å¾ªç¯å¼•ç”¨æ£€æµ‹
- **FR-8.5**: å¿…é¡»æä¾›è¯¦ç»†çš„æ‰§è¡Œç»“æœè®°å½•åŠŸèƒ½ï¼š
    - **HTTPå“åº”ç»“æœ**ï¼šå“åº”çŠ¶æ€ç ã€å“åº”å¤´ã€å“åº”ä½“å†…å®¹ï¼ˆæ”¯æŒæˆªæ–­ï¼‰
    - **æ–¹æ³•è¿”å›å€¼**ï¼šJavaæ–¹æ³•çš„è¿”å›å€¼ã€è¿”å›ç±»å‹ã€æ˜¯å¦ä¸ºnull
    - **SQLæ‰§è¡Œç»“æœ**ï¼šResultSetå†…å®¹æ‘˜è¦ã€å½±å“è¡Œæ•°ã€ç”Ÿæˆçš„ä¸»é”®
    - **å¼‚å¸¸ä¿¡æ¯**ï¼šå®Œæ•´çš„å¼‚å¸¸å †æ ˆã€å¼‚å¸¸ç±»å‹ã€å¼‚å¸¸æ¶ˆæ¯
- **FR-8.6**: å¿…é¡»æ”¯æŒæ•°æ®æˆªæ–­å’Œè„±æ•ï¼š
    - **å¤§æ•°æ®æˆªæ–­**ï¼šè¶…è¿‡æŒ‡å®šå¤§å°çš„æ•°æ®è‡ªåŠ¨æˆªæ–­å¹¶æ˜¾ç¤ºå¤§å°ä¿¡æ¯
    - **æ•æ„Ÿä¿¡æ¯è„±æ•**ï¼šè‡ªåŠ¨è¯†åˆ«å’Œè„±æ•å¯†ç ã€ä»¤ç‰Œã€èº«ä»½è¯å·ç­‰æ•æ„Ÿä¿¡æ¯
    - **è‡ªå®šä¹‰è„±æ•è§„åˆ™**ï¼šæ”¯æŒç”¨æˆ·å®šä¹‰è„±æ•å­—æ®µå’Œè„±æ•ç­–ç•¥
    - **å®Œæ•´æ•°æ®ä¿ç•™é€‰é¡¹**ï¼šæä¾›å‚æ•°æ§åˆ¶æ˜¯å¦ä¿ç•™å®Œæ•´çš„åŸå§‹æ•°æ®

### 4.3 Trace ID å…³è”

- **FR-9**: å‘½ä»¤å¿…é¡»ä¸ºæ¯æ¬¡ç‹¬ç«‹çš„è¯·æ±‚è·Ÿè¸ªç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ **Arthas Trace ID** (ä¾‹å¦‚ï¼Œä½¿ç”¨ UUID)ã€‚æ­¤ ID ç”± Arthas ç”Ÿæˆï¼Œå¹¶ä¸”å¿…é¡»å­˜åœ¨äºæ¯ä¸ªè·Ÿè¸ªç»“æœä¸­ã€‚
- **FR-10**: å‘½ä»¤å¿…é¡»æ”¯æŒç”¨æˆ·æä¾›ä¸€ä¸ªè¡¨è¾¾å¼ (ä¾‹å¦‚ OGNL)ï¼Œä»¥ä»å½“å‰ HTTP è¯·æ±‚ (`HttpServletRequest` å¯¹è±¡) çš„ä»»ä½•éƒ¨åˆ† (å¦‚è¯·æ±‚å¤´ã€å‚æ•°æˆ– Cookie) æå– **ä¸šåŠ¡ Trace ID**ã€‚
- **FR-11**: **Arthas Trace ID** å’Œä»»ä½•æˆåŠŸæå–çš„ **ä¸šåŠ¡ Trace ID** éƒ½å¿…é¡»åœ¨æœ€ç»ˆè¾“å‡ºä¸­æ¸…æ™°åœ°æ˜¾ç¤ºã€‚

### 4.4 è¾“å‡ºä¸æ ¼å¼

- **FR-12**: æ‰§è¡Œåï¼Œå‘½ä»¤å¿…é¡»åœ¨æ§åˆ¶å°ä¸­ä»¥æ¸…æ™°çš„æ ‘çŠ¶ç»“æ„æ˜¾ç¤ºè·Ÿè¸ªç»“æœã€‚è¾“å‡ºçš„å¤´éƒ¨åº”åŒ…å«ï¼š
    - **Arthas Trace ID**
    - **è¯·æ±‚åŸºæœ¬ä¿¡æ¯**ï¼ˆURLã€æ–¹æ³•ã€çŠ¶æ€ç ï¼‰
    - **æ—¶é—´ç»Ÿè®¡æ‘˜è¦**ï¼š
        - é˜Ÿåˆ—ç­‰å¾…æ—¶é—´ï¼ˆQueue Waitï¼‰
        - å®é™…å¤„ç†æ—¶é—´ï¼ˆProcessing Timeï¼‰
        - æ€»å“åº”æ—¶é—´ï¼ˆTotal Timeï¼‰
- **FR-13**: æ ‘çŠ¶ç»“æ„ä¸­çš„èŠ‚ç‚¹å¿…é¡»ä¸¥æ ¼æŒ‰ç…§å®ƒä»¬çš„å®é™…æ‰§è¡Œé¡ºåºåˆ—å‡ºã€‚å­èŠ‚ç‚¹ä»£è¡¨åµŒå¥—è°ƒç”¨ã€‚
- **FR-14**: æ¯ä¸ªèŠ‚ç‚¹å¿…é¡»æ¸…æ™°åœ°æ˜¾ç¤ºå…¶æ¥æºæ¢é’ˆç±»å‹ (å¦‚ JDBC, Redis)ã€æŒç»­æ—¶é—´ä»¥åŠå…³é”®ä¿¡æ¯ (å¦‚ SQL è¯­å¥, Redis å‘½ä»¤)ã€‚
- **FR-15**: å¿…é¡»åœ¨è¾“å‡ºä¸­æ˜ç¡®åŒºåˆ†å’Œæ˜¾ç¤ºï¼š
    - **é˜Ÿåˆ—ç­‰å¾…æ—¶é—´**ï¼šè¯·æ±‚åœ¨çº¿ç¨‹æ± é˜Ÿåˆ—ä¸­ç­‰å¾…çš„æ—¶é—´
    - **å¤„ç†æ—¶é—´**ï¼šå®é™…ä¸šåŠ¡é€»è¾‘æ‰§è¡Œçš„æ—¶é—´
    - **å„ç»„ä»¶è°ƒç”¨æ—¶é—´**ï¼šæ•°æ®åº“ã€ç¼“å­˜ç­‰å„ä¸ªç»„ä»¶çš„è°ƒç”¨è€—æ—¶
- **FR-15.1**: å¿…é¡»æä¾›ä¸šåŠ¡é€»è¾‘ç†è§£å‹å¥½çš„è¾“å‡ºæ ¼å¼ï¼š
    - **æ•°æ®åº“æ“ä½œæ‘˜è¦**ï¼šæ˜¾ç¤ºè®¿é—®äº†å“ªäº›è¡¨ã€æ‰§è¡Œäº†ä»€ä¹ˆç±»å‹çš„æ“ä½œï¼ˆSELECT/INSERT/UPDATE/DELETEï¼‰
    - **ç¼“å­˜æ“ä½œæ‘˜è¦**ï¼šæ˜¾ç¤ºç¼“å­˜çš„è¯»å†™æ“ä½œå’Œå‘½ä¸­æƒ…å†µ
    - **å¤–éƒ¨æœåŠ¡è°ƒç”¨æ‘˜è¦**ï¼šæ˜¾ç¤ºè°ƒç”¨äº†å“ªäº›å¤–éƒ¨APIå’Œå“åº”çŠ¶æ€
    - **ä¸šåŠ¡æµç¨‹æ¦‚è§ˆ**ï¼šæŒ‰æ—¶é—´é¡ºåºå±•ç¤ºä¸»è¦çš„ä¸šåŠ¡å¤„ç†æ­¥éª¤
- **FR-15.2**: å¿…é¡»æä¾›è¯¦ç»†çš„å‚æ•°å’Œç»“æœæ˜¾ç¤ºï¼š
    - **å‚æ•°å±•ç¤º**ï¼šä»¥ç»“æ„åŒ–æ–¹å¼æ˜¾ç¤ºè¾“å…¥å‚æ•°ï¼Œæ”¯æŒåµŒå¥—å¯¹è±¡çš„å±•å¼€
    - **ç»“æœå±•ç¤º**ï¼šæ¸…æ™°æ˜¾ç¤ºæ‰§è¡Œç»“æœï¼ŒåŒ…æ‹¬è¿”å›å€¼ã€å½±å“è¡Œæ•°ã€çŠ¶æ€ä¿¡æ¯
    - **æ•°æ®å¯¹æ¯”**ï¼šæ”¯æŒæ˜¾ç¤ºæ‰§è¡Œå‰åçš„æ•°æ®å˜åŒ–ï¼ˆå¦‚UPDATEæ“ä½œçš„å‰åå¯¹æ¯”ï¼‰
    - **å¼‚å¸¸è¯¦æƒ…**ï¼šå®Œæ•´æ˜¾ç¤ºå¼‚å¸¸ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¼‚å¸¸ç±»å‹ã€æ¶ˆæ¯ã€å…³é”®å †æ ˆ
- **FR-15.3**: å¿…é¡»æ”¯æŒå¤šçº§è¯¦ç»†ç¨‹åº¦æ§åˆ¶ï¼š
    - **ç®€è¦æ¨¡å¼**ï¼šåªæ˜¾ç¤ºå…³é”®ä¿¡æ¯å’Œæ‘˜è¦
    - **æ ‡å‡†æ¨¡å¼**ï¼šæ˜¾ç¤ºä¸»è¦å‚æ•°å’Œç»“æœ
    - **è¯¦ç»†æ¨¡å¼**ï¼šæ˜¾ç¤ºæ‰€æœ‰å‚æ•°ã€ç»“æœå’Œå…ƒæ•°æ®
    - **è°ƒè¯•æ¨¡å¼**ï¼šæ˜¾ç¤ºå®Œæ•´çš„åŸå§‹æ•°æ®ï¼ŒåŒ…æ‹¬å†…éƒ¨çŠ¶æ€ä¿¡æ¯
- **FR-15.4**: å¿…é¡»æä¾›å€¼è¿‡æ»¤ç»“æœçš„ç‰¹æ®Šæ˜¾ç¤ºï¼š
    - **åŒ¹é…é«˜äº®**ï¼šåœ¨è¾“å‡ºä¸­é«˜äº®æ˜¾ç¤ºåŒ¹é…çš„ç›®æ ‡å€¼
    - **è¿‡æ»¤æ‘˜è¦**ï¼šæ˜¾ç¤ºè¿‡æ»¤ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ€»æ“ä½œæ•°ã€åŒ¹é…æ“ä½œæ•°ã€è¿‡æ»¤ç‡ï¼‰
    - **åŒ¹é…è·¯å¾„**ï¼šæ˜¾ç¤ºç›®æ ‡å€¼åœ¨å‚æ•°ç»“æ„ä¸­çš„å…·ä½“ä½ç½®
    - **å †æ ˆå…³è”**ï¼šå°†å †æ ˆä¿¡æ¯ä¸åŒ¹é…çš„æ“ä½œå…³è”æ˜¾ç¤º
    - **æ—¶é—´çº¿è§†å›¾**ï¼šæŒ‰æ—¶é—´é¡ºåºæ˜¾ç¤ºæ‰€æœ‰åŒ…å«ç›®æ ‡å€¼çš„æ“ä½œ
- **FR-16**: å¿…é¡»æä¾›ä¸€ä¸ªå‚æ•° (ä¾‹å¦‚ `--stack-trace-threshold <ms>`) æ¥æ•è·çº¿ç¨‹çš„è°ƒç”¨å †æ ˆã€‚
    - **æœºåˆ¶**: åªæœ‰å½“æ¢é’ˆ (å¦‚ JDBC) è®°å½•çš„äº‹ä»¶çš„æ‰§è¡Œè€—æ—¶è¶…è¿‡æŒ‡å®šçš„æ¯«ç§’é˜ˆå€¼æ—¶ï¼Œæ‰ä¼šæ•è·å…¶å †æ ˆè·Ÿè¸ªã€‚
    - **ç‰¹æ®Šå€¼**: å¦‚æœé˜ˆå€¼è®¾ç½®ä¸º `0`ï¼Œå°†ä¸ºæ‰€æœ‰è¢«æ¢æµ‹åˆ°çš„äº‹ä»¶æ•è·å †æ ˆè·Ÿè¸ªã€‚
- **FR-16.1**: å¿…é¡»æ”¯æŒåŸºäºå€¼è¿‡æ»¤çš„è‡ªåŠ¨å †æ ˆæ•è·ï¼š
    - **å€¼åŒ¹é…è§¦å‘**ï¼šå½“æ£€æµ‹åˆ°æŒ‡å®šçš„è¿‡æ»¤å€¼æ—¶ï¼Œè‡ªåŠ¨æ•è·å®Œæ•´çš„çº¿ç¨‹å †æ ˆ
    - **æ™ºèƒ½å †æ ˆè¿‡æ»¤**ï¼šåªæ˜¾ç¤ºä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„å †æ ˆå¸§ï¼Œè¿‡æ»¤æ¡†æ¶å†…éƒ¨è°ƒç”¨
    - **å¤šçº¿ç¨‹å…³è”**ï¼šå¦‚æœæ“ä½œæ¶‰åŠå¤šä¸ªçº¿ç¨‹ï¼Œæ•è·æ‰€æœ‰ç›¸å…³çº¿ç¨‹çš„å †æ ˆ
    - **å †æ ˆæ ‡æ³¨**ï¼šåœ¨å †æ ˆä¸­æ ‡æ³¨å“ªäº›æ–¹æ³•åŒ…å«äº†ç›®æ ‡å€¼
- **FR-17**: æ•è·çš„å †æ ˆè·Ÿè¸ªå¿…é¡»åœ¨è¾“å‡ºä¸­æ˜¾ç¤ºã€‚
    - **æ§åˆ¶å°**: å †æ ˆè·Ÿè¸ªåº”æ ¼å¼åŒ–å¹¶æ˜¾ç¤ºåœ¨å…¶å¯¹åº”èŠ‚ç‚¹çš„ä¸‹æ–¹ã€‚é»˜è®¤æƒ…å†µä¸‹å¯èƒ½ä¼šè¢«æˆªæ–­ï¼Œåœ¨ `--verbose` æ¨¡å¼ä¸‹ä¼šå®Œæ•´æ˜¾ç¤ºã€‚
    - **JSON æ–‡ä»¶**: `traceTree` èŠ‚ç‚¹å¯¹è±¡å¿…é¡»åŒ…å«ä¸€ä¸ªå¯é€‰çš„ `stackTrace` å­—æ®µï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªç”±å­—ç¬¦ä¸²ç»„æˆçš„æ•°ç»„å½¢å¼çš„å †æ ˆè·Ÿè¸ªã€‚
- **FR-18**: ç”¨æˆ·å¿…é¡»å¯ä»¥é€‰æ‹©å°†è·Ÿè¸ªè¾“å‡ºå®šå‘åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚
- **FR-19**: **é»˜è®¤æ–‡ä»¶æ ¼å¼**: å½“æœªæŒ‡å®šè‡ªå®šä¹‰æ ¼å¼æ—¶ï¼Œå†™å…¥æ–‡ä»¶çš„è¾“å‡ºå¿…é¡»æ˜¯åŒ…å«æ‰€æœ‰è·Ÿè¸ªä¿¡æ¯çš„å•è¡Œã€å®Œæ•´çš„ JSON å¯¹è±¡ã€‚
- **FR-20**: **è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼**: ç”¨æˆ·å¿…é¡»èƒ½å¤Ÿé€šè¿‡ä¸€ä¸ªå‚æ•° (ä¾‹å¦‚ `--output-format <template>`) æä¾›ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œæ¥ä¸ºæ–‡ä»¶è¾“å‡ºå®šä¹‰è‡ªå®šä¹‰æ ¼å¼ã€‚
    - **åŸºç¡€å ä½ç¬¦**ï¼š`${arthasTraceId}`, `${businessTraceId}`, `${totalTimeMs}`, `${queueWaitTimeMs}`, `${processingTimeMs}`, `${request.url}`, `${request.method}`, `${timestamp}`, `${traceSummary}`
    - **å‚æ•°ç›¸å…³å ä½ç¬¦**ï¼š`${request.params}`, `${request.body}`, `${request.headers}`, `${sql.params}`, `${method.args}`
    - **ç»“æœç›¸å…³å ä½ç¬¦**ï¼š`${response.body}`, `${response.status}`, `${sql.result}`, `${method.return}`, `${exception.message}`
    - **ç»Ÿè®¡å ä½ç¬¦**ï¼š`${db.queryCount}`, `${cache.hitRate}`, `${http.callCount}`, `${error.count}`
    - **è¿‡æ»¤ç›¸å…³å ä½ç¬¦**ï¼š`${filter.matchCount}`, `${filter.targetValue}`, `${filter.matchPath}`, `${filter.stackTrace}`
- **FR-20.1**: å¿…é¡»æ”¯æŒåµŒå¥—å¯¹è±¡çš„è®¿é—®ï¼Œå¦‚ `${traceTree.children[0].details.sql}`ã€‚
- **FR-20.2**: å¿…é¡»æ”¯æŒæ¡ä»¶è¡¨è¾¾å¼å’Œå‡½æ•°è°ƒç”¨ï¼Œå¦‚ `${totalTimeMs > 1000 ? 'SLOW' : 'FAST'}`ã€‚
- **FR-20.3**: å¿…é¡»æ”¯æŒè‡ªå®šä¹‰æ ¼å¼åŒ–å‡½æ•°çš„æ³¨å†Œå’Œä½¿ç”¨ã€‚
- **FR-21**: æ•°æ®å¿…é¡»ä»¥è¿½åŠ æ¨¡å¼å†™å…¥è¾“å‡ºæ–‡ä»¶ï¼Œä»¥é˜²æ­¢è¦†ç›–ä»¥å‰çš„è®°å½•ã€‚

#### 4.4.1 è·Ÿè¸ªç»“æœä¿å­˜å’Œå¯¹æ¯”

- **FR-21.1**: å¿…é¡»æ”¯æŒè·Ÿè¸ªç»“æœçš„ä¿å­˜åŠŸèƒ½ï¼š
    - **ç»“æœæ–‡ä»¶ä¿å­˜**ï¼šå°†å®Œæ•´çš„è·Ÿè¸ªç»“æœä¿å­˜ä¸ºç»“æ„åŒ–æ–‡ä»¶
    - **å¤šæ ¼å¼æ”¯æŒ**ï¼šæ”¯æŒJSONã€XMLã€æ–‡æœ¬ç­‰å¤šç§ä¿å­˜æ ¼å¼
    - **æ–‡ä»¶å‘½åç­–ç•¥**ï¼šæ”¯æŒè‡ªå®šä¹‰æ–‡ä»¶åå’Œè‡ªåŠ¨å‘½åç­–ç•¥
    - **å‹ç¼©å­˜å‚¨**ï¼šæ”¯æŒå‹ç¼©å­˜å‚¨ä»¥èŠ‚çœç£ç›˜ç©ºé—´
- **FR-21.2**: å¿…é¡»æ”¯æŒè·Ÿè¸ªç»“æœçš„å¯¹æ¯”åŠŸèƒ½ï¼š
    - **ç»“æœå¯¹æ¯”**ï¼šå¯¹æ¯”ä¸¤ä¸ªæˆ–å¤šä¸ªè·Ÿè¸ªç»“æœçš„å·®å¼‚
    - **å·®å¼‚é«˜äº®**ï¼šé«˜äº®æ˜¾ç¤ºç»“æœä¹‹é—´çš„å…³é”®å·®å¼‚
    - **å¯¹æ¯”æŠ¥å‘Š**ï¼šç”Ÿæˆè¯¦ç»†çš„å¯¹æ¯”åˆ†ææŠ¥å‘Š
    - **å†å²å¯¹æ¯”**ï¼šæ”¯æŒä¸å†å²åŸºçº¿ç»“æœçš„å¯¹æ¯”
- **FR-21.3**: å¿…é¡»æä¾›è·Ÿè¸ªç»“æœçš„ç®¡ç†åŠŸèƒ½ï¼š
    - **ç»“æœåˆ—è¡¨**ï¼šåˆ—å‡ºæ‰€æœ‰ä¿å­˜çš„è·Ÿè¸ªç»“æœæ–‡ä»¶
    - **ç»“æœæœç´¢**ï¼šæ ¹æ®æ—¶é—´ã€URLã€æ ‡ç­¾ç­‰æ¡ä»¶æœç´¢ç»“æœ
    - **ç»“æœåˆ†ç±»**ï¼šæ”¯æŒå¯¹è·Ÿè¸ªç»“æœè¿›è¡Œåˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†
    - **ç»“æœæ¸…ç†**ï¼šæ”¯æŒè‡ªåŠ¨æ¸…ç†è¿‡æœŸçš„è·Ÿè¸ªç»“æœæ–‡ä»¶
- **FR-22**: å¿…é¡»æä¾›ä¸€ä¸ª `--verbose` å¼€å…³æ¥æ§åˆ¶è¾“å‡ºçš„è¯¦ç»†ç¨‹åº¦ã€‚

### 4.5 è¯·æ±‚å›æ”¾åŠŸèƒ½

- **FR-23**: å¿…é¡»æ”¯æŒè¯·æ±‚å›æ”¾åŠŸèƒ½ï¼Œç”¨äºè°ƒè¯•å’Œé—®é¢˜å¤ç°ï¼š
    - **å›æ”¾æ•°æ®è®°å½•**ï¼šåœ¨è·Ÿè¸ªè¿‡ç¨‹ä¸­è®°å½•å®Œæ•´çš„è¯·æ±‚å›æ”¾æ‰€éœ€çš„æ•°æ®
    - **å›æ”¾æ–‡ä»¶ç”Ÿæˆ**ï¼šå°†å›æ”¾æ•°æ®ä¿å­˜ä¸ºæ ‡å‡†æ ¼å¼çš„å›æ”¾æ–‡ä»¶
    - **å›æ”¾æ‰§è¡Œ**ï¼šèƒ½å¤ŸåŸºäºå›æ”¾æ–‡ä»¶é‡æ–°æ‰§è¡Œç›¸åŒçš„è¯·æ±‚
    - **å›æ”¾å¯¹æ¯”**ï¼šå¯¹æ¯”åŸå§‹æ‰§è¡Œå’Œå›æ”¾æ‰§è¡Œçš„ç»“æœå·®å¼‚
- **FR-23.1**: å›æ”¾æ•°æ®å¿…é¡»åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
    - **HTTPè¯·æ±‚ä¿¡æ¯**ï¼šå®Œæ•´çš„URLã€HTTPæ–¹æ³•ã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“
    - **è¯·æ±‚å‚æ•°**ï¼šæ‰€æœ‰çš„æŸ¥è¯¢å‚æ•°ã€è¡¨å•å‚æ•°ã€è·¯å¾„å‚æ•°
    - **ç¯å¢ƒä¸Šä¸‹æ–‡**ï¼šè¯·æ±‚æ—¶çš„ç¯å¢ƒå˜é‡ã€ç³»ç»Ÿå±æ€§ã€æ—¶é—´æˆ³
    - **ä¾èµ–æ•°æ®**ï¼šæ•°æ®åº“çŠ¶æ€ã€ç¼“å­˜çŠ¶æ€ã€å¤–éƒ¨æœåŠ¡å“åº”ï¼ˆå¯é€‰ï¼‰
- **FR-23.2**: å¿…é¡»æ”¯æŒå¤šç§å›æ”¾æ¨¡å¼ï¼š
    - **ç²¾ç¡®å›æ”¾**ï¼šå®Œå…¨å¤åˆ¶åŸå§‹è¯·æ±‚çš„æ‰€æœ‰ç»†èŠ‚
    - **å‚æ•°åŒ–å›æ”¾**ï¼šå…è®¸ä¿®æ”¹éƒ¨åˆ†å‚æ•°è¿›è¡Œå›æ”¾
    - **æ‰¹é‡å›æ”¾**ï¼šæ”¯æŒå¤šä¸ªè¯·æ±‚çš„æ‰¹é‡å›æ”¾
    - **å‹åŠ›å›æ”¾**ï¼šæ”¯æŒå¹¶å‘å›æ”¾è¿›è¡Œå‹åŠ›æµ‹è¯•
- **FR-23.3**: å¿…é¡»æä¾›å›æ”¾ç®¡ç†åŠŸèƒ½ï¼š
    - **å›æ”¾æ–‡ä»¶ç®¡ç†**ï¼šåˆ›å»ºã€åˆ é™¤ã€åˆ—å‡ºå›æ”¾æ–‡ä»¶
    - **å›æ”¾å†å²**ï¼šè®°å½•å›æ”¾æ‰§è¡Œçš„å†å²å’Œç»“æœ
    - **å›æ”¾åˆ†äº«**ï¼šæ”¯æŒå›æ”¾æ–‡ä»¶çš„å¯¼å…¥å¯¼å‡º
    - **å›æ”¾éªŒè¯**ï¼šéªŒè¯å›æ”¾æ–‡ä»¶çš„å®Œæ•´æ€§å’Œæœ‰æ•ˆæ€§
- **FR-23**: å¿…é¡»æä¾›ä¸šåŠ¡é€»è¾‘åˆ†ææ¨¡å¼ `--business-analysis`ï¼š
    - **æ•°æ®æµåˆ†æ**ï¼šè‡ªåŠ¨è¯†åˆ«å’Œå±•ç¤ºæ•°æ®çš„è¯»å–ã€å¤„ç†ã€å­˜å‚¨æµç¨‹
    - **ä¸šåŠ¡æ­¥éª¤è¯†åˆ«**ï¼šæ ¹æ®è°ƒç”¨æ¨¡å¼è‡ªåŠ¨è¯†åˆ«å¸¸è§çš„ä¸šåŠ¡æ­¥éª¤ï¼ˆå¦‚ï¼šå‚æ•°éªŒè¯â†’æ•°æ®æŸ¥è¯¢â†’ä¸šåŠ¡è®¡ç®—â†’ç»“æœå­˜å‚¨â†’å“åº”è¿”å›ï¼‰
    - **å…³é”®è·¯å¾„æ ‡è¯†**ï¼šé«˜äº®æ˜¾ç¤ºå½±å“å“åº”æ—¶é—´çš„å…³é”®è°ƒç”¨è·¯å¾„
    - **å¼‚å¸¸è·¯å¾„æ£€æµ‹**ï¼šè¯†åˆ«å’Œæ ‡è®°å¯èƒ½çš„å¼‚å¸¸å¤„ç†è·¯å¾„

## 5. å…¨å±€é…ç½®ç³»ç»Ÿ

### 5.1 æ¦‚è¿°

- **FR-23**: å¿…é¡»å¼•å…¥ä¸€ä¸ªæ–°çš„ã€é€šç”¨çš„é¡¶å±‚å‘½ä»¤ `config`ï¼Œç”¨äºç®¡ç†æ‰€æœ‰ Arthas å‘½ä»¤çš„é»˜è®¤å‚æ•°å€¼ã€‚
- **FR-24**: æ‰€æœ‰ç°æœ‰å’Œæœªæ¥çš„ Arthas å‘½ä»¤éƒ½å¿…é¡»èƒ½å¤Ÿä»è¿™ä¸ªæ–°çš„é…ç½®ç³»ç»Ÿä¸­è¯»å–å®ƒä»¬çš„é»˜è®¤å‚æ•°å€¼ã€‚

### 5.2 é…ç½®é”®å‘½åç©ºé—´

- **FR-25**: ä¸ºé˜²æ­¢å‘½ä»¤ä¹‹é—´çš„å‚æ•°åå†²çªï¼Œæ‰€æœ‰é…ç½®é”®éƒ½å¿…é¡»ä½¿ç”¨å‘½åç©ºé—´æ ¼å¼ï¼š`<command_name>.<parameter_name>`ã€‚
    - **ç¤ºä¾‹**:
        - `trace-flow .url-pattern`
        - `watch.express`
        - `options.unsafe`

### 5.3 é…ç½®åŠ è½½ä¼˜å…ˆçº§

- **FR-26**: å‚æ•°å€¼å¿…é¡»æŒ‰ç…§ä»¥ä¸‹é™åºä¼˜å…ˆçº§è§£æï¼š
    1.  **å‘½ä»¤è¡Œå‚æ•°**: æœ€é«˜ä¼˜å…ˆçº§ã€‚
    2.  **é¡¹ç›®çº§é…ç½®**: åº”ç”¨å·¥ä½œç›®å½•ä¸­çš„ `arthas.properties` æ–‡ä»¶ã€‚
    3.  **ç”¨æˆ·çº§é…ç½®**: ç”¨æˆ·ä¸»ç›®å½• (`~/.arthas/`) ä¸­çš„ `arthas.properties` æ–‡ä»¶ã€‚
    4.  **å‘½ä»¤å†…ç½®é»˜è®¤å€¼**: æœ€ä½ä¼˜å…ˆçº§ã€‚

#### 5.3.1 åŒå‘é…ç½®åŒæ­¥

- **FR-26.1**: å¿…é¡»æ”¯æŒé…ç½®çš„åŒå‘åŒæ­¥æœºåˆ¶ï¼š
    - **å‘½ä»¤è¡Œåˆ°æ–‡ä»¶**ï¼šé€šè¿‡ `config` å‘½ä»¤ä¿®æ”¹çš„é…ç½®å¿…é¡»è‡ªåŠ¨ä¿å­˜åˆ°ç›¸åº”çš„é…ç½®æ–‡ä»¶
    - **æ–‡ä»¶åˆ°å†…å­˜**ï¼šé…ç½®æ–‡ä»¶çš„ä¿®æ”¹å¿…é¡»èƒ½å¤Ÿè¢«ç¨‹åºå®æ—¶æ£€æµ‹å’ŒåŠ è½½
    - **å†²çªå¤„ç†**ï¼šå½“å‘½ä»¤è¡Œä¿®æ”¹å’Œæ–‡ä»¶ä¿®æ”¹åŒæ—¶å‘ç”Ÿæ—¶ï¼Œå¿…é¡»æœ‰æ˜ç¡®çš„å†²çªè§£å†³ç­–ç•¥
    - **å˜æ›´é€šçŸ¥**ï¼šé…ç½®å˜æ›´æ—¶å¿…é¡»é€šçŸ¥ç›¸å…³ç»„ä»¶é‡æ–°åŠ è½½é…ç½®
- **FR-26.2**: å¿…é¡»æ”¯æŒé…ç½®çš„æŒä¹…åŒ–ç­–ç•¥ï¼š
    - **è‡ªåŠ¨ä¿å­˜**ï¼šé…ç½®ä¿®æ”¹åè‡ªåŠ¨ä¿å­˜åˆ°å¯¹åº”å±‚çº§çš„é…ç½®æ–‡ä»¶
    - **ä¿å­˜ç¡®è®¤**ï¼šæä¾›é€‰é¡¹è®©ç”¨æˆ·ç¡®è®¤æ˜¯å¦ä¿å­˜é…ç½®ä¿®æ”¹
    - **å¤‡ä»½æœºåˆ¶**ï¼šä¿®æ”¹é…ç½®å‰è‡ªåŠ¨å¤‡ä»½åŸé…ç½®æ–‡ä»¶
    - **å›æ»šåŠŸèƒ½**ï¼šæ”¯æŒé…ç½®çš„å›æ»šæ“ä½œ
- **FR-26.3**: å¿…é¡»æ”¯æŒé…ç½®æ–‡ä»¶çš„å®æ—¶ç›‘æ§ï¼š
    - **æ–‡ä»¶ç›‘æ§**ï¼šç›‘æ§æ‰€æœ‰å±‚çº§çš„é…ç½®æ–‡ä»¶å˜åŒ–
    - **çƒ­é‡è½½**ï¼šé…ç½®æ–‡ä»¶ä¿®æ”¹åè‡ªåŠ¨é‡æ–°åŠ è½½ï¼Œæ— éœ€é‡å¯ç¨‹åº
    - **å˜æ›´æ£€æµ‹**ï¼šæ£€æµ‹é…ç½®çš„å…·ä½“å˜æ›´å†…å®¹å’Œå½±å“èŒƒå›´
    - **åŠ è½½çŠ¶æ€**ï¼šæä¾›é…ç½®åŠ è½½çŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯çš„åé¦ˆ

#### 5.3.2 åŒå‘åŒæ­¥å·¥ä½œæµç¨‹

- **FR-26.4**: å¿…é¡»å®šä¹‰æ¸…æ™°çš„åŒå‘åŒæ­¥å·¥ä½œæµç¨‹ï¼š
    - **å‘½ä»¤è¡Œä¿®æ”¹æµç¨‹**ï¼š
        1. ç”¨æˆ·é€šè¿‡ `config --set` å‘½ä»¤ä¿®æ”¹é…ç½®
        2. ç³»ç»Ÿæ›´æ–°å†…å­˜ä¸­çš„é…ç½®
        3. ç³»ç»Ÿè‡ªåŠ¨å°†é…ç½®ä¿å­˜åˆ°å¯¹åº”å±‚çº§çš„é…ç½®æ–‡ä»¶
        4. ç³»ç»Ÿé€šçŸ¥ç›¸å…³ç»„ä»¶é…ç½®å·²æ›´æ–°
    - **æ–‡ä»¶ä¿®æ”¹æµç¨‹**ï¼š
        1. ç”¨æˆ·ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶
        2. æ–‡ä»¶ç›‘æ§ç³»ç»Ÿæ£€æµ‹åˆ°æ–‡ä»¶å˜åŒ–
        3. ç³»ç»ŸéªŒè¯é…ç½®æ–‡ä»¶çš„æœ‰æ•ˆæ€§
        4. ç³»ç»Ÿé‡æ–°åŠ è½½é…ç½®åˆ°å†…å­˜
        5. ç³»ç»Ÿé€šçŸ¥ç›¸å…³ç»„ä»¶é…ç½®å·²æ›´æ–°
    - **å†²çªè§£å†³æµç¨‹**ï¼š
        1. æ£€æµ‹åˆ°é…ç½®å†²çªï¼ˆåŒæ—¶ä¿®æ”¹ï¼‰
        2. æ˜¾ç¤ºå†²çªè¯¦æƒ…å’Œå¯é€‰è§£å†³æ–¹æ¡ˆ
        3. ç”¨æˆ·é€‰æ‹©è§£å†³ç­–ç•¥ï¼ˆä¿ç•™å‘½ä»¤è¡Œä¿®æ”¹/ä¿ç•™æ–‡ä»¶ä¿®æ”¹/æ‰‹åŠ¨åˆå¹¶ï¼‰
        4. æ‰§è¡Œé€‰å®šçš„è§£å†³ç­–ç•¥
        5. æ›´æ–°é…ç½®å¹¶é€šçŸ¥ç›¸å…³ç»„ä»¶

### 5.4 config å‘½ä»¤åŠŸèƒ½

- **FR-27**: `config` å‘½ä»¤å¿…é¡»æ”¯æŒä»¥ä¸‹æ“ä½œï¼š
    - **æŸ¥çœ‹**:
        - `config --list`: æ˜¾ç¤ºæ‰€æœ‰å½“å‰ç”Ÿæ•ˆçš„é…ç½®é”®åŠå…¶æœ€ç»ˆå€¼ã€‚
        - `config <key>`: æ˜¾ç¤ºç‰¹å®šé”®çš„æœ€ç»ˆå€¼ã€‚
    - **è®¾ç½®/æ›´æ–°**:
        - `config <key> <value>`: åœ¨é¡¹ç›®çº§é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹ã€‚
        - `config --global <key> <value>`: åœ¨ç”¨æˆ·çº§é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹ã€‚
    - **å–æ¶ˆè®¾ç½®**:
        - `config --unset <key>`: ä»é¡¹ç›®çº§é…ç½®æ–‡ä»¶ä¸­ç§»é™¤ä¸€ä¸ªé”®ã€‚
        - `config --global --unset <key>`: ä»ç”¨æˆ·çº§é…ç½®æ–‡ä»¶ä¸­ç§»é™¤ä¸€ä¸ªé”®ã€‚
    - **åŒå‘åŒæ­¥æ“ä½œ**:
        - `config --save [--level user|project|global]`: å°†å½“å‰å†…å­˜é…ç½®ä¿å­˜åˆ°æŒ‡å®šå±‚çº§çš„é…ç½®æ–‡ä»¶
        - `config --reload [--level user|project|global]`: ä»é…ç½®æ–‡ä»¶é‡æ–°åŠ è½½é…ç½®
        - `config --sync-status`: æ˜¾ç¤ºå†…å­˜é…ç½®ä¸æ–‡ä»¶é…ç½®çš„åŒæ­¥çŠ¶æ€
        - `config --force-sync [--direction file-to-memory|memory-to-file]`: å¼ºåˆ¶åŒæ­¥é…ç½®
        - `config --backup [--level user|project|global]`: å¤‡ä»½å½“å‰é…ç½®æ–‡ä»¶
        - `config --restore <backup-file>`: ä»å¤‡ä»½æ–‡ä»¶æ¢å¤é…ç½®
        - `config --watch`: å¯ç”¨é…ç½®æ–‡ä»¶ç›‘æ§æ¨¡å¼ï¼Œå®æ—¶æ˜¾ç¤ºé…ç½®å˜æ›´

### 5.5 é…ç½®æ–‡ä»¶æ ¼å¼

- **FR-28**: é…ç½®æ–‡ä»¶å¿…é¡»ä½¿ç”¨æ ‡å‡†çš„ Java `.properties` é”®å€¼å¯¹æ ¼å¼ã€‚

## 6. ä¸“ç”¨å‘½ä»¤åŠŸèƒ½

### 6.1 è¯·æ±‚å›æ”¾å‘½ä»¤

- **FR-29**: å¿…é¡»æä¾›ä¸“é—¨çš„å›æ”¾å‘½ä»¤ `replay` (åˆ«å `rp`)ï¼š
    - **å›æ”¾æ–‡ä»¶ç”Ÿæˆ**ï¼š
        - `tf --save-replay <replay-file>` åœ¨è·Ÿè¸ªæ—¶ä¿å­˜å›æ”¾æ•°æ®
        - `tf --auto-replay` è‡ªåŠ¨ä¸ºæ¯æ¬¡è·Ÿè¸ªç”Ÿæˆå›æ”¾æ–‡ä»¶
    - **å›æ”¾æ‰§è¡Œ**ï¼š
        - `replay <replay-file>` æ‰§è¡ŒæŒ‡å®šçš„å›æ”¾æ–‡ä»¶
        - `replay <replay-file> --params key1=value1,key2=value2` å‚æ•°åŒ–å›æ”¾
        - `replay <replay-file> --count N` é‡å¤å›æ”¾Næ¬¡
        - `replay <replay-file> --concurrent N` å¹¶å‘å›æ”¾Nä¸ªçº¿ç¨‹
    - **å›æ”¾ç®¡ç†**ï¼š
        - `replay --list` åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„å›æ”¾æ–‡ä»¶
        - `replay --info <replay-file>` æ˜¾ç¤ºå›æ”¾æ–‡ä»¶è¯¦ç»†ä¿¡æ¯
        - `replay --delete <replay-file>` åˆ é™¤å›æ”¾æ–‡ä»¶
        - `replay --export <replay-file> <target-file>` å¯¼å‡ºå›æ”¾æ–‡ä»¶
        - `replay --import <source-file>` å¯¼å…¥å›æ”¾æ–‡ä»¶
    - **å›æ”¾å¯¹æ¯”**ï¼š
        - `replay <replay-file> --compare` å¯¹æ¯”å›æ”¾ç»“æœä¸åŸå§‹ç»“æœ
        - `replay <replay-file> --trace` åœ¨å›æ”¾æ—¶åŒæ—¶è¿›è¡Œè·Ÿè¸ª
        - `replay <replay-file> --diff-output <file>` å°†å·®å¼‚è¾“å‡ºåˆ°æ–‡ä»¶

### 6.2 è·Ÿè¸ªç»“æœä¿å­˜å’Œå¯¹æ¯”å‘½ä»¤

- **FR-30**: å¿…é¡»æä¾›è·Ÿè¸ªç»“æœä¿å­˜å’Œå¯¹æ¯”çš„å‘½ä»¤åŠŸèƒ½ï¼š
    - **ç»“æœä¿å­˜**ï¼š
        - `tf --save-trace <trace-file>` å°†è·Ÿè¸ªç»“æœä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶
        - `tf --auto-save-trace` è‡ªåŠ¨ä¿å­˜æ¯æ¬¡è·Ÿè¸ªç»“æœ
        - `tf --save-format json|xml|text` æŒ‡å®šä¿å­˜æ ¼å¼
        - `tf --compress` å‹ç¼©ä¿å­˜è·Ÿè¸ªç»“æœ
    - **ç»“æœå¯¹æ¯”**ï¼š
        - `trace-diff <trace-file1> <trace-file2>` å¯¹æ¯”ä¸¤ä¸ªè·Ÿè¸ªç»“æœ
        - `trace-diff <trace-file> --baseline <baseline-file>` ä¸åŸºçº¿ç»“æœå¯¹æ¯”
        - `trace-diff --list <pattern>` æ‰¹é‡å¯¹æ¯”åŒ¹é…çš„è·Ÿè¸ªç»“æœ
        - `trace-diff --output <report-file>` å°†å¯¹æ¯”ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶
    - **ç»“æœç®¡ç†**ï¼š
        - `trace-list` åˆ—å‡ºæ‰€æœ‰ä¿å­˜çš„è·Ÿè¸ªç»“æœ
        - `trace-info <trace-file>` æ˜¾ç¤ºè·Ÿè¸ªç»“æœè¯¦ç»†ä¿¡æ¯
        - `trace-search --url <pattern>` æ ¹æ®URLæ¨¡å¼æœç´¢è·Ÿè¸ªç»“æœ
        - `trace-search --time <time-range>` æ ¹æ®æ—¶é—´èŒƒå›´æœç´¢è·Ÿè¸ªç»“æœ
        - `trace-tag <trace-file> <tag>` ä¸ºè·Ÿè¸ªç»“æœæ·»åŠ æ ‡ç­¾
        - `trace-delete <trace-file>` åˆ é™¤è·Ÿè¸ªç»“æœæ–‡ä»¶

#### 6.2.1 è·Ÿè¸ªç»“æœæ–‡ä»¶æ ¼å¼

- **FR-30.1**: è·Ÿè¸ªç»“æœæ–‡ä»¶å¿…é¡»ä½¿ç”¨JSONæ ¼å¼ï¼ŒåŒ…å«ä»¥ä¸‹ç»“æ„ï¼š
```json
{
  "version": "1.0",
  "metadata": {
    "traceId": "a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8",
    "businessTraceId": "ORDER_12345",
    "timestamp": "2023-10-27T14:30:25.123Z",
    "duration": 1250,
    "url": "http://localhost:8080/api/order/create",
    "method": "POST",
    "statusCode": 200,
    "tags": ["order", "create", "production"],
    "environment": {
      "profile": "production",
      "version": "1.2.3",
      "hostname": "app-server-01"
    }
  },
  "request": {
    "headers": {
      "Content-Type": "application/json",
      "Authorization": "Bearer ***"
    },
    "parameters": {
      "userId": 12345,
      "productId": 67890,
      "quantity": 2
    },
    "body": "{ \"userId\": 12345, \"items\": [...] }"
  },
  "response": {
    "statusCode": 200,
    "headers": {
      "Content-Type": "application/json"
    },
    "body": "{ \"success\": true, \"orderId\": \"ORDER_12345\" }"
  },
  "timeline": {
    "queueWaitTime": 45,
    "processingTime": 1205,
    "totalTime": 1250
  },
  "traceTree": {
    "root": {
      "type": "HTTP_REQUEST",
      "name": "POST /api/order/create",
      "startTime": 0,
      "endTime": 1250,
      "children": [
        {
          "type": "DATABASE",
          "name": "SELECT * FROM users WHERE id = ?",
          "startTime": 50,
          "endTime": 120,
          "parameters": [12345],
          "result": {
            "affectedRows": 1,
            "executionTime": 70
          },
          "stackTrace": [
            "com.example.service.UserService.findById(UserService.java:45)",
            "com.example.controller.OrderController.createOrder(OrderController.java:28)"
          ]
        },
        {
          "type": "CACHE",
          "name": "GET product:67890",
          "startTime": 130,
          "endTime": 135,
          "parameters": ["product:67890"],
          "result": {
            "hit": true,
            "value": "{ \"id\": 67890, \"price\": 99.99 }"
          }
        }
      ]
    }
  },
  "statistics": {
    "totalOperations": 15,
    "databaseOperations": 8,
    "cacheOperations": 4,
    "httpOperations": 3,
    "slowOperations": 2,
    "errors": 0
  }
}
```

#### 6.1.1 å›æ”¾æ–‡ä»¶æ ¼å¼

- **FR-29.1**: å›æ”¾æ–‡ä»¶å¿…é¡»ä½¿ç”¨JSONæ ¼å¼ï¼ŒåŒ…å«ä»¥ä¸‹ç»“æ„ï¼š
```json
{
  "version": "1.0",
  "metadata": {
    "originalTraceId": "a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8",
    "recordTime": "2023-10-27T14:30:25.123Z",
    "description": "ç”¨æˆ·ç™»å½•è¯·æ±‚å›æ”¾",
    "tags": ["login", "authentication"]
  },
  "request": {
    "url": "http://localhost:8080/api/user/login",
    "method": "POST",
    "headers": {
      "Content-Type": "application/json",
      "User-Agent": "Mozilla/5.0...",
      "Authorization": "Bearer ${token}"
    },
    "body": {
      "username": "${username}",
      "password": "${password}"
    },
    "parameters": {
      "query": {},
      "path": {},
      "form": {}
    }
  },
  "context": {
    "timestamp": 1698412225123,
    "environment": {
      "java.version": "11.0.16",
      "spring.profiles.active": "dev"
    },
    "variables": {
      "token": "eyJhbGciOiJIUzI1NiIs...",
      "username": "testuser",
      "password": "testpass123"
    }
  },
  "expectedResponse": {
    "statusCode": 200,
    "headers": {
      "Content-Type": "application/json"
    },
    "body": {
      "success": true,
      "userId": 12345,
      "token": "new-token-value"
    }
  },
  "dependencies": {
    "database": {
      "queries": [
        {
          "sql": "SELECT * FROM users WHERE username = ?",
          "parameters": ["testuser"],
          "result": "mock-result-data"
        }
      ]
    },
    "cache": {
      "operations": [
        {
          "command": "GET user:session:12345",
          "result": null
        }
      ]
    }
  }
}
```

### 5.6 æ¢é’ˆé…ç½®ç®¡ç†

- **FR-29**: `config` å‘½ä»¤å¿…é¡»æ”¯æŒæ¢é’ˆé…ç½®çš„ç®¡ç†ï¼š
    - **æ¢é’ˆé…ç½®æŸ¥çœ‹**ï¼š
        - `config --list-probes`: æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„æ¢é’ˆåŠå…¶çŠ¶æ€
        - `config --probe-config <probe-name>`: æ˜¾ç¤ºç‰¹å®šæ¢é’ˆçš„é…ç½®è¯¦æƒ…
        - `config --list-probe-groups`: æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„æ¢é’ˆç»„åˆ
    - **æ¢é’ˆé…ç½®ç®¡ç†**ï¼š
        - `config --enable-probe <probe-name>`: å¯ç”¨æŒ‡å®šçš„æ¢é’ˆ
        - `config --disable-probe <probe-name>`: ç¦ç”¨æŒ‡å®šçš„æ¢é’ˆ
        - `config --reload-probes`: é‡æ–°åŠ è½½æ‰€æœ‰æ¢é’ˆé…ç½®
        - `config --set-default-probes <probe-group>`: è®¾ç½®é»˜è®¤çš„æ¢é’ˆç»„åˆ
        - `config --save-probe-config`: å°†å½“å‰æ¢é’ˆé…ç½®ä¿å­˜åˆ°æ–‡ä»¶
        - `config --sync-probe-config`: åŒæ­¥å†…å­˜å’Œæ–‡ä»¶ä¸­çš„æ¢é’ˆé…ç½®
    - **jaråŒ…ç‰ˆæœ¬ç®¡ç†**ï¼š
        - `config --detect-jar-versions`: æ£€æµ‹å½“å‰classpathä¸­çš„jaråŒ…ç‰ˆæœ¬
        - `config --check-probe-compatibility`: æ£€æŸ¥æ¢é’ˆé…ç½®ä¸jaråŒ…ç‰ˆæœ¬çš„å…¼å®¹æ€§
        - `config --list-version-conflicts`: åˆ—å‡ºç‰ˆæœ¬å†²çªçš„jaråŒ…å’Œæ¢é’ˆ
        - `config --generate-version-report`: ç”Ÿæˆè¯¦ç»†çš„ç‰ˆæœ¬å…¼å®¹æ€§æŠ¥å‘Š
        - `config --set-version-strategy <strategy>`: è®¾ç½®ç‰ˆæœ¬å†²çªå¤„ç†ç­–ç•¥
        - `config --validate-jar-versions <probe-name>`: éªŒè¯æŒ‡å®šæ¢é’ˆçš„jaråŒ…ç‰ˆæœ¬è¦æ±‚
    - **é…ç½®æ–‡ä»¶ç®¡ç†**ï¼š
        - `config --probe-config-path`: æ˜¾ç¤ºæ¢é’ˆé…ç½®æ–‡ä»¶ç›®å½•è·¯å¾„
        - `config --list-probe-files`: åˆ—å‡ºæ‰€æœ‰æ¢é’ˆé…ç½®æ–‡ä»¶
        - `config --validate-probe-config <probe-file>`: éªŒè¯æŒ‡å®šæ¢é’ˆé…ç½®æ–‡ä»¶çš„æ­£ç¡®æ€§
        - `config --validate-all-probes`: éªŒè¯æ‰€æœ‰æ¢é’ˆé…ç½®æ–‡ä»¶
        - `config --generate-probe-template <category>`: ç”Ÿæˆæ¢é’ˆé…ç½®æ¨¡æ¿
        - `config --create-probe <probe-name>`: åˆ›å»ºæ–°çš„æ¢é’ˆé…ç½®æ–‡ä»¶
        - `config --copy-probe <source> <target>`: å¤åˆ¶æ¢é’ˆé…ç½®æ–‡ä»¶
        - `config --delete-probe <probe-file>`: åˆ é™¤æ¢é’ˆé…ç½®æ–‡ä»¶
- **FR-30**: å¿…é¡»æ”¯æŒæ¢é’ˆé…ç½®çš„åˆ†å±‚ç®¡ç†ï¼Œæ¯ä¸ªæ¢é’ˆä½¿ç”¨ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼š
    - **ç³»ç»Ÿçº§æ¢é’ˆé…ç½®**ï¼š`$ARTHAS_HOME/probes/` ç›®å½•ä¸‹çš„ç‹¬ç«‹é…ç½®æ–‡ä»¶
        - `$ARTHAS_HOME/probes/database-probe.json`
        - `$ARTHAS_HOME/probes/cache-probe.json`
        - `$ARTHAS_HOME/probes/http-client-probe.json`
        - `$ARTHAS_HOME/probes/file-operations-probe.json`
    - **ç”¨æˆ·çº§æ¢é’ˆé…ç½®**ï¼š`~/.arthas/probes/` ç›®å½•ä¸‹çš„ç‹¬ç«‹é…ç½®æ–‡ä»¶
        - `~/.arthas/probes/database-probe.json`
        - `~/.arthas/probes/custom-probe.json`
    - **é¡¹ç›®çº§æ¢é’ˆé…ç½®**ï¼š`./probes/` ç›®å½•ä¸‹çš„ç‹¬ç«‹é…ç½®æ–‡ä»¶
        - `./probes/database-probe.json`
        - `./probes/business-probe.json`
    - **é…ç½®ä¼˜å…ˆçº§**ï¼šé¡¹ç›®çº§ > ç”¨æˆ·çº§ > ç³»ç»Ÿçº§
    - **é…ç½®åˆå¹¶**ï¼šåŒåæ¢é’ˆé…ç½®æ–‡ä»¶æŒ‰ä¼˜å…ˆçº§è¦†ç›–ï¼Œæ”¯æŒæ¢é’ˆçš„å¯ç”¨/ç¦ç”¨æ§åˆ¶
- **FR-30.1**: å¿…é¡»æ”¯æŒæ¢é’ˆé…ç½®çš„é«˜çº§ç‰¹æ€§ï¼š
    - **æ¢é’ˆç»§æ‰¿**ï¼šé€šè¿‡ `extends` å…³é”®å­—ç»§æ‰¿å…¶ä»–æ¢é’ˆçš„é…ç½®
    - **æ¡ä»¶å¯ç”¨**ï¼šåŸºäºç¯å¢ƒå˜é‡æˆ–ç³»ç»Ÿå±æ€§çš„æ¡ä»¶å¯ç”¨
    - **é…ç½®æ¨¡æ¿**ï¼šæ”¯æŒé…ç½®ä¸­çš„å˜é‡æ›¿æ¢å’Œæ¨¡æ¿è¯­æ³•
    - **é…ç½®éªŒè¯**ï¼šæ¢é’ˆé…ç½®çš„è¯­æ³•å’Œè¯­ä¹‰éªŒè¯
- **FR-31**: å¿…é¡»æä¾›æ¢é’ˆé…ç½®çš„æ¨¡æ¿å’Œå‘å¯¼ï¼š
    - **é…ç½®æ¨¡æ¿ç”Ÿæˆ**ï¼š`config --generate-probe-template <type>` ç”Ÿæˆå¸¸è§ç±»å‹çš„æ¢é’ˆé…ç½®æ¨¡æ¿
    - **äº¤äº’å¼é…ç½®å‘å¯¼**ï¼šé€šè¿‡é—®ç­”æ–¹å¼å¸®åŠ©ç”¨æˆ·åˆ›å»ºæ¢é’ˆé…ç½®
    - **é…ç½®éªŒè¯å’Œæç¤º**ï¼šå®æ—¶éªŒè¯é…ç½®æ­£ç¡®æ€§å¹¶æä¾›ä¿®æ”¹å»ºè®®
- **FR-31.1**: å¿…é¡»æ”¯æŒåˆ†ç¦»å¼æ¢é’ˆé…ç½®æ–‡ä»¶çš„ç®¡ç†ï¼š
    - **ç‹¬ç«‹é…ç½®æ–‡ä»¶**ï¼šæ¯ä¸ªæ¢é’ˆä½¿ç”¨ç‹¬ç«‹çš„JSONé…ç½®æ–‡ä»¶ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
    - **æ–‡ä»¶å‘½åè§„èŒƒ**ï¼šæ¢é’ˆé…ç½®æ–‡ä»¶å¿…é¡»éµå¾ª `<probe-name>-probe.json` çš„å‘½åè§„èŒƒ
    - **ç›®å½•ç»“æ„ç®¡ç†**ï¼šæ”¯æŒå¤šå±‚çº§ç›®å½•ç»“æ„ï¼Œç³»ç»Ÿçº§ã€ç”¨æˆ·çº§ã€é¡¹ç›®çº§åˆ†ç¦»ç®¡ç†
    - **é…ç½®æ–‡ä»¶å‘ç°**ï¼šè‡ªåŠ¨æ‰«æå’Œå‘ç°æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ¢é’ˆé…ç½®æ–‡ä»¶
    - **é…ç½®æ–‡ä»¶éªŒè¯**ï¼šæ”¯æŒå•ä¸ªæ–‡ä»¶å’Œæ‰¹é‡æ–‡ä»¶çš„é…ç½®éªŒè¯
    - **é…ç½®æ–‡ä»¶æ“ä½œ**ï¼šæ”¯æŒé…ç½®æ–‡ä»¶çš„åˆ›å»ºã€å¤åˆ¶ã€åˆ é™¤ã€é‡å‘½åç­‰æ“ä½œ

### 5.7 é…ç½®é©±åŠ¨çš„åœºæ™¯ç®¡ç†

- **FR-32**: å¿…é¡»æ”¯æŒé…ç½®é©±åŠ¨çš„åœºæ™¯å®šä¹‰å’Œç®¡ç†ï¼š
    - **åœºæ™¯é…ç½®æ–‡ä»¶**ï¼šé€šè¿‡JSONé…ç½®æ–‡ä»¶å®šä¹‰åœºæ™¯
    - **åœºæ™¯çƒ­åŠ è½½**ï¼šæ”¯æŒåœºæ™¯é…ç½®æ–‡ä»¶çš„åŠ¨æ€åŠ è½½å’Œæ›´æ–°
    - **åœºæ™¯ç»§æ‰¿**ï¼šæ”¯æŒåœºæ™¯é…ç½®çš„ç»§æ‰¿å’Œæ‰©å±•æœºåˆ¶
    - **åœºæ™¯å‚æ•°åŒ–**ï¼šæ”¯æŒåœºæ™¯é…ç½®çš„å‚æ•°åŒ–ï¼Œç”¨æˆ·åªéœ€æä¾›å…³é”®å‚æ•°
    - **åœºæ™¯ç»„åˆ**ï¼šæ”¯æŒå¤šä¸ªåœºæ™¯çš„ç»„åˆä½¿ç”¨
- **FR-32.1**: å¿…é¡»æä¾›åœºæ™¯é…ç½®æ–‡ä»¶çš„åˆ†å±‚ç®¡ç†ï¼š
    - **ç³»ç»Ÿçº§åœºæ™¯**ï¼š`$ARTHAS_HOME/scenarios/system-scenarios.json`
    - **ç”¨æˆ·çº§åœºæ™¯**ï¼š`~/.arthas/scenarios/user-scenarios.json`
    - **é¡¹ç›®çº§åœºæ™¯**ï¼š`./arthas-scenarios.json` æˆ– `./scenarios/`ç›®å½•
    - **é…ç½®ä¼˜å…ˆçº§**ï¼šé¡¹ç›®çº§ > ç”¨æˆ·çº§ > ç³»ç»Ÿçº§
    - **é…ç½®åˆå¹¶**ï¼šæ”¯æŒåœºæ™¯é…ç½®çš„æ™ºèƒ½åˆå¹¶å’Œè¦†ç›–
- **FR-32.2**: å¿…é¡»æ”¯æŒåœºæ™¯é…ç½®çš„é«˜çº§ç‰¹æ€§ï¼š
    - **åœºæ™¯ç»§æ‰¿**ï¼šé€šè¿‡ `extends` å…³é”®å­—ç»§æ‰¿å…¶ä»–åœºæ™¯çš„é…ç½®
    - **æ¡ä»¶é…ç½®**ï¼šåŸºäºå‚æ•°å€¼çš„æ¡ä»¶é…ç½®é€»è¾‘
    - **é…ç½®æ¨¡æ¿**ï¼šæ”¯æŒé…ç½®ä¸­çš„å˜é‡æ›¿æ¢å’Œæ¨¡æ¿è¯­æ³•
    - **é…ç½®éªŒè¯**ï¼šåœºæ™¯é…ç½®çš„è¯­æ³•å’Œè¯­ä¹‰éªŒè¯
- **FR-33**: å¿…é¡»æä¾›æ ‡å‡†çš„åœºæ™¯é…ç½®æ ¼å¼å’Œç»“æ„ï¼š
    - **é…ç½®æ–‡ä»¶æ ¼å¼**ï¼šä½¿ç”¨JSONæ ¼å¼å®šä¹‰åœºæ™¯é…ç½®
    - **åœºæ™¯å®šä¹‰ç»“æ„**ï¼šåŒ…å«åœºæ™¯å…ƒæ•°æ®ã€å‚æ•°å®šä¹‰ã€é…ç½®æ¨¡æ¿
    - **å‚æ•°ç±»å‹æ”¯æŒ**ï¼šå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ã€æ•°ç»„ã€å¯¹è±¡ç­‰ç±»å‹
    - **æ¡ä»¶é…ç½®**ï¼šæ”¯æŒåŸºäºå‚æ•°å€¼çš„æ¡ä»¶é…ç½®
    - **é…ç½®éªŒè¯**ï¼šåœºæ™¯é…ç½®çš„è¯­æ³•å’Œè¯­ä¹‰éªŒè¯
- **FR-33.1**: ç³»ç»Ÿçº§åœºæ™¯é…ç½®å¿…é¡»åŒ…æ‹¬ä»¥ä¸‹å¸¸è§é—®é¢˜ç±»å‹ï¼š
    - **æ€§èƒ½é—®é¢˜åœºæ™¯**ï¼š
        - `slow-request`ï¼šè¯·æ±‚å“åº”æ…¢é—®é¢˜æ’æŸ¥
        - `high-latency`ï¼šé«˜å»¶è¿Ÿé—®é¢˜æ’æŸ¥
        - `resource-intensive`ï¼šèµ„æºå¯†é›†å‹æ“ä½œæ’æŸ¥
        - `db-slow`ï¼šæ•°æ®åº“æ…¢æŸ¥è¯¢é—®é¢˜æ’æŸ¥
    - **æ•°æ®é—®é¢˜åœºæ™¯**ï¼š
        - `data-corruption`ï¼šæ•°æ®æŸåé—®é¢˜æ’æŸ¥
        - `data-missing`ï¼šæ•°æ®ä¸¢å¤±é—®é¢˜æ’æŸ¥
        - `data-modification`ï¼šæ•°æ®è¢«æ„å¤–ä¿®æ”¹æ’æŸ¥
        - `data-inconsistency`ï¼šæ•°æ®ä¸ä¸€è‡´é—®é¢˜æ’æŸ¥
    - **æ‰§è¡Œé€»è¾‘åœºæ™¯**ï¼š
        - `logic-error`ï¼šæ‰§è¡Œé€»è¾‘é”™è¯¯æ’æŸ¥
        - `execution-trace`ï¼šæ‰§è¡Œæµç¨‹è·Ÿè¸ª
        - `integration-debug`ï¼šç³»ç»Ÿé›†æˆè°ƒè¯•
        - `method-verification`ï¼šæ–¹æ³•æ‰§è¡ŒéªŒè¯
    - **ç³»ç»Ÿé—®é¢˜åœºæ™¯**ï¼š
        - `error-500`ï¼š5xxé”™è¯¯é—®é¢˜æ’æŸ¥
        - `timeout-issue`ï¼šè¶…æ—¶é—®é¢˜æ’æŸ¥
        - `connection-issue`ï¼šè¿æ¥é—®é¢˜æ’æŸ¥
        - `exception-trace`ï¼šå¼‚å¸¸è¿½è¸ªæ’æŸ¥
- **FR-34**: å¿…é¡»æä¾›åœºæ™¯é…ç½®çš„ç®¡ç†å‘½ä»¤ï¼š
    - **åœºæ™¯åˆ—è¡¨**ï¼š`tf --list-scenarios` æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨åœºæ™¯
    - **åœºæ™¯è¯¦æƒ…**ï¼š`tf --scenario-info <scenario-name>` æ˜¾ç¤ºåœºæ™¯çš„è¯¦ç»†é…ç½®
    - **åœºæ™¯åº”ç”¨**ï¼š`tf --scenario <scenario-name> [parameters]` åº”ç”¨æŒ‡å®šåœºæ™¯
    - **åœºæ™¯é…ç½®ç®¡ç†**ï¼š
        - `config --scenario-config-path` æ˜¾ç¤ºåœºæ™¯é…ç½®æ–‡ä»¶è·¯å¾„
        - `config --reload-scenarios` é‡æ–°åŠ è½½æ‰€æœ‰åœºæ™¯é…ç½®
        - `config --validate-scenario-config <file>` éªŒè¯åœºæ™¯é…ç½®æ–‡ä»¶
        - `config --generate-scenario-template <type>` ç”Ÿæˆåœºæ™¯é…ç½®æ¨¡æ¿
        - `config --save-scenario-config` å°†å½“å‰åœºæ™¯é…ç½®ä¿å­˜åˆ°æ–‡ä»¶
        - `config --sync-scenario-config` åŒæ­¥å†…å­˜å’Œæ–‡ä»¶ä¸­çš„åœºæ™¯é…ç½®
    - **å›æ”¾é…ç½®ç®¡ç†**ï¼š
        - `config --list-replays` æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„å›æ”¾æ–‡ä»¶
        - `config --replay-info <replay-file>` æ˜¾ç¤ºå›æ”¾æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯
        - `config --validate-replay <replay-file>` éªŒè¯å›æ”¾æ–‡ä»¶çš„æœ‰æ•ˆæ€§
        - `config --replay-config-path` æ˜¾ç¤ºå›æ”¾æ–‡ä»¶å­˜å‚¨è·¯å¾„
    - **è·Ÿè¸ªç»“æœç®¡ç†**ï¼š
        - `config --list-traces` æ˜¾ç¤ºæ‰€æœ‰ä¿å­˜çš„è·Ÿè¸ªç»“æœ
        - `config --trace-info <trace-file>` æ˜¾ç¤ºè·Ÿè¸ªç»“æœçš„è¯¦ç»†ä¿¡æ¯
        - `config --trace-storage-path` æ˜¾ç¤ºè·Ÿè¸ªç»“æœå­˜å‚¨è·¯å¾„
        - `config --cleanup-traces [--older-than <days>]` æ¸…ç†è¿‡æœŸçš„è·Ÿè¸ªç»“æœ
    - **è‡ªå®šä¹‰åœºæ™¯**ï¼šæ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶åˆ›å»ºå’Œä¿®æ”¹è‡ªå®šä¹‰åœºæ™¯

### 5.8 åœºæ™¯é…ç½®æ–‡ä»¶æ ¼å¼å’Œç¤ºä¾‹

**åœºæ™¯é…ç½®æ–‡ä»¶ç»“æ„ (`scenarios.json`)ï¼š**
```json
{
  "version": "1.0",
  "scenarios": {
    "data-modification-trace": {
      "metadata": {
        "name": "æ•°æ®ä¿®æ”¹è¿½è¸ª",
        "description": "è¿½è¸ªç‰¹å®šæ•°æ®çš„æ‰€æœ‰ä¿®æ”¹æ“ä½œï¼Œå¿«é€Ÿå®šä½ä¿®æ”¹æºå¤´",
        "category": "data-issues",
        "tags": ["data-modification", "debugging", "trace"],
        "author": "system",
        "version": "1.0"
      },
      "parameters": [
        {
          "name": "targetValue",
          "type": "string",
          "required": true,
          "description": "è¦è¿½è¸ªçš„ç›®æ ‡å€¼ï¼ˆå¦‚IDã€å…³é”®å­—ç­‰ï¼‰"
        },
        {
          "name": "timeRange",
          "type": "string",
          "required": false,
          "default": "1h",
          "description": "è·Ÿè¸ªæ—¶é—´èŒƒå›´",
          "options": ["5m", "15m", "1h", "6h", "24h"]
        }
      ],
      "config": {
        "probes": ["database", "cache", "http-client"],
        "filter-value": "${targetValue}",
        "filter-operations": ["INSERT", "UPDATE", "DELETE"],
        "auto-stack-trace": true,
        "stack-trace-threshold": 0,
        "output-format": "detailed",
        "business-analysis": true,
        "time-range": "${timeRange}"
      },
      "examples": [
        {
          "description": "è¿½è¸ªå€¼12345çš„æ•°æ®ä¿®æ”¹",
          "command": "tf --scenario data-modification-trace --targetValue 12345"
        },
        {
          "description": "è¿½è¸ªå€¼ABC123æœ€è¿‘15åˆ†é’Ÿçš„æ•°æ®ä¿®æ”¹",
          "command": "tf --scenario data-modification-trace --targetValue ABC123 --timeRange 15m"
        }
      ]
    },

    "slow-request": {
      "metadata": {
        "name": "è¯·æ±‚å“åº”æ…¢é—®é¢˜æ’æŸ¥",
        "description": "åˆ†æè¯·æ±‚å“åº”æ…¢çš„åŸå› ï¼ŒåŒ…æ‹¬é˜Ÿåˆ—ç­‰å¾…ã€æ•°æ®åº“æŸ¥è¯¢ã€å¤–éƒ¨è°ƒç”¨ç­‰",
        "category": "performance-issues",
        "tags": ["request", "performance", "slow-response"]
      },
      "parameters": [
        {
          "name": "urlPattern",
          "type": "string",
          "required": true,
          "description": "è¦åˆ†æçš„API URLæ¨¡å¼",
          "validation": {
            "pattern": "^/.*",
            "message": "URLæ¨¡å¼å¿…é¡»ä»¥/å¼€å¤´"
          }
        },
        {
          "name": "threshold",
          "type": "integer",
          "default": 1000,
          "description": "æ…¢æŸ¥è¯¢é˜ˆå€¼(ms)",
          "validation": {
            "min": 100,
            "max": 60000
          }
        }
      ],
      "config": {
        "probes": ["database", "cache", "http-client", "file-operations"],
        "url-pattern": "${urlPattern}",
        "stack-trace-threshold": "${threshold}",
        "business-analysis": true,
        "output-format": "performance-focused",
        "capture-queue-time": true
      },
      "examples": [
        {
          "description": "åˆ†æç‰¹å®šAPIçš„æ€§èƒ½é—®é¢˜",
          "command": "tf --scenario slow-request --urlPattern '/api/data/**' --threshold 500"
        }
      ]
    },

    "data-corruption": {
      "metadata": {
        "name": "æ•°æ®æŸåé—®é¢˜æ’æŸ¥",
        "description": "è¿½è¸ªæ•°æ®å¤„ç†è¿‡ç¨‹ï¼Œæ£€æŸ¥æ•°æ®åœ¨å„ç¯èŠ‚çš„å®Œæ•´æ€§",
        "category": "data-issues",
        "tags": ["data", "corruption", "integrity"]
      },
      "parameters": [
        {
          "name": "dataId",
          "type": "string",
          "required": true,
          "description": "è¦è¿½è¸ªçš„æ•°æ®ID"
        }
      ],
      "config": {
        "probes": ["database", "cache", "http-client", "file-operations"],
        "filter-value": "dataId=${dataId} OR id=${dataId}",
        "capture-parameters": true,
        "capture-return-values": true,
        "data-validation": true,
        "auto-stack-trace": true
      },
      "examples": [
        {
          "description": "è¿½è¸ªè®¢å•æ•°æ®çš„å¤„ç†è¿‡ç¨‹",
          "command": "tf --scenario data-corruption --dataId 'ORDER_123456'"
        }
      ]
    },
    "debug-with-replay": {
      "metadata": {
        "name": "è°ƒè¯•å›æ”¾åœºæ™¯",
        "description": "è·Ÿè¸ªè¯·æ±‚å¹¶ç”Ÿæˆå›æ”¾æ–‡ä»¶ï¼Œä¾¿äºåç»­è°ƒè¯•",
        "category": "debugging",
        "tags": ["debug", "replay", "troubleshooting"]
      },
      "parameters": [
        {
          "name": "urlPattern",
          "type": "string",
          "required": true,
          "description": "è¦è·Ÿè¸ªçš„URLæ¨¡å¼"
        },
        {
          "name": "replayFile",
          "type": "string",
          "required": false,
          "description": "å›æ”¾æ–‡ä»¶åç§°ï¼Œé»˜è®¤è‡ªåŠ¨ç”Ÿæˆ"
        }
      ],
      "config": {
        "probes": ["database", "cache", "http-client"],
        "url-pattern": "${urlPattern}",
        "save-replay": "${replayFile}",
        "auto-replay": true,
        "capture-parameters": true,
        "capture-return-values": true,
        "business-analysis": true
      },
      "examples": [
        {
          "description": "è·Ÿè¸ªç™»å½•è¯·æ±‚å¹¶ç”Ÿæˆå›æ”¾æ–‡ä»¶",
          "command": "tf --scenario debug-with-replay --urlPattern '/api/user/login' --replayFile 'login-debug.json'"
        }
      ]
    },
    "performance-baseline": {
      "metadata": {
        "name": "æ€§èƒ½åŸºçº¿å»ºç«‹",
        "description": "å»ºç«‹æ€§èƒ½åŸºçº¿å¹¶æ”¯æŒåç»­å¯¹æ¯”åˆ†æ",
        "category": "performance",
        "tags": ["baseline", "performance", "comparison"]
      },
      "parameters": [
        {
          "name": "urlPattern",
          "type": "string",
          "required": true,
          "description": "è¦å»ºç«‹åŸºçº¿çš„URLæ¨¡å¼"
        },
        {
          "name": "baselineFile",
          "type": "string",
          "required": false,
          "description": "åŸºçº¿æ–‡ä»¶åç§°ï¼Œé»˜è®¤è‡ªåŠ¨ç”Ÿæˆ"
        }
      ],
      "config": {
        "probes": ["database", "cache", "http-client"],
        "url-pattern": "${urlPattern}",
        "save-trace": "${baselineFile}",
        "auto-save-trace": true,
        "capture-queue-time": true,
        "business-analysis": true,
        "compress": true
      },
      "examples": [
        {
          "description": "ä¸ºè®¢å•APIå»ºç«‹æ€§èƒ½åŸºçº¿",
          "command": "tf --scenario performance-baseline --urlPattern '/api/order/**' --baselineFile 'order-baseline.json'"
        }
      ]
    }
  },
  "extends": {
    "enhanced-data-trace": {
      "extends": "data-modification-trace",
      "metadata": {
        "name": "å¢å¼ºæ•°æ®è¿½è¸ª",
        "description": "åŸºäºæ ‡å‡†æ•°æ®ä¿®æ”¹è¿½è¸ªï¼ŒåŒ…å«é¢å¤–çš„ç›‘æ§é¡¹"
      },
      "parameters": [
        {
          "name": "includeFileOps",
          "type": "boolean",
          "default": true,
          "description": "æ˜¯å¦åŒ…å«æ–‡ä»¶æ“ä½œçš„ç›‘æ§"
        }
      ],
      "config": {
        "probes": ["database", "cache", "http-client", "file-operations"],
        "filter-value": "${targetValue}",
        "output-format": "enhanced-detailed"
      }
    }
  },

  "conditional-scenarios": {
    "smart-debug": {
      "metadata": {
        "name": "æ™ºèƒ½è°ƒè¯•åœºæ™¯",
        "description": "æ ¹æ®å‚æ•°è‡ªåŠ¨é€‰æ‹©æœ€ä½³çš„è°ƒè¯•é…ç½®"
      },
      "parameters": [
        {
          "name": "problemType",
          "type": "string",
          "required": true,
          "options": ["performance", "data", "logic", "system"],
          "description": "é—®é¢˜ç±»å‹"
        },
        {
          "name": "severity",
          "type": "string",
          "default": "medium",
          "options": ["low", "medium", "high", "critical"],
          "description": "é—®é¢˜ä¸¥é‡ç¨‹åº¦"
        }
      ],
      "config": {
        "probes": ["database", "cache", "http-client"],
        "conditional": [
          {
            "condition": "problemType == 'performance'",
            "config": {
              "stack-trace-threshold": 100,
              "capture-queue-time": true,
              "output-format": "performance-focused"
            }
          },
          {
            "condition": "problemType == 'data'",
            "config": {
              "capture-parameters": true,
              "capture-return-values": true,
              "data-validation": true
            }
          },
          {
            "condition": "severity == 'critical'",
            "config": {
              "auto-stack-trace": true,
              "verbose": true,
              "probes": ["database", "cache", "http-client", "file-operations"]
            }
          }
        ]
      }
    }
  }
}
```

## 7. éåŠŸèƒ½æ€§éœ€æ±‚

### 7.1 åŠŸèƒ½å¼ºå¤§æ€§éœ€æ±‚
- **NFR-1**: å¿…é¡»æ”¯æŒæ— é™æ·±åº¦çš„è°ƒç”¨é“¾è·Ÿè¸ªï¼Œèƒ½å¤Ÿå¤„ç†å¤æ‚çš„åµŒå¥—è°ƒç”¨åœºæ™¯
- **NFR-2**: å¿…é¡»æ”¯æŒå¤šç§è¿‡æ»¤å’ŒåŒ¹é…æ¡ä»¶çš„ç»„åˆä½¿ç”¨
- **NFR-3**: å¿…é¡»æ”¯æŒå®æ—¶è·Ÿè¸ªå’Œå†å²æ•°æ®åˆ†æä¸¤ç§æ¨¡å¼
- **NFR-4**: å¿…é¡»æ”¯æŒè‡ªå®šä¹‰æ•°æ®æå–å’Œä¸šåŠ¡é€»è¾‘é›†æˆ

### 7.2 å¯æ‰©å±•æ€§éœ€æ±‚
- **NFR-5**: æ¢é’ˆç³»ç»Ÿå¿…é¡»é‡‡ç”¨æ’ä»¶åŒ–æ¶æ„ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½å’Œå¸è½½
- **NFR-6**: å¿…é¡»æä¾›æ ‡å‡†çš„æ¢é’ˆå¼€å‘æ¥å£ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹æ‰©å±•
- **NFR-7**: å¿…é¡»æ”¯æŒé…ç½®é©±åŠ¨çš„æ¢é’ˆæ‰©å±•ï¼Œç”¨æˆ·æ— éœ€ç¼–å†™Javaä»£ç å³å¯æ·»åŠ æ–°æ¢é’ˆ
- **NFR-8**: è¾“å‡ºæ ¼å¼å¿…é¡»æ”¯æŒè‡ªå®šä¹‰æ‰©å±•ï¼Œæ»¡è¶³ä¸åŒçš„é›†æˆéœ€æ±‚
- **NFR-9**: é…ç½®ç³»ç»Ÿå¿…é¡»æ”¯æŒåŠ¨æ€æ‰©å±•ï¼Œé€‚åº”æœªæ¥åŠŸèƒ½å¢é•¿
- **NFR-10**: å¿…é¡»æä¾›ä¸°å¯Œçš„é…ç½®æ¨¡æ¿å’Œå‘å¯¼ï¼Œé™ä½è‡ªå®šä¹‰æ¢é’ˆçš„é—¨æ§›

### 7.3 æ˜“ç”¨æ€§éœ€æ±‚
- **NFR-9**: å‘½ä»¤å’Œå‚æ•°åå¿…é¡»ç›´è§‚æ˜“æ‡‚ï¼Œéµå¾ª Arthas ç°æœ‰çš„å‘½åè§„èŒƒ
- **NFR-10**: é…ç½®ç³»ç»Ÿå¿…é¡»ç®€åŒ–é‡å¤çš„å‘½ä»¤ä½¿ç”¨ï¼Œæ”¯æŒæ™ºèƒ½é»˜è®¤å€¼
- **NFR-11**: æ–°ç”¨æˆ·å¿…é¡»èƒ½åœ¨5åˆ†é’Ÿå†…å®Œæˆé¦–æ¬¡æˆåŠŸè·Ÿè¸ª
- **NFR-12**: é”™è¯¯ä¿¡æ¯å¿…é¡»æ¸…æ™°æ˜ç¡®ï¼Œå¹¶æä¾›å…·ä½“çš„ä¿®å¤å»ºè®®
- **NFR-13**: å¿…é¡»æä¾›å†…ç½®åœºæ™¯é…ç½®ï¼Œé™ä½ç”¨æˆ·çš„å­¦ä¹ å’Œä½¿ç”¨é—¨æ§›
- **NFR-14**: åœºæ™¯é€‰æ‹©å¿…é¡»ç›´è§‚ï¼Œæä¾›æ¸…æ™°çš„åœºæ™¯æè¿°å’Œä½¿ç”¨ç¤ºä¾‹

### 7.4 å¯é æ€§éœ€æ±‚
- **NFR-15**: å‘½ä»¤å¿…é¡»æ˜¯å¥å£®çš„ï¼Œä¸åº”å¯¼è‡´ç›®æ ‡åº”ç”¨å´©æºƒæˆ–å‡ºç°æ„å¤–è¡Œä¸º
- **NFR-16**: å½“å•ä¸ªæ¢é’ˆå¤±è´¥æ—¶ï¼Œä¸åº”å½±å“å…¶ä»–æ¢é’ˆçš„æ­£å¸¸å·¥ä½œ
- **NFR-17**: å¿…é¡»å…·å¤‡è‡ªåŠ¨æ•…éšœæ¢å¤èƒ½åŠ›ï¼Œå¼‚å¸¸æƒ…å†µä¸‹èƒ½è‡ªåŠ¨æ¸…ç†èµ„æº
- **NFR-18**: åŒå‘é…ç½®åŒæ­¥å¿…é¡»æ˜¯åŸå­æ€§çš„ï¼Œé¿å…é…ç½®æ–‡ä»¶æŸå
- **NFR-19**: é…ç½®æ–‡ä»¶ç›‘æ§å¿…é¡»æ˜¯é«˜æ•ˆçš„ï¼Œä¸åº”å½±å“ç³»ç»Ÿæ€§èƒ½
- **NFR-20**: é…ç½®å†²çªæ—¶å¿…é¡»æœ‰æ˜ç¡®çš„è§£å†³ç­–ç•¥å’Œç”¨æˆ·æç¤º

### 7.5 å¯å‘ç°æ€§éœ€æ±‚
- **NFR-18**: ç”¨æˆ·å¿…é¡»èƒ½é€šè¿‡ `config --list` è½»æ¾å‘ç°æ‰€æœ‰å¯é…ç½®çš„é€‰é¡¹åŠå…¶å½“å‰å€¼
- **NFR-19**: å¿…é¡»æä¾›è¯¦ç»†çš„å¸®åŠ©ä¿¡æ¯å’Œä½¿ç”¨ç¤ºä¾‹
- **NFR-20**: å¿…é¡»æ”¯æŒå‘½ä»¤è‡ªåŠ¨è¡¥å…¨å’Œå‚æ•°æç¤º
- **NFR-21**: å¿…é¡»æä¾›åœºæ™¯å‘ç°åŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ‰¾åˆ°é€‚åˆçš„é—®é¢˜æ’æŸ¥åœºæ™¯

### 7.6 å…¼å®¹æ€§éœ€æ±‚
- **NFR-22**: å¿…é¡»æ”¯æŒ JDK 8 åŠä»¥ä¸Šç‰ˆæœ¬
- **NFR-23**: å¿…é¡»å…¼å®¹ä¸»æµçš„ Servlet å®¹å™¨ï¼ˆTomcat 7+ã€Jetty 9+ã€Undertowï¼‰
- **NFR-24**: å¿…é¡»æ”¯æŒä¸»æµçš„æ•°æ®åº“é©±åŠ¨å’Œå®¢æˆ·ç«¯åº“



## 8. éªŒæ”¶æ ‡å‡†

### 8.1 åŠŸèƒ½éªŒæ”¶
- [ ] èƒ½å¤ŸæˆåŠŸè·Ÿè¸ªä¸€ä¸ªå®Œæ•´çš„HTTPè¯·æ±‚ç”Ÿå‘½å‘¨æœŸ
- [ ] æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶å®šä¹‰çš„æ‰€æœ‰æ¢é’ˆç±»å‹
- [ ] é…ç½®ç³»ç»Ÿèƒ½å¤Ÿæ­£ç¡®åŠ è½½å’Œåº”ç”¨å¤šå±‚çº§é…ç½®
- [ ] è¾“å‡ºæ ¼å¼ç¬¦åˆè§„èŒƒï¼Œæ•°æ®å®Œæ•´å‡†ç¡®

### 8.2 æ‰§è¡Œé€»è¾‘ç†è§£éªŒæ”¶
- [ ] ç”¨æˆ·èƒ½åœ¨30åˆ†é’Ÿå†…é€šè¿‡è·Ÿè¸ªç»“æœç†è§£ä¸€ä¸ªå…¸å‹æ‰§è¡Œæµç¨‹
- [ ] èƒ½å¤Ÿæ¸…æ™°å±•ç¤ºæ•°æ®çš„å®Œæ•´å¤„ç†é“¾è·¯ï¼ˆè¯»å–â†’å¤„ç†â†’å­˜å‚¨ï¼‰
- [ ] èƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«å’Œæ ‡è®°å…³é”®æ‰§è¡Œæ­¥éª¤
- [ ] è¾“å‡ºç»“æœå…·æœ‰è‰¯å¥½çš„å¯è¯»æ€§

### 8.3 å‚æ•°å’Œç»“æœè®°å½•éªŒæ”¶
- [ ] èƒ½å¤Ÿå®Œæ•´è®°å½•HTTPè¯·æ±‚çš„æ‰€æœ‰å‚æ•°ï¼ˆURLå‚æ•°ã€è¡¨å•å‚æ•°ã€JSONä½“ï¼‰
- [ ] èƒ½å¤Ÿè®°å½•æ•°æ®åº“æ“ä½œçš„å®Œæ•´SQLå’Œå‚æ•°ç»‘å®šå€¼
- [ ] èƒ½å¤Ÿè®°å½•å¤–éƒ¨æœåŠ¡è°ƒç”¨çš„è¯·æ±‚å‚æ•°å’Œå“åº”ç»“æœ
- [ ] èƒ½å¤Ÿæ­£ç¡®å¤„ç†å¤æ‚å¯¹è±¡çš„åºåˆ—åŒ–å’Œæ˜¾ç¤º
- [ ] æ•æ„Ÿä¿¡æ¯è„±æ•åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] å¤§æ•°æ®è‡ªåŠ¨æˆªæ–­åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ”¯æŒå¤šçº§è¯¦ç»†ç¨‹åº¦çš„åˆ‡æ¢

### 8.4 å€¼è¿‡æ»¤å’Œæ•°æ®è¿½è¸ªéªŒæ”¶
- [ ] èƒ½å¤Ÿæ ¹æ®æŒ‡å®šå€¼è¿‡æ»¤å‡ºæ‰€æœ‰åŒ…å«è¯¥å€¼çš„æ“ä½œ
- [ ] æ”¯æŒå¤šç§æ•°æ®ç±»å‹çš„å€¼åŒ¹é…ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡å±æ€§ï¼‰
- [ ] èƒ½å¤Ÿåœ¨SQLå‚æ•°ã€HTTPå‚æ•°ã€æ–¹æ³•å‚æ•°ä¸­æ­£ç¡®è¯†åˆ«ç›®æ ‡å€¼
- [ ] å€¼åŒ¹é…æ—¶èƒ½å¤Ÿè‡ªåŠ¨æ•è·å®Œæ•´çš„çº¿ç¨‹å †æ ˆ
- [ ] æ”¯æŒå¤æ‚çš„è¿‡æ»¤è¡¨è¾¾å¼ï¼ˆANDã€ORã€NOTç»„åˆï¼‰
- [ ] è¿‡æ»¤ç»“æœèƒ½å¤Ÿé«˜äº®æ˜¾ç¤ºåŒ¹é…çš„ç›®æ ‡å€¼
- [ ] èƒ½å¤Ÿæ˜¾ç¤ºç›®æ ‡å€¼åœ¨å‚æ•°ç»“æ„ä¸­çš„å…·ä½“ä½ç½®
- [ ] æ”¯æŒæ¨¡ç³ŠåŒ¹é…å’Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…

### 8.5 é…ç½®é©±åŠ¨æ¢é’ˆéªŒæ”¶ **ã€æ ¸å¿ƒéªŒæ”¶æ ‡å‡†ã€‘**

#### 8.5.1 é…ç½®æ–‡ä»¶åŸºç¡€åŠŸèƒ½éªŒæ”¶
- [ ] **é…ç½®æ–‡ä»¶æ ¼å¼éªŒæ”¶**ï¼šèƒ½å¤Ÿæ­£ç¡®è§£æç¬¦åˆæ ‡å‡†æ ¼å¼çš„JSONé…ç½®æ–‡ä»¶
- [ ] **é…ç½®æ–‡ä»¶éªŒè¯éªŒæ”¶**ï¼šèƒ½å¤Ÿæ£€æµ‹å’ŒæŠ¥å‘Šé…ç½®æ–‡ä»¶çš„è¯­æ³•å’Œè¯­ä¹‰é”™è¯¯
- [ ] **åˆ†ç¦»å¼é…ç½®éªŒæ”¶**ï¼šèƒ½å¤Ÿæ­£ç¡®åŠ è½½å’Œç®¡ç†ç‹¬ç«‹çš„æ¢é’ˆé…ç½®æ–‡ä»¶
- [ ] **é…ç½®æ–‡ä»¶å‘ç°éªŒæ”¶**ï¼šèƒ½å¤Ÿè‡ªåŠ¨å‘ç°æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ¢é’ˆé…ç½®æ–‡ä»¶
- [ ] **å¤šå±‚çº§é…ç½®éªŒæ”¶**ï¼šæ”¯æŒç³»ç»Ÿçº§ã€ç”¨æˆ·çº§ã€é¡¹ç›®çº§çš„é…ç½®åˆ†å±‚ç®¡ç†
- [ ] **é…ç½®ä¼˜å…ˆçº§éªŒæ”¶**ï¼šé…ç½®è¦†ç›–ä¼˜å…ˆçº§æ­£ç¡®å·¥ä½œï¼ˆé¡¹ç›®çº§ > ç”¨æˆ·çº§ > ç³»ç»Ÿçº§ï¼‰

#### 8.5.2 ç›®æ ‡åŒ¹é…è§„åˆ™éªŒæ”¶
- [ ] **ç²¾ç¡®ç±»åŒ¹é…éªŒæ”¶**ï¼šèƒ½å¤Ÿç²¾ç¡®åŒ¹é…æŒ‡å®šçš„å®Œæ•´ç±»å
- [ ] **é€šé…ç¬¦åŒ¹é…éªŒæ”¶**ï¼šæ”¯æŒ*å’Œ?é€šé…ç¬¦çš„ç±»åå’Œæ–¹æ³•ååŒ¹é…
- [ ] **æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…éªŒæ”¶**ï¼šæ”¯æŒå¤æ‚æ­£åˆ™è¡¨è¾¾å¼çš„ç±»åå’Œæ–¹æ³•ååŒ¹é…
- [ ] **æ³¨è§£åŒ¹é…éªŒæ”¶**ï¼šèƒ½å¤ŸåŒ¹é…å¸¦æœ‰æŒ‡å®šæ³¨è§£çš„ç±»å’Œæ–¹æ³•
- [ ] **æ¥å£å®ç°åŒ¹é…éªŒæ”¶**ï¼šèƒ½å¤ŸåŒ¹é…å®ç°æŒ‡å®šæ¥å£çš„ç±»
- [ ] **ç»§æ‰¿å…³ç³»åŒ¹é…éªŒæ”¶**ï¼šèƒ½å¤ŸåŒ¹é…ç»§æ‰¿æŒ‡å®šç±»çš„å­ç±»
- [ ] **æ–¹æ³•ç­¾ååŒ¹é…éªŒæ”¶**ï¼šæ”¯æŒåŸºäºå‚æ•°ç±»å‹ã€è¿”å›ç±»å‹ã€ä¿®é¥°ç¬¦çš„ç²¾ç¡®æ–¹æ³•åŒ¹é…

#### 8.5.3 ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½éªŒæ”¶
- [ ] **jaråŒ…ç‰ˆæœ¬æ£€æµ‹éªŒæ”¶**ï¼šèƒ½å¤Ÿæ­£ç¡®è¯†åˆ«classpathä¸­jaråŒ…çš„ç‰ˆæœ¬ä¿¡æ¯
- [ ] **ç‰ˆæœ¬èŒƒå›´åŒ¹é…éªŒæ”¶**ï¼šèƒ½å¤Ÿæ­£ç¡®è§£æå’ŒåŒ¹é…è¯­ä¹‰åŒ–ç‰ˆæœ¬èŒƒå›´
- [ ] **ç‰ˆæœ¬æ’é™¤åŠŸèƒ½éªŒæ”¶**ï¼šèƒ½å¤Ÿæ­£ç¡®æ’é™¤æŒ‡å®šç‰ˆæœ¬çš„jaråŒ…
- [ ] **å¤šç‰ˆæœ¬æ”¯æŒéªŒæ”¶**ï¼šåŒä¸€æ¢é’ˆèƒ½å¤Ÿä¸ºä¸åŒç‰ˆæœ¬æä¾›ä¸åŒçš„é…ç½®
- [ ] **ç‰ˆæœ¬å†²çªæ£€æµ‹éªŒæ”¶**ï¼šèƒ½å¤Ÿæ£€æµ‹å’ŒæŠ¥å‘Šç‰ˆæœ¬å†²çªé—®é¢˜
- [ ] **ç‰ˆæœ¬å…¼å®¹æ€§æŠ¥å‘ŠéªŒæ”¶**ï¼šèƒ½å¤Ÿç”Ÿæˆè¯¦ç»†çš„ç‰ˆæœ¬å…¼å®¹æ€§åˆ†ææŠ¥å‘Š

#### 8.5.4 æ•°æ®æ•è·åŠŸèƒ½éªŒæ”¶
- [ ] **å‚æ•°æ•è·éªŒæ”¶**ï¼šèƒ½å¤ŸæŒ‰é…ç½®æ­£ç¡®æ•è·æ–¹æ³•å‚æ•°ï¼ˆæ”¯æŒç´¢å¼•é€‰æ‹©ã€åç§°é€‰æ‹©ï¼‰
- [ ] **è¿”å›å€¼æ•è·éªŒæ”¶**ï¼šèƒ½å¤ŸæŒ‰é…ç½®æ­£ç¡®æ•è·æ–¹æ³•è¿”å›å€¼
- [ ] **å¼‚å¸¸æ•è·éªŒæ”¶**ï¼šèƒ½å¤ŸæŒ‰é…ç½®æ­£ç¡®æ•è·å¼‚å¸¸ä¿¡æ¯å’Œå †æ ˆè·Ÿè¸ª
- [ ] **æ‰§è¡Œæ—¶é—´æ•è·éªŒæ”¶**ï¼šèƒ½å¤Ÿå‡†ç¡®æµ‹é‡å’Œè®°å½•æ–¹æ³•æ‰§è¡Œæ—¶é—´
- [ ] **é€’å½’æ·±åº¦æ§åˆ¶éªŒæ”¶**ï¼šå¯¹è±¡åºåˆ—åŒ–çš„é€’å½’æ·±åº¦æ§åˆ¶æ­£ç¡®å·¥ä½œ
- [ ] **å¤§å°é™åˆ¶éªŒæ”¶**ï¼šæ•°æ®å¤§å°é™åˆ¶å’Œæˆªæ–­åŠŸèƒ½æ­£ç¡®å·¥ä½œ
- [ ] **ç±»å‹è¿‡æ»¤éªŒæ”¶**ï¼šèƒ½å¤ŸæŒ‰é…ç½®æ’é™¤æŒ‡å®šç±»å‹çš„å‚æ•°

#### 8.5.5 æ•°æ®æå–è¡¨è¾¾å¼éªŒæ”¶
- [ ] **åŸºç¡€è¡¨è¾¾å¼éªŒæ”¶**ï¼šthisã€argsã€returnValueç­‰åŸºç¡€è¡¨è¾¾å¼æ­£ç¡®å·¥ä½œ
- [ ] **å±æ€§è®¿é—®éªŒæ”¶**ï¼šæ”¯æŒåµŒå¥—å±æ€§è®¿é—®ï¼ˆå¦‚args[0].request.headersï¼‰
- [ ] **æ–¹æ³•è°ƒç”¨éªŒæ”¶**ï¼šæ”¯æŒåœ¨è¡¨è¾¾å¼ä¸­è°ƒç”¨å¯¹è±¡æ–¹æ³•
- [ ] **æ¡ä»¶è¡¨è¾¾å¼éªŒæ”¶**ï¼šæ”¯æŒä¸‰å…ƒè¿ç®—ç¬¦å’Œæ¡ä»¶åˆ¤æ–­
- [ ] **ç±»å‹æ£€æŸ¥éªŒæ”¶**ï¼šæ”¯æŒinstanceofç­‰ç±»å‹æ£€æŸ¥æ“ä½œ
- [ ] **å‡½æ•°è°ƒç”¨éªŒæ”¶**ï¼šæ”¯æŒå†…ç½®å‡½æ•°è°ƒç”¨ï¼ˆå¦‚JSON.stringifyï¼‰
- [ ] **è¡¨è¾¾å¼å®‰å…¨éªŒæ”¶**ï¼šè¡¨è¾¾å¼æ‰§è¡Œä¸ä¼šå¯¼è‡´å®‰å…¨é—®é¢˜æˆ–ç³»ç»Ÿå¼‚å¸¸

#### 8.5.6 è¿‡æ»¤è§„åˆ™åŠŸèƒ½éªŒæ”¶
- [ ] **å­—ç¬¦ä¸²åŒ¹é…è¿‡æ»¤éªŒæ”¶**ï¼šæ”¯æŒå­—ç¬¦ä¸²åŒ…å«ã€å¼€å¤´ã€ç»“å°¾ç­‰åŒ¹é…
- [ ] **æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤éªŒæ”¶**ï¼šæ”¯æŒå¤æ‚æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤
- [ ] **æ•°å€¼æ¯”è¾ƒè¿‡æ»¤éªŒæ”¶**ï¼šæ”¯æŒæ•°å€¼çš„å¤§å°æ¯”è¾ƒè¿‡æ»¤
- [ ] **é€»è¾‘ç»„åˆè¿‡æ»¤éªŒæ”¶**ï¼šæ”¯æŒANDã€ORã€NOTç­‰é€»è¾‘ç»„åˆ
- [ ] **è¿‡æ»¤åŠ¨ä½œéªŒæ”¶**ï¼šincludeã€excludeã€tagã€transformç­‰åŠ¨ä½œæ­£ç¡®æ‰§è¡Œ
- [ ] **è¿‡æ»¤ä¼˜å…ˆçº§éªŒæ”¶**ï¼šå¤šä¸ªè¿‡æ»¤è§„åˆ™çš„ä¼˜å…ˆçº§æ­£ç¡®å·¥ä½œ

#### 8.5.7 é…ç½®ç®¡ç†åŠŸèƒ½éªŒæ”¶
- [ ] **é…ç½®çƒ­é‡è½½éªŒæ”¶**ï¼šé…ç½®æ–‡ä»¶ä¿®æ”¹åèƒ½å¤Ÿè‡ªåŠ¨é‡æ–°åŠ è½½
- [ ] **é…ç½®æ–‡ä»¶æ“ä½œéªŒæ”¶**ï¼šæ”¯æŒé…ç½®æ–‡ä»¶çš„åˆ›å»ºã€å¤åˆ¶ã€åˆ é™¤ã€é‡å‘½å
- [ ] **é…ç½®æ¨¡æ¿ç”ŸæˆéªŒæ”¶**ï¼šèƒ½å¤Ÿç”Ÿæˆæ ‡å‡†çš„æ¢é’ˆé…ç½®æ¨¡æ¿
- [ ] **é…ç½®éªŒè¯å·¥å…·éªŒæ”¶**ï¼šæä¾›å®Œæ•´çš„é…ç½®éªŒè¯å’Œé”™è¯¯æŠ¥å‘Š
- [ ] **æ¢é’ˆç»„åˆéªŒæ”¶**ï¼šæ¢é’ˆç»„åˆé…ç½®èƒ½å¤Ÿæ­£ç¡®å¼•ç”¨å’ŒåŠ è½½ç‹¬ç«‹æ¢é’ˆæ–‡ä»¶
- [ ] **é…ç½®è¿ç§»éªŒæ”¶**ï¼šèƒ½å¤Ÿå°†å¤§é…ç½®æ–‡ä»¶æ­£ç¡®æ‹†åˆ†ä¸ºç‹¬ç«‹çš„æ¢é’ˆé…ç½®æ–‡ä»¶

#### 8.5.8 æ€§èƒ½å’Œç¨³å®šæ€§éªŒæ”¶
- [ ] **é…ç½®åŠ è½½æ€§èƒ½éªŒæ”¶**ï¼šé…ç½®æ–‡ä»¶è§£ææ—¶é—´ä¸è¶…è¿‡100ms
- [ ] **è¿è¡Œæ—¶æ€§èƒ½éªŒæ”¶**ï¼šæ¢é’ˆå¼€é”€ä¸è¶…è¿‡åŸæ–¹æ³•æ‰§è¡Œæ—¶é—´çš„5%
- [ ] **å†…å­˜ä½¿ç”¨éªŒæ”¶**ï¼šå†…å­˜å ç”¨å¢é•¿ä¸è¶…è¿‡åŸåº”ç”¨çš„10%
- [ ] **é”™è¯¯éš”ç¦»éªŒæ”¶**ï¼šå•ä¸ªæ¢é’ˆé…ç½®é”™è¯¯ä¸å½±å“å…¶ä»–æ¢é’ˆæ­£å¸¸å·¥ä½œ
- [ ] **å¼‚å¸¸å¤„ç†éªŒæ”¶**ï¼šé…ç½®é”™è¯¯å’Œè¿è¡Œæ—¶å¼‚å¸¸å¾—åˆ°æ­£ç¡®å¤„ç†å’ŒæŠ¥å‘Š
- [ ] **èµ„æºæ¸…ç†éªŒæ”¶**ï¼šæ¢é’ˆå¸è½½æ—¶èƒ½å¤Ÿæ­£ç¡®æ¸…ç†ç›¸å…³èµ„æº

#### 8.5.9 æ‰©å±•æ€§åŠŸèƒ½éªŒæ”¶
- [ ] **ç¬¬ä¸‰æ–¹æ¢é’ˆéªŒæ”¶**ï¼šèƒ½å¤ŸåŠ è½½å’Œä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„æ¢é’ˆé…ç½®æ–‡ä»¶
- [ ] **è‡ªå®šä¹‰æ¢é’ˆéªŒæ”¶**ï¼šç”¨æˆ·èƒ½å¤Ÿåˆ›å»ºå’Œä½¿ç”¨è‡ªå®šä¹‰æ¢é’ˆé…ç½®
- [ ] **æ¢é’ˆç»§æ‰¿éªŒæ”¶**ï¼šæ¢é’ˆé…ç½®çš„ç»§æ‰¿å’Œæ‰©å±•æœºåˆ¶æ­£ç¡®å·¥ä½œ
- [ ] **æ’ä»¶åŒ–æ¶æ„éªŒæ”¶**ï¼šæ¢é’ˆç³»ç»Ÿçš„æ’ä»¶åŒ–æ¶æ„æ”¯æŒåŠ¨æ€æ‰©å±•
- [ ] **APIæ¥å£éªŒæ”¶**ï¼šæä¾›å®Œæ•´çš„æ¢é’ˆç®¡ç†APIæ¥å£
- [ ] **æ–‡æ¡£å’Œç¤ºä¾‹éªŒæ”¶**ï¼šæä¾›å®Œæ•´çš„é…ç½®æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹

### 8.6 åŠŸèƒ½å¼ºå¤§æ€§éªŒæ”¶
- [ ] èƒ½å¤Ÿè·Ÿè¸ªå¤æ‚çš„åµŒå¥—è°ƒç”¨é“¾ï¼ˆæ·±åº¦ > 10å±‚ï¼‰
- [ ] æ”¯æŒå¤šç§è¿‡æ»¤æ¡ä»¶çš„ç»„åˆä½¿ç”¨
- [ ] èƒ½å¤Ÿå‡†ç¡®è®°å½•å„ç§æ“ä½œçš„å®é™…æ‰§è¡Œæ—¶é—´ï¼ˆåŒ…æ‹¬é•¿æ—¶é—´æ“ä½œï¼‰
- [ ] æ”¯æŒè‡ªå®šä¹‰æ¢é’ˆçš„åŠ¨æ€åŠ è½½å’Œä½¿ç”¨
- [ ] æ”¯æŒå¤æ‚ä¸šåŠ¡åœºæ™¯çš„å®Œæ•´è·Ÿè¸ª

### 8.7 é…ç½®é©±åŠ¨åœºæ™¯éªŒæ”¶
- [ ] èƒ½å¤Ÿä»JSONé…ç½®æ–‡ä»¶ä¸­åŠ è½½åœºæ™¯å®šä¹‰
- [ ] æ”¯æŒåœºæ™¯é…ç½®æ–‡ä»¶çš„åˆ†å±‚ç®¡ç†ï¼ˆç³»ç»Ÿçº§ã€ç”¨æˆ·çº§ã€é¡¹ç›®çº§ï¼‰
- [ ] åœºæ™¯ç»§æ‰¿åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼ˆextendså…³é”®å­—ï¼‰
- [ ] æ¡ä»¶é…ç½®åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼ˆåŸºäºå‚æ•°çš„æ¡ä»¶é€»è¾‘ï¼‰
- [ ] åœºæ™¯å‚æ•°éªŒè¯åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼ˆç±»å‹ã€èŒƒå›´ã€æ ¼å¼éªŒè¯ï¼‰
- [ ] èƒ½å¤Ÿé€šè¿‡åœºæ™¯åç§°å¿«é€Ÿåº”ç”¨é…ç½®
- [ ] åœºæ™¯é…ç½®æ–‡ä»¶çš„çƒ­åŠ è½½åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] é…ç½®æ¨¡æ¿å’Œå˜é‡æ›¿æ¢åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] JSONåœºæ™¯é…ç½®éªŒè¯åŠŸèƒ½èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«é…ç½®é”™è¯¯
- [ ] èƒ½å¤Ÿç”ŸæˆJSONæ ¼å¼çš„åœºæ™¯é…ç½®æ¨¡æ¿

### 8.8 åŒå‘é…ç½®åŒæ­¥éªŒæ”¶
- [ ] é€šè¿‡configå‘½ä»¤ä¿®æ”¹çš„é…ç½®èƒ½å¤Ÿè‡ªåŠ¨ä¿å­˜åˆ°é…ç½®æ–‡ä»¶
- [ ] ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶åç¨‹åºèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹å¹¶é‡æ–°åŠ è½½
- [ ] é…ç½®å†²çªæ—¶èƒ½å¤Ÿæ­£ç¡®å¤„ç†å¹¶æä¾›æ˜ç¡®çš„æç¤º
- [ ] é…ç½®å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] é…ç½®æ–‡ä»¶ç›‘æ§åŠŸèƒ½ä¸å½±å“ç³»ç»Ÿæ€§èƒ½
- [ ] å¤šå±‚çº§é…ç½®çš„åŒæ­¥ä¼˜å…ˆçº§æ­£ç¡®
- [ ] é…ç½®åŒæ­¥çŠ¶æ€æŸ¥è¯¢åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] å¼ºåˆ¶åŒæ­¥åŠŸèƒ½èƒ½å¤Ÿæ­£ç¡®å¤„ç†å„ç§åœºæ™¯

### 8.9 è¯·æ±‚å›æ”¾åŠŸèƒ½éªŒæ”¶
- [ ] èƒ½å¤Ÿåœ¨è·Ÿè¸ªæ—¶ç”Ÿæˆå®Œæ•´çš„å›æ”¾æ–‡ä»¶
- [ ] å›æ”¾æ–‡ä»¶èƒ½å¤ŸæˆåŠŸé‡ç°åŸå§‹è¯·æ±‚
- [ ] æ”¯æŒå‚æ•°åŒ–å›æ”¾ï¼Œèƒ½å¤Ÿä¿®æ”¹éƒ¨åˆ†å‚æ•°
- [ ] æ”¯æŒæ‰¹é‡å›æ”¾å’Œå¹¶å‘å›æ”¾
- [ ] å›æ”¾ç»“æœå¯¹æ¯”åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] å›æ”¾æ–‡ä»¶ç®¡ç†åŠŸèƒ½ï¼ˆåˆ—è¡¨ã€åˆ é™¤ã€å¯¼å…¥å¯¼å‡ºï¼‰æ­£å¸¸å·¥ä½œ
- [ ] å›æ”¾æ–‡ä»¶æ ¼å¼éªŒè¯åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] å›æ”¾è¿‡ç¨‹ä¸­çš„è·Ÿè¸ªåŠŸèƒ½æ­£å¸¸å·¥ä½œ

### 8.10 è·Ÿè¸ªç»“æœä¿å­˜å’Œå¯¹æ¯”éªŒæ”¶
- [ ] èƒ½å¤Ÿå°†è·Ÿè¸ªç»“æœä¿å­˜ä¸ºå¤šç§æ ¼å¼ï¼ˆJSONã€XMLã€æ–‡æœ¬ï¼‰
- [ ] æ”¯æŒè‡ªåŠ¨ä¿å­˜å’Œæ‰‹åŠ¨ä¿å­˜è·Ÿè¸ªç»“æœ
- [ ] è·Ÿè¸ªç»“æœå¯¹æ¯”åŠŸèƒ½èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å·®å¼‚
- [ ] æ”¯æŒä¸å†å²åŸºçº¿ç»“æœçš„å¯¹æ¯”
- [ ] è·Ÿè¸ªç»“æœæœç´¢åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼ˆæŒ‰æ—¶é—´ã€URLã€æ ‡ç­¾ï¼‰
- [ ] è·Ÿè¸ªç»“æœç®¡ç†åŠŸèƒ½ï¼ˆåˆ—è¡¨ã€åˆ é™¤ã€æ ‡ç­¾ï¼‰æ­£å¸¸å·¥ä½œ
- [ ] å¯¹æ¯”æŠ¥å‘Šç”ŸæˆåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] å‹ç¼©å­˜å‚¨åŠŸèƒ½æ­£å¸¸å·¥ä½œ

### 8.11 æ˜“ç”¨æ€§éªŒæ”¶
- [ ] æ–°ç”¨æˆ·èƒ½åœ¨5åˆ†é’Ÿå†…å®Œæˆé¦–æ¬¡æˆåŠŸè·Ÿè¸ª
- [ ] æ‰€æœ‰é”™è¯¯ä¿¡æ¯éƒ½æœ‰æ˜ç¡®çš„ä¿®å¤å»ºè®®
- [ ] å¸®åŠ©æ–‡æ¡£å®Œæ•´ï¼ŒåŒ…å«å¸¸è§ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

## 9. é£é™©è¯„ä¼°

### 9.1 æŠ€æœ¯é£é™©
- **å­—èŠ‚ç å¢å¼ºå…¼å®¹æ€§**ï¼šä¸åŒJVMç‰ˆæœ¬å’Œåº”ç”¨æ¡†æ¶çš„å…¼å®¹æ€§é—®é¢˜
- **æ€§èƒ½å½±å“**ï¼šåœ¨é«˜è´Ÿè½½ç¯å¢ƒä¸‹å¯èƒ½å¯¹åº”ç”¨æ€§èƒ½äº§ç”Ÿä¸å¯æ¥å—çš„å½±å“
- **å†…å­˜æ³„æ¼**ï¼šé•¿æ—¶é—´è¿è¡Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼

### 9.2 ä¸šåŠ¡é£é™©
- **ç”Ÿäº§ç¯å¢ƒç¨³å®šæ€§**ï¼šå¯èƒ½å½±å“ç”Ÿäº§ç¯å¢ƒçš„ç¨³å®šè¿è¡Œ
- **å­¦ä¹ æˆæœ¬**ï¼šç”¨æˆ·éœ€è¦æ—¶é—´å­¦ä¹ å’Œé€‚åº”æ–°å·¥å…·
- **ç»´æŠ¤æˆæœ¬**ï¼šéœ€è¦æŒç»­ç»´æŠ¤å’Œæ›´æ–°æ¢é’ˆé€‚é…

### 9.3 é£é™©ç¼“è§£æªæ–½
- å……åˆ†çš„å…¼å®¹æ€§æµ‹è¯•å’Œæ€§èƒ½åŸºå‡†æµ‹è¯•
- æä¾›è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£å’Œæœ€ä½³å®è·µæŒ‡å—
- å»ºç«‹å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶
- æä¾›å¿«é€Ÿå›æ»šå’Œç¦ç”¨æœºåˆ¶

## 10. é¡¹ç›®é‡Œç¨‹ç¢‘

### 10.1 ç¬¬ä¸€é˜¶æ®µï¼šé…ç½®é©±åŠ¨æ¢é’ˆç³»ç»Ÿï¼ˆ4å‘¨ï¼‰**ã€æœ€é«˜ä¼˜å…ˆçº§ã€‘**
- æ¢é’ˆé…ç½®æ–‡ä»¶æ ¼å¼å®šä¹‰å’ŒéªŒè¯
- jaråŒ…ç‰ˆæœ¬æ£€æµ‹å’ŒåŒ¹é…èƒ½åŠ›
- åŸºç¡€æ¢é’ˆé…ç½®ç®¡ç†èƒ½åŠ›
- JDBCæ¢é’ˆçš„é…ç½®é©±åŠ¨æ”¯æŒ
- é…ç½®æ–‡ä»¶çƒ­åŠ è½½å’ŒåŠ¨æ€æ›´æ–°

### 10.2 ç¬¬äºŒé˜¶æ®µï¼šæ¢é’ˆæ‰©å±•å’Œç‰ˆæœ¬æ”¯æŒï¼ˆ3å‘¨ï¼‰
- Redisã€HTTPå®¢æˆ·ç«¯æ¢é’ˆçš„é…ç½®é©±åŠ¨æ”¯æŒ
- å¤šç‰ˆæœ¬jaråŒ…æ”¯æŒå’Œå·®å¼‚åŒ–é…ç½®
- ç‰ˆæœ¬å†²çªæ£€æµ‹å’Œå¤„ç†èƒ½åŠ›
- æ¢é’ˆç»„åˆå’Œç»§æ‰¿åŠŸèƒ½

### 10.3 ç¬¬ä¸‰é˜¶æ®µï¼šè·Ÿè¸ªå¼•æ“å’Œè¾“å‡ºï¼ˆ3å‘¨ï¼‰
- åŸºç¡€çš„HTTPè¯·æ±‚è·Ÿè¸ªèƒ½åŠ›
- è·Ÿè¸ªæ•°æ®æ”¶é›†å’Œå¤„ç†
- æ§åˆ¶å°è¾“å‡ºå’Œæ–‡ä»¶è¾“å‡º
- å †æ ˆè·Ÿè¸ªåŠŸèƒ½

### 10.4 ç¬¬å››é˜¶æ®µï¼šå…¨å±€é…ç½®ç³»ç»Ÿï¼ˆ2å‘¨ï¼‰
- å…¨å±€é…ç½®ç³»ç»Ÿæ”¯æŒ
- å¤šå±‚çº§é…ç½®åŠ è½½å’ŒåŒæ­¥
- é…ç½®ç®¡ç†å‘½ä»¤å®Œå–„

### 10.5 ç¬¬äº”é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ï¼ˆ2å‘¨ï¼‰
- åœºæ™¯ç®¡ç†å’Œå›æ”¾åŠŸèƒ½
- è·Ÿè¸ªç»“æœå¯¹æ¯”åˆ†æ
- æ€§èƒ½ä¼˜åŒ–å’Œæµ‹è¯•

### 10.6 ç¬¬å…­é˜¶æ®µï¼šä¼˜åŒ–å®Œå–„ï¼ˆ1å‘¨ï¼‰
- æ–‡æ¡£å®Œå–„å’Œç¤ºä¾‹è¡¥å……
- ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- æœ€ç»ˆæµ‹è¯•å’Œå‘å¸ƒå‡†å¤‡

---

## ğŸ“‹ éœ€æ±‚æ–‡æ¡£æ€»ç»“

æœ¬éœ€æ±‚æ–‡æ¡£å®Œæ•´å®šä¹‰äº†Arthasé€šç”¨è·Ÿè¸ªåŠŸèƒ½çš„æ‰€æœ‰éœ€æ±‚ï¼ŒåŒ…æ‹¬ï¼š

### ğŸ¯ æ ¸å¿ƒå†…å®¹
- **ä¸šåŠ¡èƒŒæ™¯**ï¼šè¯¦ç»†åˆ†æäº†ç°ä»£ç³»ç»Ÿçš„å¤æ‚æ€§å’Œç°æœ‰å·¥å…·çš„å±€é™æ€§
- **æ ¸å¿ƒä»·å€¼**ï¼šæ˜ç¡®äº†ä¸šåŠ¡ä»·å€¼ã€æŠ€æœ¯ä»·å€¼å’Œç”¨æˆ·ä»·å€¼
- **åº”ç”¨åœºæ™¯**ï¼šæä¾›äº†21ä¸ªå…·ä½“çš„åº”ç”¨åœºæ™¯ï¼Œè¦†ç›–å®Œæ•´çš„è½¯ä»¶ç”Ÿå‘½å‘¨æœŸ
- **éœ€æ±‚ç›®æ ‡**ï¼šå®šä¹‰äº†åŠŸèƒ½ã€æ€§èƒ½ã€å¯ç”¨æ€§ã€æ‰©å±•æ€§å››ä¸ªç»´åº¦çš„ç›®æ ‡
- **åŠŸèƒ½éœ€æ±‚**ï¼šè¯¦ç»†å®šä¹‰äº†trace-flowå‘½ä»¤ã€æ¢é’ˆç³»ç»Ÿã€é…ç½®ç®¡ç†ç­‰åŠŸèƒ½éœ€æ±‚
- **éªŒæ”¶æ ‡å‡†**ï¼šæä¾›äº†å¯éªŒè¯çš„éªŒæ”¶æ ‡å‡†å’ŒæˆåŠŸæŒ‡æ ‡

### ğŸ”§ è®¾è®¡åŸåˆ™
- **éœ€æ±‚å¯¼å‘**ï¼šä¸“æ³¨äº"åšä»€ä¹ˆ"è€Œä¸æ˜¯"æ€ä¹ˆåš"
- **ç”¨æˆ·ä»·å€¼**ï¼šæ‰€æœ‰éœ€æ±‚éƒ½ä»ç”¨æˆ·ä»·å€¼å’Œä¸šåŠ¡éœ€æ±‚å‡ºå‘
- **å¯éªŒè¯æ€§**ï¼šæ¯ä¸ªéœ€æ±‚éƒ½æœ‰æ˜ç¡®çš„éªŒæ”¶æ ‡å‡†
- **å¯è¿½æº¯æ€§**ï¼šéœ€æ±‚ç¼–å·æ¸…æ™°ï¼Œä¾¿äºç®¡ç†å’Œå˜æ›´è·Ÿè¸ª
- **å®Œæ•´æ€§**ï¼šè¦†ç›–åŠŸèƒ½å’ŒéåŠŸèƒ½éœ€æ±‚çš„å„ä¸ªæ–¹é¢

### ğŸ“Š éœ€æ±‚ç»Ÿè®¡
- **æ ¸å¿ƒéœ€æ±‚**ï¼š5ä¸ªåŸºç¡€éœ€æ±‚ï¼ˆFR-001 åˆ° FR-005ï¼‰
- **åŠŸèƒ½éœ€æ±‚**ï¼šæ¶µç›–trace-flowå‘½ä»¤ã€æ¢é’ˆç³»ç»Ÿã€é…ç½®ç®¡ç†ç­‰
- **æ¢é’ˆé…ç½®éœ€æ±‚**ï¼š93ä¸ªè¯¦ç»†éœ€æ±‚ï¼ˆFR-PROBE-001 åˆ° FR-PROBE-093ï¼‰
- **æŒ‡æ ‡é©±åŠ¨éœ€æ±‚**ï¼š12ä¸ªæŒ‡æ ‡ç³»ç»Ÿéœ€æ±‚ï¼ˆFR-1001 åˆ° FR-1012ï¼‰
- **éªŒæ”¶æ ‡å‡†**ï¼š76é¡¹è¯¦ç»†çš„éªŒæ”¶æ ‡å‡†

### ğŸš€ å®æ–½æŒ‡å¯¼
- **ä¼˜å…ˆçº§æ˜ç¡®**ï¼šP0åˆ°P3çš„ä¼˜å…ˆçº§åˆ’åˆ†
- **é‡Œç¨‹ç¢‘æ¸…æ™°**ï¼š6ä¸ªé˜¶æ®µçš„å®æ–½è®¡åˆ’
- **é£é™©å¯æ§**ï¼šè¯¦ç»†çš„éªŒæ”¶æ ‡å‡†ç¡®ä¿è´¨é‡
- **ä»·å€¼é©±åŠ¨**ï¼šæ¯ä¸ªåŠŸèƒ½éƒ½æœ‰æ˜ç¡®çš„ç”¨æˆ·ä»·å€¼

**æ³¨æ„**ï¼šæœ¬æ–‡æ¡£ä¸“æ³¨äºéœ€æ±‚å®šä¹‰ï¼Œä¸åŒ…å«å…·ä½“çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆã€‚æŠ€æœ¯å®ç°åº”è¯¥åœ¨è¯¦ç»†è®¾è®¡é˜¶æ®µæ ¹æ®è¿™äº›éœ€æ±‚è¿›è¡Œè®¾è®¡å’Œå¼€å‘ã€‚
